(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[711],{4725:function(a,b,c){var d,e;(function(f,g){var h=(f=f||c(9845)).window,i=f.document,j=new function(){var a=/^(statics|enumerable|beans|preserve)$/,b=[],c=b.slice,d=Object.create,e=Object.getOwnPropertyDescriptor,f=Object.defineProperty,h=b.forEach||function(a,b){for(var c=0,d=this.length;c<d;c++)a.call(b,this[c],c,this)},i=function(a,b){for(var c in this)this.hasOwnProperty(c)&&a.call(b,this[c],c,this)},j=Object.assign||function(a){for(var b=1,c=arguments.length;b<c;b++){var d=arguments[b];for(var e in d)d.hasOwnProperty(e)&&(a[e]=d[e])}return a},k=function(a,b,c){if(a){var d=e(a,"length");(d&&"number"==typeof d.value?h:i).call(a,b,c=c||a)}return c};function l(b,c,d,g,h){var i={};function j(a,j){"string"==typeof(j=j||(j=e(c,a))&&(j.get?j:j.value))&&"#"===j[0]&&(j=b[j.substring(1)]||j);var k,l="function"==typeof j,n=j,o=h||l&&!j.base?j&&j.get?a in b:b[a]:null;h&&o||(l&&o&&(j.base=o),l&& !1!==g&&(k=a.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(i[k[3].toLowerCase()+k[4]]=k[2]),n&&!l&&n.get&&"function"==typeof n.get&&m.isPlainObject(n)||(n={value:n,writable:!0}),(e(b,a)||{configurable:!0}).configurable&&(n.configurable=!0,n.enumerable=null!=d?d:!k),f(b,a,n))}if(c){for(var k in c)c.hasOwnProperty(k)&&!a.test(k)&&j(k);for(var k in i){var l=i[k],n=b["set"+l],o=b["get"+l]||n&&b["is"+l];o&&(!0===g||0===o.length)&&j(k,{get:o,set:n})}}return b}function m(){for(var a=0,b=arguments.length;a<b;a++){var c=arguments[a];c&&j(this,c)}return this}return l(m,{inject:function(a){if(a){var b=!0===a.statics?a:a.statics,c=a.beans,d=a.preserve;b!==a&&l(this.prototype,a,a.enumerable,c,d),l(this,b,null,c,d)}for(var e=1,f=arguments.length;e<f;e++)this.inject(arguments[e]);return this},extend:function(){for(var a,b,c,e=this,g=0,h=arguments.length;g<h&&!(a&&b);g++)c=arguments[g],a=a||c.initialize,b=b||c.prototype;return b=(a=a||function(){e.apply(this,arguments)}).prototype=b||d(this.prototype),f(b,"constructor",{value:a,writable:!0,configurable:!0}),l(a,this),arguments.length&&this.inject.apply(a,arguments),a.base=e,a}}).inject({enumerable:!1,initialize:m,set:m,inject:function(){for(var a=0,b=arguments.length;a<b;a++){var c=arguments[a];c&&l(this,c,c.enumerable,c.beans,c.preserve)}return this},extend:function(){var a=d(this);return a.inject.apply(a,arguments)},each:function(a,b){return k(this,a,b)},clone:function(){return new this.constructor(this)},statics:{set:j,each:k,create:d,define:f,describe:e,clone:function(a){return j(new a.constructor,a)},isPlainObject:function(a){var b=null!=a&&a.constructor;return b&&(b===Object||b===m||"Object"===b.name)},pick:function(a,b){return a!==g?a:b},slice:function(a,b,d){return c.call(a,b,d)}}})};a.exports=j,j.inject({enumerable:!1,toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+j.each(this,function(a,b){if(!/^_/.test(b)){var c=typeof a;this.push(b+": "+("number"===c?o.instance.number(a):"string"===c?"'"+a+"'":a))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(a){return j.importJSON(a,this)},exportJSON:function(a){return j.exportJSON(this,a)},toJSON:function(){return j.serialize(this)},set:function(a,b){return a&&j.filter(this,a,b,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function a(){var b=a.base.apply(this,arguments),c=b.prototype._class;return c&&!j.exports[c]&&(j.exports[c]=b),b},equals:function(a,b){if(a===b)return!0;if(a&&a.equals)return a.equals(b);if(b&&b.equals)return b.equals(a);if(a&&b&&"object"==typeof a&&"object"==typeof b){if(Array.isArray(a)&&Array.isArray(b)){var c=a.length;if(c!==b.length)return!1;for(;c--;)if(!j.equals(a[c],b[c]))return!1}else{var d=Object.keys(a),c=d.length;if(c!==Object.keys(b).length)return!1;for(;c--;){var e=d[c];if(!(b.hasOwnProperty(e)&&j.equals(a[e],b[e])))return!1}}return!0}return!1},read:function(a,b,c,d){if(this===j){var e=this.peek(a,b);return a.__index++,e}var f=this.prototype,h=f._readIndex,i=b||h&&a.__index||0,k=a.length,l=a[i];if(d=d||k-i,l instanceof this||c&&c.readNull&&null==l&&d<=1)return h&&(a.__index=i+1),l&&c&&c.clone?l.clone():l;if(l=j.create(f),h&&(l.__read=!0),l=l.initialize.apply(l,i>0||i+d<k?j.slice(a,i,i+d):a)||l,h){a.__index=i+l.__read;var m=l.__filtered;m&&(a.__filtered=m,l.__filtered=g),l.__read=g}return l},peek:function(a,b){return a[a.__index=b||a.__index||0]},remain:function(a){return a.length-(a.__index||0)},readList:function(a,b,c,d){for(var e,f=[],g=b||0,h=d?g+d:a.length,i=g;i<h;i++)f.push(Array.isArray(e=a[i])?this.read(e,0,c):this.read(a,i,c,1));return f},readNamed:function(a,b,c,d,e){var f=this.getNamed(a,b),h=f!==g;if(h){var i=a.__filtered;if(!i){var k=this.getSource(a);(i=a.__filtered=j.create(k)).__unfiltered=k}i[b]=g}return this.read(h?[f]:a,c,d,e)},readSupported:function(a,b){var c=this.getSource(a),d=this,e=!1;return c&&Object.keys(c).forEach(function(c){if(c in b){var f=d.readNamed(a,c);f!==g&&(b[c]=f),e=!0}}),e},getSource:function(a){var b=a.__source;if(b===g){var c=1===a.length&&a[0];b=a.__source=c&&j.isPlainObject(c)?c:null}return b},getNamed:function(a,b){var c=this.getSource(a);if(c)return b?c[b]:a.__filtered||c},hasNamed:function(a,b){return!!this.getNamed(a,b)},filter:function(a,b,c,d){function e(d){if(!(c&&d in c)&&!(f&&d in f)){var e=b[d];e!==g&&(a[d]=e)}}if(d){for(var f,h,i={},j=0,k=d.length;j<k;j++)(h=d[j])in b&&(e(h),i[h]=!0);f=i}return Object.keys(b.__unfiltered||b).forEach(e),a},isPlainValue:function(a,b){return j.isPlainObject(a)||Array.isArray(a)||b&&"string"==typeof a},serialize:function(a,b,c,d){b=b||{};var e,f=!d;if(f&&(b.formatter=new o(b.precision),d={length:0,definitions:{},references:{},add:function(a,b){var c="#"+a._id,d=this.references[c];if(!d){this.length++;var e=b.call(a),f=a._class;f&&e[0]!==f&&e.unshift(f),this.definitions[c]=e,d=this.references[c]=[c]}return d}}),a&&a._serialize){e=a._serialize(b,d);var g=a._class;g&&!a._compactSerialize&&(f||!c)&&e[0]!==g&&e.unshift(g)}else if(Array.isArray(a)){e=[];for(var h=0,i=a.length;h<i;h++)e[h]=j.serialize(a[h],b,c,d)}else if(j.isPlainObject(a)){e={};for(var k=Object.keys(a),h=0,i=k.length;h<i;h++){var l=k[h];e[l]=j.serialize(a[l],b,c,d)}}else e="number"==typeof a?b.formatter.number(a,b.precision):a;return f&&d.length>0?[["dictionary",d.definitions],e]:e},deserialize:function(a,b,c,d,e){var f=a,g=!c,h=g&&a&&a.length&&"dictionary"===a[0][0];if(c=c||{},Array.isArray(a)){var i=a[0],k="dictionary"===i;if(1==a.length&&/^#/.test(i))return c.dictionary[i];i=j.exports[i],f=[];for(var l=i?1:0,m=a.length;l<m;l++)f.push(j.deserialize(a[l],b,c,k,h));if(i){var n=f;f=b?b(i,n,g||e):new i(n)}}else if(j.isPlainObject(a))for(var o in f={},d&&(c.dictionary=f),a)f[o]=j.deserialize(a[o],b,c);return h?f[1]:f},exportJSON:function(a,b){var c=j.serialize(a,b);return b&& !1==b.asString?c:JSON.stringify(c)},importJSON:function(a,b){return j.deserialize("string"==typeof a?JSON.parse(a):a,function(a,c,d){var e=d&&b&&b.constructor===a,f=e?b:j.create(a.prototype);if(1===c.length&&f instanceof A&&(e||!(f instanceof C))){var g=c[0];j.isPlainObject(g)&&(g.insert=!1,e&&(c=c.concat([{insert:!0}])))}return(e?f.set:a).apply(f,c),e&&(b=null),f})},push:function(a,b){var c=b.length;if(c<4096)a.push.apply(a,b);else{var d=a.length;a.length+=c;for(var e=0;e<c;e++)a[d+e]=b[e]}return a},splice:function(a,b,c,d){var e=b&&b.length,f=c===g;(c=f?a.length:c)>a.length&&(c=a.length);for(var h=0;h<e;h++)b[h]._index=c+h;if(f)return j.push(a,b),[];var i=[c,d];b&&j.push(i,b);for(var k=a.splice.apply(a,i),h=0,l=k.length;h<l;h++)k[h]._index=g;for(var h=c+e,l=a.length;h<l;h++)a[h]._index=h;return k},capitalize:function(a){return a.replace(/\b[a-z]/g,function(a){return a.toUpperCase()})},camelize:function(a){return a.replace(/-(.)/g,function(a,b){return b.toUpperCase()})},hyphenate:function(a){return a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var k={on:function(a,b){if("string"!=typeof a)j.each(a,function(a,b){this.on(b,a)},this);else{var c=this._eventTypes,d=c&&c[a],e=this._callbacks=this._callbacks||{};-1===(e=e[a]=e[a]||[]).indexOf(b)&&(e.push(b),d&&d.install&&1===e.length&&d.install.call(this,a))}return this},off:function(a,b){if("string"!=typeof a){j.each(a,function(a,b){this.off(b,a)},this);return}var c,d=this._eventTypes,e=d&&d[a],f=this._callbacks&&this._callbacks[a];return f&&(b&&(-1===(c=f.indexOf(b))||1!==f.length)?-1!==c&&f.splice(c,1):(e&&e.uninstall&&e.uninstall.call(this,a),delete this._callbacks[a])),this},once:function(a,b){return this.on(a,function c(){b.apply(this,arguments),this.off(a,c)})},emit:function(a,b){var c=this._callbacks&&this._callbacks[a];if(!c)return!1;var d=j.slice(arguments,1),e=b&&b.target&&!b.currentTarget;c=c.slice(),e&&(b.currentTarget=this);for(var f=0,g=c.length;f<g;f++)if(!1==c[f].apply(this,d)){b&&b.stop&&b.stop();break}return e&&delete b.currentTarget,!0},responds:function(a){return!!(this._callbacks&&this._callbacks[a])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(a){var b=this._eventTypes,c=this._callbacks,d=a?"install":"uninstall";if(b){for(var e in c)if(c[e].length>0){var f=b[e],g=f&&f[d];g&&g.call(this,e)}}},statics:{inject:function a(b){var c=b._events;if(c){var d={};j.each(c,function(a,c){var e="string"==typeof a,f=e?a:c,g=j.capitalize(f),h=f.substring(2).toLowerCase();d[h]=e?{}:a,f="_"+f,b["get"+g]=function(){return this[f]},b["set"+g]=function(a){var b=this[f];b&&this.off(h,b),a&&this.on(h,a),this[f]=a}}),b._eventTypes=d}return a.base.apply(this,arguments)}}},l=j.extend({_class:"PaperScope",initialize:function a(){ak=this,this.settings=new j({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=a._id++,a._scopes[this._id]=this;var b=a.prototype;if(!this.support){var c=ag.getContext(1,1)||{};b.support={nativeDash:"setLineDash"in c||"mozDash"in c,nativeBlendModes:ah.nativeModes},ag.release(c)}if(!this.agent){var d=f.navigator.userAgent.toLowerCase(),e=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(d)||[])[0],g="darwin"===e?"mac":e,h=b.agent=b.browser={platform:g};g&&(h[g]=!0),d.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(a,b,c,d,e){if(!h.chrome){var f="opera"===b?d:/^(node|trident)$/.test(b)?e:c;h.version=f,h.versionNumber=parseFloat(f),b=({trident:"msie",jsdom:"node"})[b]||b,h.name=b,h[b]=!0}}),h.chrome&&delete h.webkit,h.atom&&delete h.chrome}},version:"0.12.15",getView:function(){var a=this.project;return a&&a._view},getPaper:function(){return this},execute:function(a,b){},install:function(a){var b=this;for(var c in j.each(["project","view","tool"],function(c){j.define(a,c,{configurable:!0,get:function(){return b[c]}})}),this)!/^_/.test(c)&&this[c]&&(a[c]=this[c])},setup:function(a){return ak=this,this.project=new z(a),this},createCanvas:function(a,b){return ag.getCanvas(a,b)},activate:function(){ak=this},clear:function(){for(var a=this.projects,b=this.tools,c=a.length-1;c>=0;c--)a[c].remove();for(var c=b.length-1;c>=0;c--)b[c].remove()},remove:function(){this.clear(),delete l._scopes[this._id]},statics:new function(){function a(a){return a+="Attribute",function(b,c){return b[a](c)||b[a]("data-paper-"+c)}}return{_scopes:{},_id:0,get:function(a){return this._scopes[a]||null},getAttribute:a("get"),hasAttribute:a("has")}}}),m=j.extend(k,{initialize:function(a){this._scope=ak,this._index=this._scope[this._list].push(this)-1,(a||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var a=this._scope[this._reference];return a&&a!==this&&a.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",a),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(j.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),n={findItemBoundsCollisions:function(a,b,c){function d(a){for(var b=Array(a.length),c=0;c<a.length;c++){var d=a[c].getBounds();b[c]=[d.left,d.top,d.right,d.bottom]}return b}var e=d(a),f=b&&b!==a?d(b):e;return this.findBoundsCollisions(e,f,c||0)},findCurveBoundsCollisions:function(a,b,c,d){function e(a){for(var b=Math.min,c=Math.max,d=Array(a.length),e=0;e<a.length;e++){var f=a[e];d[e]=[b(f[0],f[2],f[4],f[6]),b(f[1],f[3],f[5],f[7]),c(f[0],f[2],f[4],f[6]),c(f[1],f[3],f[5],f[7])]}return d}var f=e(a),g=b&&b!==a?e(b):f;if(d){for(var h=this.findBoundsCollisions(f,g,c||0,!1,!0),i=this.findBoundsCollisions(f,g,c||0,!0,!0),j=[],k=0,l=h.length;k<l;k++)j[k]={hor:h[k],ver:i[k]};return j}return this.findBoundsCollisions(f,g,c||0)},findBoundsCollisions:function(a,b,c,d,e){var f=!b||a===b,g=f?a:a.concat(b),h=a.length,i=g.length;function j(a,b,c){for(var d=0,e=a.length;d<e;){var f=e+d>>>1;g[a[f]][b]<c?d=f+1:e=f}return d-1}for(var k=d?1:0,l=k+2,m=d?0:1,n=m+2,o=Array(i),p=0;p<i;p++)o[p]=p;o.sort(function(a,b){return g[a][k]-g[b][k]});for(var q=[],r=Array(h),p=0;p<i;p++){var s=o[p],t=g[s],u=f?s:s-h,v=s<h,w=f||!v,x=v?[]:null;if(q.length){var y=j(q,l,t[k]-c)+1;if(q.splice(0,y),f&&e){x=x.concat(q);for(var z=0;z<q.length;z++){var A=q[z];r[A].push(u)}}else for(var B=t[n],C=t[m],z=0;z<q.length;z++){var A=q[z],D=g[A],E=A<h,F=f||A>=h;(e||(v&&F||w&&E)&&B>=D[m]-c&&C<=D[n]+c)&&(v&&F&&x.push(f?A:A-h),w&&E&&r[A].push(u))}}if(v&&(a===b&&x.push(s),r[s]=x),q.length){var G=t[l],H=j(q,l,G);q.splice(H+1,0,s)}else q.push(s)}for(var p=0;p<r.length;p++){var I=r[p];I&&I.sort(function(a,b){return a-b})}return r}},o=j.extend({initialize:function(a){this.precision=j.pick(a,5),this.multiplier=Math.pow(10,this.precision)},number:function(a){return this.precision<16?Math.round(a*this.multiplier)/this.multiplier:a},pair:function(a,b,c){return this.number(a)+(c||",")+this.number(b)},point:function(a,b){return this.number(a.x)+(b||",")+this.number(a.y)},size:function(a,b){return this.number(a.width)+(b||",")+this.number(a.height)},rectangle:function(a,b){return this.point(a,b)+(b||",")+this.size(a,b)}});o.instance=new o;var p=new function(){var a=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],b=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],c=Math.abs,d=Math.sqrt,e=Math.pow,f=Math.log2||function(a){return Math.log(a)*Math.LOG2E};function g(a,b,c){return a<b?b:a>c?c:a}function h(a,b,d){function e(a){var b=134217729*a,c=a-b+b;return[c,a-c]}var f=b*b-a*d;if(3*c(f)<b*b+a*d){var g=e(a),h=e(b),i=e(d),j=b*b,k=h[0]*h[0]-j+2*h[0]*h[1]+h[1]*h[1],l=a*d,m=g[0]*i[0]-l+g[0]*i[1]+g[1]*i[0]+g[1]*i[1];f=j-l+(k-m)}return f}function i(){var a=Math.max.apply(Math,arguments);return a&&(a<1e-8||a>1e8)?e(2,-Math.round(f(a))):0}return{EPSILON:1e-12,MACHINE_EPSILON:112e-18,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,KAPPA:4*(d(2)-1)/3,isZero:function(a){return a>= -.000000000001&&a<=1e-12},isMachineZero:function(a){return a>= -.000000000000000112&&a<=112e-18},clamp:g,integrate:function(c,d,e,f){for(var g=a[f-2],h=b[f-2],i=(e-d)*.5,j=i+d,k=0,l=f+1>>1,m=1&f?h[k++]*c(j):0;k<l;){var n=i*g[k];m+=h[k++]*(c(j+n)+c(j-n))}return i*m},findRoot:function(a,b,d,e,f,h,i){for(var j=0;j<h;j++){var k=a(d),l=k/b(d),m=d-l;if(c(l)<i){d=m;break}k>0?(f=d,d=m<=e?(e+f)*.5:m):(e=d,d=m>=f?(e+f)*.5:m)}return g(d,e,f)},solveQuadratic:function(a,b,e,f,j,k){var l,m=1/0;if(1e-12>c(a)){if(1e-12>c(b))return 1e-12>c(e)?-1:0;l=-e/b}else{var n=h(a,b*=-.5,e);if(n&&112e-18>c(n)){var o=i(c(a),c(b),c(e));o&&(a*=o,b*=o,e*=o,n=h(a,b,e))}if(n>= -.000000000000000112){var p=n<0?0:d(n),q=b+(b<0?-p:p);0===q?m=-(l=e/a):(l=q/a,m=e/q)}}var r=0,s=null==j,t=j-1e-12,u=k+1e-12;return isFinite(l)&&(s||l>t&&l<u)&&(f[r++]=s?l:g(l,j,k)),m!==l&&isFinite(m)&&(s||m>t&&m<u)&&(f[r++]=s?m:g(m,j,k)),r},solveCubic:function(a,b,f,h,j,k,l){var m,n,o,q,r,s=i(c(a),c(b),c(f),c(h));function t(c){var d=a*(m=c);o=(n=d+b)*m+f,q=(d+n)*m+o,r=o*m+h}if(s&&(a*=s,b*=s,f*=s,h*=s),1e-12>c(a))a=b,n=f,o=h,m=1/0;else if(1e-12>c(h))n=b,o=f,m=0;else{t(-(b/a)/3);var u=r/a,v=e(c(u),1/3),w=u<0?-1:1,x=-q/a,y=x>0?1.324717957244746*Math.max(v,d(x)):v,z=m-w*y;if(z!==m){do t(z),z=0===q?m:m-r/q/1.0000000000000002;while(w*z>w*m);c(a)*m*m>c(h/m)&&(n=((o=-h/m)-f)/m)}}var A=p.solveQuadratic(a,n,o,j,k,l),B=null==k;return isFinite(m)&&(0===A||A>0&&m!==j[0]&&m!==j[1])&&(B||m>k-1e-12&&m<l+1e-12)&&(j[A++]=B?m:g(m,k,l)),A}}},q={_id:1,_pools:{},get:function(a){if(!a)return this._id++;var b=this._pools[a];return b||(b=this._pools[a]={_id:1}),b._id++}},r=j.extend({_class:"Point",_readIndex:!0,initialize:function(a,b){var c=typeof a,d=this.__read,e=0;if("number"===c){var f="number"==typeof b;this._set(a,f?b:a),d&&(e=f?2:1)}else if("undefined"===c||null===a)this._set(0,0),d&&(e=null===a?1:0);else{var g="string"===c?a.split(/[\s,]+/)||[]:a;e=1,Array.isArray(g)?this._set(+g[0],+(g.length>1?g[1]:g[0])):"x"in g?this._set(g.x||0,g.y||0):"width"in g?this._set(g.width||0,g.height||0):"angle"in g?(this._set(g.length||0,0),this.setAngle(g.angle||0)):(this._set(0,0),e=0)}return d&&(this.__read=e),this},set:"#initialize",_set:function(a,b){return this.x=a,this.y=b,this},equals:function(a){return this===a||a&&(this.x===a.x&&this.y===a.y||Array.isArray(a)&&this.x===a[0]&&this.y===a[1])||!1},clone:function(){return new r(this.x,this.y)},toString:function(){var a=o.instance;return"{ x: "+a.number(this.x)+", y: "+a.number(this.y)+" }"},_serialize:function(a){var b=a.formatter;return[b.number(this.x),b.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(a){if(this.isZero()){var b=this._angle||0;this._set(Math.cos(b)*a,Math.sin(b)*a)}else{var c=a/this.getLength();p.isZero(c)&&this.getAngle(),this._set(this.x*c,this.y*c)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(a){this.setAngleInRadians.call(this,a*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(!arguments.length)return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x);var a=r.read(arguments),b=this.getLength()*a.getLength();if(p.isZero(b))return NaN;var c=this.dot(a)/b;return Math.acos(c< -1?-1:c>1?1:c)},setAngleInRadians:function(a){if(this._angle=a,!this.isZero()){var b=this.getLength();this._set(Math.cos(a)*b,Math.sin(a)*b)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var a=r.read(arguments);return 180*Math.atan2(this.cross(a),this.dot(a))/Math.PI},getDistance:function(){var a=arguments,b=r.read(a),c=b.x-this.x,d=b.y-this.y,e=c*c+d*d;return j.read(a)?e:Math.sqrt(e)},normalize:function(a){a===g&&(a=1);var b=this.getLength(),c=0!==b?a/b:0,d=new r(this.x*c,this.y*c);return c>=0&&(d._angle=this._angle),d},rotate:function(a,b){if(0===a)return this.clone();a=a*Math.PI/180;var c=b?this.subtract(b):this,d=Math.sin(a),e=Math.cos(a);return c=new r(c.x*e-c.y*d,c.x*d+c.y*e),b?c.add(b):c},transform:function(a){return a?a._transformPoint(this):this},add:function(){var a=r.read(arguments);return new r(this.x+a.x,this.y+a.y)},subtract:function(){var a=r.read(arguments);return new r(this.x-a.x,this.y-a.y)},multiply:function(){var a=r.read(arguments);return new r(this.x*a.x,this.y*a.y)},divide:function(){var a=r.read(arguments);return new r(this.x/a.x,this.y/a.y)},modulo:function(){var a=r.read(arguments);return new r(this.x%a.x,this.y%a.y)},negate:function(){return new r(-this.x,-this.y)},isInside:function(){return v.read(arguments).contains(this)},isClose:function(){var a=arguments,b=r.read(a),c=j.read(a);return this.getDistance(b)<=c},isCollinear:function(){var a=r.read(arguments);return r.isCollinear(this.x,this.y,a.x,a.y)},isColinear:"#isCollinear",isOrthogonal:function(){var a=r.read(arguments);return r.isOrthogonal(this.x,this.y,a.x,a.y)},isZero:function(){var a=p.isZero;return a(this.x)&&a(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(a){return this.x*(a>1&&a<4?-1:1)>=0&&this.y*(a>2?-1:1)>=0},dot:function(){var a=r.read(arguments);return this.x*a.x+this.y*a.y},cross:function(){var a=r.read(arguments);return this.x*a.y-this.y*a.x},project:function(){var a=r.read(arguments),b=a.isZero()?0:this.dot(a)/a.dot(a);return new r(a.x*b,a.y*b)},statics:{min:function(){var a=arguments,b=r.read(a),c=r.read(a);return new r(Math.min(b.x,c.x),Math.min(b.y,c.y))},max:function(){var a=arguments,b=r.read(a),c=r.read(a);return new r(Math.max(b.x,c.x),Math.max(b.y,c.y))},random:function(){return new r(Math.random(),Math.random())},isCollinear:function(a,b,c,d){return Math.abs(a*d-b*c)<=1e-8*Math.sqrt((a*a+b*b)*(c*c+d*d))},isOrthogonal:function(a,b,c,d){return Math.abs(a*c+b*d)<=1e-8*Math.sqrt((a*a+b*b)*(c*c+d*d))}}},j.each(["round","ceil","floor","abs"],function(a){var b=Math[a];this[a]=function(){return new r(b(this.x),b(this.y))}},{})),s=r.extend({initialize:function(a,b,c,d){this._x=a,this._y=b,this._owner=c,this._setter=d},_set:function(a,b,c){return this._x=a,this._y=b,c||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(a){this._x=a,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(a){this._y=a,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(a){this._owner._changeSelection(this._getSelection(),a)},_getSelection:function(){return"setPosition"===this._setter?4:0}}),t=j.extend({_class:"Size",_readIndex:!0,initialize:function(a,b){var c=typeof a,d=this.__read,e=0;if("number"===c){var f="number"==typeof b;this._set(a,f?b:a),d&&(e=f?2:1)}else if("undefined"===c||null===a)this._set(0,0),d&&(e=null===a?1:0);else{var g="string"===c?a.split(/[\s,]+/)||[]:a;e=1,Array.isArray(g)?this._set(+g[0],+(g.length>1?g[1]:g[0])):"width"in g?this._set(g.width||0,g.height||0):"x"in g?this._set(g.x||0,g.y||0):(this._set(0,0),e=0)}return d&&(this.__read=e),this},set:"#initialize",_set:function(a,b){return this.width=a,this.height=b,this},equals:function(a){return a===this||a&&(this.width===a.width&&this.height===a.height||Array.isArray(a)&&this.width===a[0]&&this.height===a[1])||!1},clone:function(){return new t(this.width,this.height)},toString:function(){var a=o.instance;return"{ width: "+a.number(this.width)+", height: "+a.number(this.height)+" }"},_serialize:function(a){var b=a.formatter;return[b.number(this.width),b.number(this.height)]},add:function(){var a=t.read(arguments);return new t(this.width+a.width,this.height+a.height)},subtract:function(){var a=t.read(arguments);return new t(this.width-a.width,this.height-a.height)},multiply:function(){var a=t.read(arguments);return new t(this.width*a.width,this.height*a.height)},divide:function(){var a=t.read(arguments);return new t(this.width/a.width,this.height/a.height)},modulo:function(){var a=t.read(arguments);return new t(this.width%a.width,this.height%a.height)},negate:function(){return new t(-this.width,-this.height)},isZero:function(){var a=p.isZero;return a(this.width)&&a(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(a,b){return new t(Math.min(a.width,b.width),Math.min(a.height,b.height))},max:function(a,b){return new t(Math.max(a.width,b.width),Math.max(a.height,b.height))},random:function(){return new t(Math.random(),Math.random())}}},j.each(["round","ceil","floor","abs"],function(a){var b=Math[a];this[a]=function(){return new t(b(this.width),b(this.height))}},{})),u=t.extend({initialize:function(a,b,c,d){this._width=a,this._height=b,this._owner=c,this._setter=d},_set:function(a,b,c){return this._width=a,this._height=b,c||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(a){this._width=a,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(a){this._height=a,this._owner[this._setter](this)}}),v=j.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(a,b,c,d){var e,f=arguments,h=typeof a;if("number"===h?(this._set(a,b,c,d),e=4):"undefined"===h||null===a?(this._set(0,0,0,0),e=null===a?1:0):1===f.length&&(Array.isArray(a)?(this._set.apply(this,a),e=1):g!==a.x||g!==a.width?(this._set(a.x||0,a.y||0,a.width||0,a.height||0),e=1):g===a.from&&g===a.to&&(this._set(0,0,0,0),j.readSupported(f,this)&&(e=1))),e===g){var i,k,l=r.readNamed(f,"from"),m=j.peek(f),n=l.x,o=l.y;if(m&&g!==m.x||j.hasNamed(f,"to")){var p=r.readNamed(f,"to");i=p.x-n,k=p.y-o,i<0&&(n=p.x,i=-i),k<0&&(o=p.y,k=-k)}else{var q=t.read(f);i=q.width,k=q.height}this._set(n,o,i,k),e=f.__index}var s=f.__filtered;return s&&(this.__filtered=s),this.__read&&(this.__read=e),this},set:"#initialize",_set:function(a,b,c,d){return this.x=a,this.y=b,this.width=c,this.height=d,this},clone:function(){return new v(this.x,this.y,this.width,this.height)},equals:function(a){var b=j.isPlainValue(a)?v.read(arguments):a;return b===this||b&&this.x===b.x&&this.y===b.y&&this.width===b.width&&this.height===b.height||!1},toString:function(){var a=o.instance;return"{ x: "+a.number(this.x)+", y: "+a.number(this.y)+", width: "+a.number(this.width)+", height: "+a.number(this.height)+" }"},_serialize:function(a){var b=a.formatter;return[b.number(this.x),b.number(this.y),b.number(this.width),b.number(this.height)]},getPoint:function(a){return new(a?r:s)(this.x,this.y,this,"setPoint")},setPoint:function(){var a=r.read(arguments);this.x=a.x,this.y=a.y},getSize:function(a){return new(a?t:u)(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var a=t.read(arguments),b=this._sx,c=this._sy,d=a.width,e=a.height;b&&(this.x+=(this.width-d)*b),c&&(this.y+=(this.height-e)*c),this.width=d,this.height=e,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(a){if(!this._fw){var b=a-this.x;this.width-=.5===this._sx?2*b:b}this.x=a,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(a){if(!this._fh){var b=a-this.y;this.height-=.5===this._sy?2*b:b}this.y=a,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(a){if(!this._fw){var b=a-this.x;this.width=.5===this._sx?2*b:b}this.x=a-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(a){if(!this._fh){var b=a-this.y;this.height=.5===this._sy?2*b:b}this.y=a-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(a){this._fw||.5===this._sx?this.x=a-this.width/2:(this._sx&&(this.x+=(a-this.x)*2*this._sx),this.width=(a-this.x)*2),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(a){this._fh||.5===this._sy?this.y=a-this.height/2:(this._sy&&(this.y+=(a-this.y)*2*this._sy),this.height=(a-this.y)*2),this._sy=.5,this._fh=0},getCenter:function(a){return new(a?r:s)(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var a=r.read(arguments);return this.setCenterX(a.x),this.setCenterY(a.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(a){return a&&g!==a.width||4===(Array.isArray(a)?a:arguments).length?this._containsRectangle(v.read(arguments)):this._containsPoint(r.read(arguments))},_containsPoint:function(a){var b=a.x,c=a.y;return b>=this.x&&c>=this.y&&b<=this.x+this.width&&c<=this.y+this.height},_containsRectangle:function(a){var b=a.x,c=a.y;return b>=this.x&&c>=this.y&&b+a.width<=this.x+this.width&&c+a.height<=this.y+this.height},intersects:function(){var a=v.read(arguments),b=j.read(arguments)||0;return a.x+a.width>this.x-b&&a.y+a.height>this.y-b&&a.x<this.x+this.width+b&&a.y<this.y+this.height+b},intersect:function(){var a=v.read(arguments),b=Math.max(this.x,a.x),c=Math.max(this.y,a.y),d=Math.min(this.x+this.width,a.x+a.width),e=Math.min(this.y+this.height,a.y+a.height);return new v(b,c,d-b,e-c)},unite:function(){var a=v.read(arguments),b=Math.min(this.x,a.x),c=Math.min(this.y,a.y),d=Math.max(this.x+this.width,a.x+a.width),e=Math.max(this.y+this.height,a.y+a.height);return new v(b,c,d-b,e-c)},include:function(){var a=r.read(arguments),b=Math.min(this.x,a.x),c=Math.min(this.y,a.y),d=Math.max(this.x+this.width,a.x),e=Math.max(this.y+this.height,a.y);return new v(b,c,d-b,e-c)},expand:function(){var a=t.read(arguments),b=a.width,c=a.height;return new v(this.x-b/2,this.y-c/2,this.width+b,this.height+c)},scale:function(a,b){return this.expand(this.width*a-this.width,this.height*(b===g?a:b)-this.height)}},j.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(a,b){var c=a.join(""),d=/^[RL]/.test(c);b>=4&&(a[1]+=d?"Y":"X");var e=a[d?0:1],f=a[d?1:0],g="get"+e,h="get"+f,i="set"+e,j="set"+f,k="get"+c,l="set"+c;this[k]=function(a){return new(a?r:s)(this[g](),this[h](),this,l)},this[l]=function(){var a=r.read(arguments);this[i](a.x),this[j](a.y)}},{beans:!0})),w=v.extend({initialize:function(a,b,c,d,e,f){this._set(a,b,c,d,!0),this._owner=e,this._setter=f},_set:function(a,b,c,d,e){return this._x=a,this._y=b,this._width=c,this._height=d,e||this._owner[this._setter](this),this}},new function(){var a=v.prototype;return j.each(["x","y","width","height"],function(a){var b=j.capitalize(a),c="_"+a;this["get"+b]=function(){return this[c]},this["set"+b]=function(a){this[c]=a,this._dontNotify||this._owner[this._setter](this)}},j.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(b){var c="set"+b;this[c]=function(){this._dontNotify=!0,a[c].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(2&this._owner._selection)},setSelected:function(a){var b=this._owner;b._changeSelection&&b._changeSelection(2,a)}}))}),x=j.extend({_class:"Matrix",initialize:function a(b,c){var d=arguments,e=d.length,f=!0;if(e>=6?this._set.apply(this,d):1===e||2===e?b instanceof a?this._set(b._a,b._b,b._c,b._d,b._tx,b._ty,c):Array.isArray(b)?this._set.apply(this,c?b.concat([c]):b):f=!1:e?f=!1:this.reset(),!f)throw Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(a,b,c,d,e,f,g){return this._a=a,this._b=b,this._c=c,this._d=d,this._tx=e,this._ty=f,g||this._changed(),this},_serialize:function(a,b){return j.serialize(this.getValues(),a,!0,b)},_changed:function(){var a=this._owner;a&&(a._applyMatrix?a.transform(null,!0):a._changed(25))},clone:function(){return new x(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(a){return a===this||a&&this._a===a._a&&this._b===a._b&&this._c===a._c&&this._d===a._d&&this._tx===a._tx&&this._ty===a._ty},toString:function(){var a=o.instance;return"[["+[a.number(this._a),a.number(this._c),a.number(this._tx)].join(", ")+"], ["+[a.number(this._b),a.number(this._d),a.number(this._ty)].join(", ")+"]]"},reset:function(a){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,a||this._changed(),this},apply:function(a,b){var c=this._owner;return!!c&&(c.transform(null,j.pick(a,!0),b),this.isIdentity())},translate:function(){var a=r.read(arguments),b=a.x,c=a.y;return this._tx+=b*this._a+c*this._c,this._ty+=b*this._b+c*this._d,this._changed(),this},scale:function(){var a=arguments,b=r.read(a),c=r.read(a,0,{readNull:!0});return c&&this.translate(c),this._a*=b.x,this._b*=b.x,this._c*=b.y,this._d*=b.y,c&&this.translate(c.negate()),this._changed(),this},rotate:function(a){a*=Math.PI/180;var b=r.read(arguments,1),c=b.x,d=b.y,e=Math.cos(a),f=Math.sin(a),g=c-c*e+d*f,h=d-c*f-d*e,i=this._a,j=this._b,k=this._c,l=this._d;return this._a=e*i+f*k,this._b=e*j+f*l,this._c=-f*i+e*k,this._d=-f*j+e*l,this._tx+=g*i+h*k,this._ty+=g*j+h*l,this._changed(),this},shear:function(){var a=arguments,b=r.read(a),c=r.read(a,0,{readNull:!0});c&&this.translate(c);var d=this._a,e=this._b;return this._a+=b.y*this._c,this._b+=b.y*this._d,this._c+=b.x*d,this._d+=b.x*e,c&&this.translate(c.negate()),this._changed(),this},skew:function(){var a=arguments,b=r.read(a),c=r.read(a,0,{readNull:!0}),d=Math.PI/180,e=new r(Math.tan(b.x*d),Math.tan(b.y*d));return this.shear(e,c)},append:function(a,b){if(a){var c=this._a,d=this._b,e=this._c,f=this._d,g=a._a,h=a._c,i=a._b,j=a._d,k=a._tx,l=a._ty;this._a=g*c+i*e,this._c=h*c+j*e,this._b=g*d+i*f,this._d=h*d+j*f,this._tx+=k*c+l*e,this._ty+=k*d+l*f,b||this._changed()}return this},prepend:function(a,b){if(a){var c=this._a,d=this._b,e=this._c,f=this._d,g=this._tx,h=this._ty,i=a._a,j=a._c,k=a._b,l=a._d,m=a._tx,n=a._ty;this._a=i*c+j*d,this._c=i*e+j*f,this._b=k*c+l*d,this._d=k*e+l*f,this._tx=i*g+j*h+m,this._ty=k*g+l*h+n,b||this._changed()}return this},appended:function(a){return this.clone().append(a)},prepended:function(a){return this.clone().prepend(a)},invert:function(){var a=this._a,b=this._b,c=this._c,d=this._d,e=this._tx,f=this._ty,g=a*d-b*c,h=null;return g&&!isNaN(g)&&isFinite(e)&&isFinite(f)&&(this._a=d/g,this._b=-b/g,this._c=-c/g,this._d=a/g,this._tx=(c*f-d*e)/g,this._ty=(b*e-a*f)/g,h=this),h},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new x(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},isInvertible:function(){var a=this._a*this._d-this._c*this._b;return a&&!isNaN(a)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(a,b,c){return arguments.length<3?this._transformPoint(r.read(arguments)):this._transformCoordinates(a,b,c)},_transformPoint:function(a,b,c){var d=a.x,e=a.y;return b||(b=new r),b._set(d*this._a+e*this._c+this._tx,d*this._b+e*this._d+this._ty,c)},_transformCoordinates:function(a,b,c){for(var d=0,e=2*c;d<e;d+=2){var f=a[d],g=a[d+1];b[d]=f*this._a+g*this._c+this._tx,b[d+1]=f*this._b+g*this._d+this._ty}return b},_transformCorners:function(a){var b=a.x,c=a.y,d=b+a.width,e=c+a.height,f=[b,c,d,c,d,e,b,e];return this._transformCoordinates(f,f,4)},_transformBounds:function(a,b,c){for(var d=this._transformCorners(a),e=d.slice(0,2),f=e.slice(),g=2;g<8;g++){var h=d[g],i=1&g;h<e[i]?e[i]=h:h>f[i]&&(f[i]=h)}return b||(b=new v),b._set(e[0],e[1],f[0]-e[0],f[1]-e[1],c)},inverseTransform:function(){return this._inverseTransform(r.read(arguments))},_inverseTransform:function(a,b,c){var d=this._a,e=this._b,f=this._c,g=this._d,h=this._tx,i=this._ty,j=d*g-e*f,k=null;if(j&&!isNaN(j)&&isFinite(h)&&isFinite(i)){var l=a.x-this._tx,m=a.y-this._ty;b||(b=new r),k=b._set((l*g-m*f)/j,(m*d-l*e)/j,c)}return k},decompose:function(){var a,b,c,d=this._a,e=this._b,f=this._c,g=this._d,h=d*g-e*f,i=Math.sqrt,j=Math.atan2,k=180/Math.PI;if(0!==d||0!==e){var l=i(d*d+e*e);a=Math.acos(d/l)*(e>0?1:-1),b=[l,h/l],c=[j(d*f+e*g,l*l),0]}else if(0!==f||0!==g){var m=i(f*f+g*g);a=Math.asin(f/m)*(g>0?1:-1),b=[h/m,m],c=[0,j(d*f+e*g,m*m)]}else a=0,c=b=[0,0];return{translation:this.getTranslation(),rotation:a*k,scaling:new r(b),skewing:new r(c[0]*k,c[1]*k)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new r(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(a){this.isIdentity()||a.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},j.each(["a","b","c","d","tx","ty"],function(a){var b=j.capitalize(a),c="_"+a;this["get"+b]=function(){return this[c]},this["set"+b]=function(a){this[c]=a,this._changed()}},{})),y=j.extend({_class:"Line",initialize:function(a,b,c,d,e){var f=!1;arguments.length>=4?(this._px=a,this._py=b,this._vx=c,this._vy=d,f=e):(this._px=a.x,this._py=a.y,this._vx=b.x,this._vy=b.y,f=c),f||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new r(this._px,this._py)},getVector:function(){return new r(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(a,b){return y.intersect(this._px,this._py,this._vx,this._vy,a._px,a._py,a._vx,a._vy,!0,b)},getSide:function(a,b){return y.getSide(this._px,this._py,this._vx,this._vy,a.x,a.y,!0,b)},getDistance:function(a){return Math.abs(this.getSignedDistance(a))},getSignedDistance:function(a){return y.getSignedDistance(this._px,this._py,this._vx,this._vy,a.x,a.y,!0)},isCollinear:function(a){return r.isCollinear(this._vx,this._vy,a._vx,a._vy)},isOrthogonal:function(a){return r.isOrthogonal(this._vx,this._vy,a._vx,a._vy)},statics:{intersect:function(a,b,c,d,e,f,g,h,i,j){i||(c-=a,d-=b,g-=e,h-=f);var k=c*h-d*g;if(!p.isMachineZero(k)){var l=a-e,m=b-f,n=(g*m-h*l)/k,o=(c*m-d*l)/k,q=1e-12,s=-q,t=1+q;if(j||s<n&&n<t&&s<o&&o<t)return j||(n=n<=0?0:n>=1?1:n),new r(a+n*c,b+n*d)}},getSide:function(a,b,c,d,e,f,g,h){g||(c-=a,d-=b);var i=e-a,j=i*d-(f-b)*c;return!h&&p.isMachineZero(j)&&(j=(i*c+i*c)/(c*c+d*d))>=0&&j<=1&&(j=0),j<0?-1:j>0?1:0},getSignedDistance:function(a,b,c,d,e,f,g){return g||(c-=a,d-=b),0===c?d>0?e-a:a-e:0===d?c<0?f-b:b-f:((e-a)*d-(f-b)*c)/(d>c?d*Math.sqrt(1+c*c/(d*d)):c*Math.sqrt(1+d*d/(c*c)))},getDistance:function(a,b,c,d,e,f,g){return Math.abs(y.getSignedDistance(a,b,c,d,e,f,g))}}}),z=m.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(a){m.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new W(null,null,this),this._view=Z.create(this,a||ag.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(a,b){return j.serialize(this._children,a,!0,b)},_changed:function(a,b){if(1&a){var c=this._view;c&&(c._needsUpdate=!0,!c._requested&&c._autoUpdate&&c.requestUpdate())}var d=this._changes;if(d&&b){var e=this._changesById,f=b._id,g=e[f];g?g.flags|=a:d.push(e[f]={item:b,flags:a})}},clear:function(){for(var a=this._children,b=a.length-1;b>=0;b--)a[b].remove()},isEmpty:function(){return!this._children.length},remove:function a(){return!!a.base.call(this)&&(this._view&&this._view.remove(),!0)},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(a){this._currentStyle.set(a)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new C({project:this,insert:!0})},getSymbolDefinitions:function(){var a=[],b={};return this.getItems({class:F,match:function(c){var d=c._definition,e=d._id;return b[e]||(b[e]=!0,a.push(d)),!1}}),a},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var a=this._selectionItems,b=[];for(var c in a){var d=a[c],e=d._selection;1&e&&d.isInserted()?b.push(d):e||this._updateSelection(d)}return b},_updateSelection:function(a){var b=a._id,c=this._selectionItems;a._selection?c[b]!==a&&(this._selectionCount++,c[b]=a):c[b]===a&&(this._selectionCount--,delete c[b])},selectAll:function(){for(var a=this._children,b=0,c=a.length;b<c;b++)a[b].setFullySelected(!0)},deselectAll:function(){var a=this._selectionItems;for(var b in a)a[b].setFullySelected(!1)},addLayer:function(a){return this.insertLayer(g,a)},insertLayer:function(a,b){if(b instanceof C){b._remove(!1,!0),j.splice(this._children,[b],a,0),b._setProject(this,!0);var c=b._name;c&&b.setName(c),this._changes&&b._changed(5),this._activeLayer||(this._activeLayer=b)}else b=null;return b},_insertItem:function(a,b,c){return b=this.insertLayer(a,b)||(this._activeLayer||this._insertItem(g,new C(A.NO_INSERT),!0)).insertChild(a,b),c&&b.activate&&b.activate(),b},getItems:function(a){return A._getItems(this,a)},getItem:function(a){return A._getItems(this,a,null,null,!0)[0]||null},importJSON:function(a){this.activate();var b=this._activeLayer;return j.importJSON(a,b&&b.isEmpty()&&b)},removeOn:function(a){var b=this._removeSets;if(b){"mouseup"===a&&(b.mousedrag=null);var c=b[a];if(c){for(var d in c){var e=c[d];for(var f in b){var g=b[f];g&&g!=c&&delete g[e._id]}e.remove()}b[a]=null}}},draw:function(a,b,c){this._updateVersion++,a.save(),b.applyToContext(a);for(var d=this._children,e=new j({offset:new r(0,0),pixelRatio:c,viewMatrix:b.isIdentity()?null:b,matrices:[new x],updateMatrix:!0}),f=0,g=d.length;f<g;f++)d[f].draw(a,e);if(a.restore(),this._selectionCount>0){a.save(),a.strokeWidth=1;var h=this._selectionItems,i=this._scope.settings.handleSize,k=this._updateVersion;for(var l in h)h[l]._drawSelection(a,b,i,h,k);a.restore()}}}),A=j.extend(k,{statics:{extend:function a(b){return b._serializeFields&&(b._serializeFields=j.set({},this.prototype._serializeFields,b._serializeFields)),a.base.apply(this,arguments)},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new x,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var a=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return j.each(a,function(a){this._events[a]={install:function(a){this.getView()._countItemEvent(a,1)},uninstall:function(a){this.getView()._countItemEvent(a,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:a}})},{initialize:function(){},_initialize:function(a,b){var c=a&&j.isPlainObject(a),d=c&& !0===a.internal,e=this._matrix=new x,f=c&&a.project||ak.project,h=ak.settings;return this._id=d?null:q.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&h.applyMatrix,b&&e.translate(b),e._owner=this,this._style=new W(f._currentStyle,this,f),d||c&& !1==a.insert|| !h.insertItems&&!(c&& !0===a.insert)?this._setProject(f):(c&&a.parent||f)._insertItem(g,this,!0),c&&a!==A.NO_INSERT&&this.set(a,{internal:!0,insert:!0,project:!0,parent:!0}),c},_serialize:function(a,b){var c={},d=this;function e(e){for(var f in e){var g=d[f];j.equals(g,"leading"===f?1.2*e.fontSize:e[f])||(c[f]=j.serialize(g,a,"data"!==f,b))}}return e(this._serializeFields),this instanceof B||e(this._style._defaults),[this._class,c]},_changed:function(a){var b=this._symbol,c=this._parent||b,d=this._project;8&a&&(this._bounds=this._position=this._decomposed=g),16&a&&(this._globalMatrix=g),c&&72&a&&A._clearBoundsCache(c),2&a&&A._clearBoundsCache(this),d&&d._changed(a,this),b&&b._changed(a)},getId:function(){return this._id},getName:function(){return this._name},setName:function(a){if(this._name&&this._removeNamed(),a=== +a+"")throw Error("Names consisting only of numbers are not supported.");var b=this._getOwner();if(a&&b){var c=b._children,d=b._namedChildren;(d[a]=d[a]||[]).push(this),a in c||(c[a]=this)}this._name=a||g,this._changed(256)},getStyle:function(){return this._style},setStyle:function(a){this.getStyle().set(a)}},j.each(["locked","visible","blendMode","opacity","guide"],function(a){var b=j.capitalize(a),c="_"+a,d={locked:256,visible:265};this["get"+b]=function(){return this[c]},this["set"+b]=function(b){b!=this[c]&&(this[c]=b,this._changed(d[a]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(a){if(a!==this._selection){this._selection=a;var b=this._project;b&&(b._updateSelection(this),this._changed(257))}},_changeSelection:function(a,b){var c=this._selection;this.setSelection(b?c|a:c& ~a)},isSelected:function(){if(this._selectChildren){for(var a=this._children,b=0,c=a.length;b<c;b++)if(a[b].isSelected())return!0}return!!(1&this._selection)},setSelected:function(a){if(this._selectChildren)for(var b=this._children,c=0,d=b.length;c<d;c++)b[c].setSelected(a);this._changeSelection(1,a)},isFullySelected:function(){var a=this._children,b=!!(1&this._selection);if(a&&b){for(var c=0,d=a.length;c<d;c++)if(!a[c].isFullySelected())return!1;return!0}return b},setFullySelected:function(a){var b=this._children;if(b)for(var c=0,d=b.length;c<d;c++)b[c].setFullySelected(a);this._changeSelection(1,a)},isClipMask:function(){return this._clipMask},setClipMask:function(a){this._clipMask!=(a=!!a)&&(this._clipMask=a,a&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(a){this._data=a},getPosition:function(a){var b=this._position||(this._position=this._getPositionFromBounds());return new(a?r:s)(b.x,b.y,this,"setPosition")},setPosition:function(){this.translate(r.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(a){return this._pivot?this._matrix._transformPoint(this._pivot):(a||this.getBounds()).getCenter(!0)},getPivot:function(){var a=this._pivot;return a?new s(a.x,a.y,this,"setPivot"):null},setPivot:function(){this._pivot=r.read(arguments,0,{clone:!0,readNull:!0}),this._position=g}},j.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(a,b){this[b]=function(b){return this.getBounds(b,a)}},{beans:!0,getBounds:function(a,b){var c=b||a instanceof x,d=j.set({},c?b:a,this._boundsOptions);(!d.stroke||this.getStrokeScaling())&&(d.cacheItem=this);var e=this._getCachedBounds(c&&a,d).rect;return arguments.length?e:new w(e.x,e.y,e.width,e.height,this,"setBounds")},setBounds:function(){var a=v.read(arguments),b=this.getBounds(),c=this._matrix,d=new x,e=a.getCenter();d.translate(e),(a.width!=b.width||a.height!=b.height)&&(c.isInvertible()||(c.set(c._backup||new x().translate(c.getTranslation())),b=this.getBounds()),d.scale(0!==b.width?a.width/b.width:0,0!==b.height?a.height/b.height:0)),e=b.getCenter(),d.translate(-e.x,-e.y),this.transform(d)},_getBounds:function(a,b){var c=this._children;return c&&c.length?(A._updateBoundsCache(this,b.cacheItem),A._getBounds(c,a,b)):new v},_getBoundsCacheKey:function(a,b){return[a.stroke?1:0,a.handle?1:0,b?1:0].join("")},_getCachedBounds:function(a,b,c){a=a&&a._orNullIfIdentity();var d=b.internal&&!c,e=b.cacheItem,f=d?null:this._matrix._orNullIfIdentity(),g=e&&(!a||a.equals(f))&&this._getBoundsCacheKey(b,d),h=this._bounds;if(A._updateBoundsCache(this._parent||this._symbol,e),g&&h&&g in h){var i=h[g];return{rect:i.rect.clone(),nonscaling:i.nonscaling}}var j=this._getBounds(a||f,b),k=j.rect||j,l=this._style,m=j.nonscaling||l.hasStroke()&&!l.getStrokeScaling();if(g){h||(this._bounds=h={});var i=h[g]={rect:k.clone(),nonscaling:m,internal:d}}return{rect:k,nonscaling:m}},_getStrokeMatrix:function(a,b){var c=this.getStrokeScaling()?null:b&&b.internal?this:this._parent||this._symbol&&this._symbol._item,d=c?c.getViewMatrix().invert():a;return d&&d._shiftless()},statics:{_updateBoundsCache:function(a,b){if(a&&b){var c=b._id,d=a._boundsCache=a._boundsCache||{ids:{},list:[]};d.ids[c]||(d.list.push(b),d.ids[c]=b)}},_clearBoundsCache:function(a){var b=a._boundsCache;if(b){a._bounds=a._position=a._boundsCache=g;for(var c=0,d=b.list,e=d.length;c<e;c++){var f=d[c];f!==a&&(f._bounds=f._position=g,f._boundsCache&&A._clearBoundsCache(f))}}},_getBounds:function(a,b,c){var d=1/0,e=-d,f=d,g=e,h=!1;c=c||{};for(var i=0,j=a.length;i<j;i++){var k=a[i];if(k._visible&&!k.isEmpty(!0)){var l=k._getCachedBounds(b&&b.appended(k._matrix),c,!0),m=l.rect;d=Math.min(m.x,d),f=Math.min(m.y,f),e=Math.max(m.x+m.width,e),g=Math.max(m.y+m.height,g),l.nonscaling&&(h=!0)}}return{rect:isFinite(d)?new v(d,f,e-d,g-f):new v,nonscaling:h}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var a=this._decompose();return a?a.rotation:0},setRotation:function(a){var b=this.getRotation();if(null!=b&&null!=a){var c=this._decomposed;this.rotate(a-b),c&&(c.rotation=a,this._decomposed=c)}},getScaling:function(){var a=this._decompose(),b=a&&a.scaling;return new s(b?b.x:1,b?b.y:1,this,"setScaling")},setScaling:function(){var a=this.getScaling(),b=r.read(arguments,0,{clone:!0,readNull:!0});if(a&&b&&!a.equals(b)){var c=this.getRotation(),d=this._decomposed,e=new x,f=p.isZero;if(f(a.x)||f(a.y))e.translate(d.translation),c&&e.rotate(c),e.scale(b.x,b.y),this._matrix.set(e);else{var g=this.getPosition(!0);e.translate(g),c&&e.rotate(c),e.scale(b.x/a.x,b.y/a.y),c&&e.rotate(-c),e.translate(g.negate()),this.transform(e)}d&&(d.scaling=b,this._decomposed=d)}},getMatrix:function(){return this._matrix},setMatrix:function(){var a=this._matrix;a.set.apply(a,arguments)},getGlobalMatrix:function(a){var b=this._globalMatrix;if(b)for(var c=this._parent,d=[];c;){if(!c._globalMatrix){b=null;for(var e=0,f=d.length;e<f;e++)d[e]._globalMatrix=null;break}d.push(c),c=c._parent}if(!b){b=this._globalMatrix=this._matrix.clone();var c=this._parent;c&&b.prepend(c.getGlobalMatrix(!0))}return a?b:b.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(a){(this._applyMatrix=this._canApplyMatrix&&!!a)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(a,b){if(this._project!==a){this._project&&this._installEvents(!1),this._project=a;for(var c=this._children,d=0,e=c&&c.length;d<e;d++)c[d]._setProject(a);b=!0}b&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function a(b){a.base.call(this,b);for(var c=this._children,d=0,e=c&&c.length;d<e;d++)c[d]._installEvents(b)},getLayer:function(){for(var a=this;a=a._parent;)if(a instanceof C)return a;return null},getParent:function(){return this._parent},setParent:function(a){return a.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(a){this.removeChildren(),this.addChildren(a)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var a=this._getOwner();return a&&a._children[this._index+1]||null},getPreviousSibling:function(){var a=this._getOwner();return a&&a._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(a){return a===this||a&&this._class===a._class&&this._style.equals(a._style)&&this._matrix.equals(a._matrix)&&this._locked===a._locked&&this._visible===a._visible&&this._blendMode===a._blendMode&&this._opacity===a._opacity&&this._clipMask===a._clipMask&&this._guide===a._guide&&this._equals(a)||!1},_equals:function(a){return j.equals(this._children,a._children)},clone:function(a){var b=new this.constructor(A.NO_INSERT),c=this._children,d=j.pick(a?a.insert:g,a===g|| !0===a),e=j.pick(a?a.deep:g,!0);c&&b.copyAttributes(this),(!c||e)&&b.copyContent(this),c||b.copyAttributes(this),d&&b.insertAbove(this);var f=this._name,h=this._parent;if(f&&h){for(var c=h._children,i=f,k=1;c[f];)f=i+" "+k++;f!==i&&b.setName(f)}return b},copyContent:function(a){for(var b=a._children,c=0,d=b&&b.length;c<d;c++)this.addChild(b[c].clone(!1),!0)},copyAttributes:function(a,b){this.setStyle(a._style);for(var c=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],d=0,e=c.length;d<e;d++){var f=c[d];a.hasOwnProperty(f)&&(this[f]=a[f])}b||this._matrix.set(a._matrix,!0),this.setApplyMatrix(a._applyMatrix),this.setPivot(a._pivot),this.setSelection(a._selection);var g=a._data,h=a._name;this._data=g?j.clone(g):null,h&&this.setName(h)},rasterize:function(a,b){j.isPlainObject(a)?(c=a.resolution,d=a.insert,e=a.raster):(c=a,d=b),e?e.matrix.reset(!0):e=new E(A.NO_INSERT);var c,d,e,f=this.getStrokeBounds(),h=(c||this.getView().getResolution())/72,i=f.getTopLeft().floor(),k=f.getBottomRight().ceil(),l=new t(k.subtract(i)),m=l.multiply(h);if(e.setSize(m,!0),!m.isZero()){var n=e.getContext(!0),o=new x().scale(h).translate(i.negate());n.save(),o.applyToContext(n),this.draw(n,new j({matrices:[o]})),n.restore()}return e.transform(new x().translate(i.add(l.divide(2))).scale(1/h)),(d===g||d)&&e.insertAbove(this),e},contains:function(){var a=this._matrix;return a.isInvertible()&&!!this._contains(a._inverseTransform(r.read(arguments)))},_contains:function(a){var b=this._children;if(b){for(var c=b.length-1;c>=0;c--)if(b[c].contains(a))return!0;return!1}return a.isInside(this.getInternalBounds())},isInside:function(){return v.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new N.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(a,b){return a instanceof A&&this._asPathItem().getIntersections(a._asPathItem(),null,b,!0).length>0}},new function(){function a(){var a=arguments;return this._hitTest(r.read(a),H.getOptions(a))}function b(){var a=arguments,b=r.read(a),c=H.getOptions(a),d=[];return this._hitTest(b,new j({all:d},c)),d}function c(a,b,c,d){var e=this._children;if(e)for(var f=e.length-1;f>=0;f--){var g=e[f],h=g!==d&&g._hitTest(a,b,c);if(h&&!b.all)return h}return null}return z.inject({hitTest:a,hitTestAll:b,_hitTest:c}),{hitTest:a,hitTestAll:b,_hitTestChildren:c}},{_hitTest:function(a,b,c){if(this._locked||!this._visible||this._guide&&!b.guides||this.isEmpty())return null;var d=this._matrix,e=c?c.appended(d):this.getGlobalMatrix().prepend(this.getView()._matrix),f=Math.max(b.tolerance,1e-12),g=b._tolerancePadding=new t(N._getStrokePadding(f,d._shiftless().invert()));if(!(a=d._inverseTransform(a))|| !this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(g.multiply(2))._containsPoint(a))return null;var h,i,k=!(b.guides&&!this._guide||b.selected&&!this.isSelected()||b.type&&b.type!==j.hyphenate(this._class)||b.class&&!(this instanceof b.class)),l=b.match,m=this;function n(a){return a&&l&&!l(a)&&(a=null),a&&b.all&&b.all.push(a),a}function o(b,c){var d=c?h["get"+c]():m.getPosition();if(a.subtract(d).divide(g).length<=1)return new H(b,m,{name:c?j.hyphenate(c):b,point:d})}var p=b.position,q=b.center,r=b.bounds;if(k&&this._parent&&(p||q||r)){if((q||r)&&(h=this.getInternalBounds()),!(i=p&&o("position")||q&&o("center","Center"))&&r)for(var s=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],u=0;u<8&&!i;u++)i=o("bounds",s[u]);i=n(i)}return i||(i=this._hitTestChildren(a,b,e)||k&&n(this._hitTestSelf(a,b,e,this.getStrokeScaling()?null:e._shiftless().invert()))||null),i&&i.point&&(i.point=d.transform(i.point)),i},_hitTestSelf:function(a,b){if(b.fill&&this.hasFill()&&this._contains(a))return new H("fill",this)},matches:function(a,b){function c(a,b){for(var d in a)if(a.hasOwnProperty(d)){var e=a[d],f=b[d];if(j.isPlainObject(e)&&j.isPlainObject(f)){if(!c(e,f))return!1}else if(!j.equals(e,f))return!1}return!0}var d=typeof a;if("object"===d){for(var e in a)if(a.hasOwnProperty(e)&&!this.matches(e,a[e]))return!1;return!0}if("function"===d)return a(this);if("match"===a)return b(this);var f=/^(empty|editable)$/.test(a)?this["is"+j.capitalize(a)]():"type"===a?j.hyphenate(this._class):this[a];if("class"===a){if("function"==typeof b)return this instanceof b;f=this._class}if("function"==typeof b)return!!b(f);if(b){if(b.test)return b.test(f);if(j.isPlainObject(b))return c(b,f)}return j.equals(f,b)},getItems:function(a){return A._getItems(this,a,this._matrix)},getItem:function(a){return A._getItems(this,a,this._matrix,null,!0)[0]||null},statics:{_getItems:function a(b,c,d,e,f){if(!e){var g="object"==typeof c&&c,h=g&&g.overlapping,i=g&&g.inside,k=h||i,l=k&&v.read([k]);e={items:[],recursive:g&& !1!==g.recursive,inside:!!i,overlapping:!!h,rect:l,path:h&&new N.Rectangle({rectangle:l,insert:!1})},g&&(c=j.filter({},c,{recursive:!0,inside:!0,overlapping:!0}))}var m=b._children,n=e.items,l=e.rect;d=l&&(d||new x);for(var o=0,p=m&&m.length;o<p;o++){var q=m[o],r=d&&d.appended(q._matrix),s=!0;if(l){var k=q.getBounds(r);if(!l.intersects(k))continue;l.contains(k)||e.overlapping&&(k.contains(l)||e.path.intersects(q,r))||(s=!1)}if(s&&q.matches(c)&&(n.push(q),f)||(!1!==e.recursive&&a(q,c,r,e,f),f&&n.length>0))break}return n}}},{importJSON:function(a){var b=j.importJSON(a,this);return b!==this?this.addChild(b):b},addChild:function(a){return this.insertChild(g,a)},insertChild:function(a,b){var c=b?this.insertChildren(a,[b]):null;return c&&c[0]},addChildren:function(a){return this.insertChildren(this._children.length,a)},insertChildren:function(a,b){var c=this._children;if(c&&b&&b.length>0){b=j.slice(b);for(var d={},e=b.length-1;e>=0;e--){var f=b[e],g=f&&f._id;!f||d[g]?b.splice(e,1):(f._remove(!1,!0),d[g]=!0)}j.splice(c,b,a,0);for(var h=this._project,i=h._changes,e=0,k=b.length;e<k;e++){var f=b[e],l=f._name;f._parent=this,f._setProject(h,!0),l&&f.setName(l),i&&f._changed(5)}this._changed(11)}else b=null;return b},_insertItem:"#insertChild",_insertAt:function(a,b){var c=a&&a._getOwner(),d=a!==this&&c?this:null;return d&&(d._remove(!1,!0),c._insertItem(a._index+b,d)),d},insertAbove:function(a){return this._insertAt(a,1)},insertBelow:function(a){return this._insertAt(a,0)},sendToBack:function(){var a=this._getOwner();return a?a._insertItem(0,this):null},bringToFront:function(){var a=this._getOwner();return a?a._insertItem(g,this):null},appendTop:"#addChild",appendBottom:function(a){return this.insertChild(0,a)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(a){return a._insertItem(g,this)},copyTo:function(a){return this.clone(!1).addTo(a)},reduce:function(a){var b=this._children;if(b&&1===b.length){var c=b[0].reduce(a);return this._parent?(c.insertAbove(this),this.remove()):c.remove(),c}return this},_removeNamed:function(){var a=this._getOwner();if(a){var b=a._children,c=a._namedChildren,d=this._name,e=c[d],f=e?e.indexOf(this):-1;-1!==f&&(b[d]==this&&delete b[d],e.splice(f,1),e.length?b[d]=e[0]:delete c[d])}},_remove:function(a,b){var c=this._getOwner(),d=this._project,e=this._index;return this._style&&this._style._dispose(),!!c&&(this._name&&this._removeNamed(),null!=e&&(d._activeLayer===this&&(d._activeLayer=this.getNextSibling()||this.getPreviousSibling()),j.splice(c._children,null,e,1)),this._installEvents(!1),a&&d._changes&&this._changed(5),b&&c._changed(11,this),this._parent=null,!0)},remove:function(){return this._remove(!0,!0)},replaceWith:function(a){var b=a&&a.insertBelow(this);return b&&this.remove(),b},removeChildren:function(a,b){if(!this._children)return null;a=a||0,b=j.pick(b,this._children.length);for(var c=j.splice(this._children,null,a,b-a),d=c.length-1;d>=0;d--)c[d]._remove(!0,!1);return c.length>0&&this._changed(11),c},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var a=0,b=this._children.length;a<b;a++)this._children[a]._index=a;this._changed(11)}},isEmpty:function(a){var b=this._children,c=b?b.length:0;if(a){for(var d=0;d<c;d++)if(!b[d].isEmpty(a))return!1;return!0}return!c},isEditable:function(){for(var a=this;a;){if(!a._visible||a._locked)return!1;a=a._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(a){function b(a){var b=[];do b.unshift(a);while(a=a._parent);return b}for(var c=b(this),d=b(a),e=0,f=Math.min(c.length,d.length);e<f;e++)if(c[e]!=d[e])return c[e]._index<d[e]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return!!this._parent&&this._parent.isInserted()},isAbove:function(a){return -1===this._getOrder(a)},isBelow:function(a){return 1===this._getOrder(a)},isParent:function(a){return this._parent===a},isChild:function(a){return a&&a._parent===this},isDescendant:function(a){for(var b=this;b=b._parent;)if(b===a)return!0;return!1},isAncestor:function(a){return!!a&&a.isDescendant(this)},isSibling:function(a){return this._parent===a._parent},isGroupedWith:function(a){for(var b=this._parent;b;){if(b._parent&&/^(Group|Layer|CompoundPath)$/.test(b._class)&&a.isDescendant(b))return!0;b=b._parent}return!1}},j.each(["rotate","scale","shear","skew"],function(a){var b="rotate"===a;this[a]=function(){var c=arguments,d=(b?j:r).read(c),e=r.read(c,0,{readNull:!0});return this.transform(new x()[a](d,e||this.getPosition(!0)))}},{translate:function(){var a=new x;return this.transform(a.translate.apply(a,arguments))},transform:function(a,b,c){var d=this._matrix,e=a&&!a.isIdentity(),f=c&&this._canApplyMatrix||this._applyMatrix&&(e||!d.isIdentity()||b&&this._children);if(!e&&!f)return this;if(e){!a.isInvertible()&&d.isInvertible()&&(d._backup=d.getValues()),d.prepend(a,!0);var g=this._style,h=g.getFillColor(!0),i=g.getStrokeColor(!0);h&&h.transform(a),i&&i.transform(a)}if(f&&(f=this._transformContent(d,b,c))){var j=this._pivot;j&&d._transformPoint(j,j,!0),d.reset(!0),c&&this._canApplyMatrix&&(this._applyMatrix=!0)}var k=this._bounds,l=this._position;(e||f)&&this._changed(25);var m=e&&k&&a.decompose();if(m&&m.skewing.isZero()&&m.rotation%90==0){for(var n in k){var o=k[n];if(o.nonscaling)delete k[n];else if(f||!o.internal){var p=o.rect;a._transformBounds(p,p)}}this._bounds=k;var q=k[this._getBoundsCacheKey(this._boundsOptions||{})];q&&(this._position=this._getPositionFromBounds(q.rect))}else e&&l&&this._pivot&&(this._position=a._transformPoint(l,l));return this},_transformContent:function(a,b,c){var d=this._children;if(d){for(var e=0,f=d.length;e<f;e++)d[e].transform(a,b,c);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(r.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(r.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(r.read(arguments))},localToParent:function(){return this._matrix._transformPoint(r.read(arguments))},fitBounds:function(a,b){a=v.read(arguments);var c=this.getBounds(),d=c.height/c.width,e=a.height/a.width,f=(b?d>e:d<e)?a.width/c.width:a.height/c.height,g=new v(new r,new t(c.width*f,c.height*f));g.setCenter(a.getCenter()),this.setBounds(g)}}),{_setStyles:function(a,b,c){var d=this._style,e=this._matrix;if(d.hasFill()&&(a.fillStyle=d.getFillColor().toCanvasStyle(a,e)),d.hasStroke()){a.strokeStyle=d.getStrokeColor().toCanvasStyle(a,e),a.lineWidth=d.getStrokeWidth();var f=d.getStrokeJoin(),g=d.getStrokeCap(),h=d.getMiterLimit();if(f&&(a.lineJoin=f),g&&(a.lineCap=g),h&&(a.miterLimit=h),ak.support.nativeDash){var i=d.getDashArray(),j=d.getDashOffset();i&&i.length&&("setLineDash"in a?(a.setLineDash(i),a.lineDashOffset=j):(a.mozDash=i,a.mozDashOffset=j))}}if(d.hasShadow()){var k=b.pixelRatio||1,l=c._shiftless().prepend(new x().scale(k,k)),m=l.transform(new r(d.getShadowBlur(),0)),n=l.transform(this.getShadowOffset());a.shadowColor=d.getShadowColor().toCanvasStyle(a),a.shadowBlur=m.getLength(),a.shadowOffsetX=n.x,a.shadowOffsetY=n.y}},draw:function(a,b,c){if(this._updateVersion=this._project._updateVersion,this._visible&&0!==this._opacity){var d=b.matrices,e=b.viewMatrix,f=this._matrix,g=d[d.length-1].appended(f);if(g.isInvertible()){e=e?e.appended(g):g,d.push(g),b.updateMatrix&&(this._globalMatrix=g);var h,i,j,k=this._blendMode,l=p.clamp(this._opacity,0,1),m="normal"===k,n=ah.nativeModes[k],o=m&&1===l||b.dontStart||b.clip||(n||m&&l<1)&&this._canComposite(),q=b.pixelRatio||1;if(!o){var r=this.getStrokeBounds(e);if(!r.width||!r.height){d.pop();return}j=b.offset,i=b.offset=r.getTopLeft().floor(),h=a,a=ag.getContext(r.getSize().ceil().add(1).multiply(q)),1!==q&&a.scale(q,q)}a.save();var s=c?c.appended(f):this._canScaleStroke&&!this.getStrokeScaling(!0)&&e,t=!o&&b.clipItem,u=!s||t;if(o?(a.globalAlpha=l,n&&(a.globalCompositeOperation=k)):u&&a.translate(-i.x,-i.y),u&&(o?f:e).applyToContext(a),t&&b.clipItem.draw(a,b.extend({clip:!0})),s){a.setTransform(q,0,0,q,0,0);var v=b.offset;v&&a.translate(-v.x,-v.y)}this._draw(a,b,e,s),a.restore(),d.pop(),b.clip&&!b.dontFinish&&a.clip(this.getFillRule()),o||(ah.process(k,a,h,l,i.subtract(j).multiply(q)),ag.release(a),b.offset=j)}}},_isUpdated:function(a){var b=this._parent;if(b instanceof O)return b._isUpdated(a);var c=this._updateVersion===a;return!c&&b&&b._visible&&b._isUpdated(a)&&(this._updateVersion=a,c=!0),c},_drawSelection:function(a,b,c,d,e){var f=this._selection,g=1&f,h=2&f||g&&this._selectBounds,i=4&f;if(this._drawSelected||(g=!1),(g||h||i)&&this._isUpdated(e)){var j,k=this.getSelectedColor(!0)||(j=this.getLayer())&&j.getSelectedColor(!0),l=b.appended(this.getGlobalMatrix(!0)),m=c/2;if(a.strokeStyle=a.fillStyle=k?k.toCanvasStyle(a):"#009dec",g&&this._drawSelected(a,l,d),i){var n=this.getPosition(!0),o=this._parent,p=o?o.localToGlobal(n):n,q=p.x,r=p.y;a.beginPath(),a.arc(q,r,m,0,2*Math.PI,!0),a.stroke();for(var s=[[0,-1],[1,0],[0,1],[-1,0]],t=m,u=c+1,v=0;v<4;v++){var w=s[v],x=w[0],y=w[1];a.moveTo(q+x*t,r+y*t),a.lineTo(q+x*u,r+y*u),a.stroke()}}if(h){var z=l._transformCorners(this.getInternalBounds());a.beginPath();for(var v=0;v<8;v++)a[v?"lineTo":"moveTo"](z[v],z[++v]);a.closePath(),a.stroke();for(var v=0;v<8;v++)a.fillRect(z[v]-m,z[++v]-m,c,c)}}},_canComposite:function(){return!1}},j.each(["down","drag","up","move"],function(a){this["removeOn"+j.capitalize(a)]=function(){var b={};return b[a]=!0,this.removeOn(b)}},{removeOn:function(a){for(var b in a)if(a[b]){var c="mouse"+b,d=this._project,e=d._removeSets=d._removeSets||{};e[c]=e[c]||{},e[c][this._id]=this}return this}}),{tween:function(a,b,c){c||(c=b,b=a,a=null,c||(c=b,b=null));var d=c&&c.easing,e=c&&c.start,f=null!=c&&("number"==typeof c?c:c.duration),g=new ae(this,a,b,f,d,e);function h(a){g._handleFrame(1e3*a.time),g.running||this.off("frame",h)}return f&&this.on("frame",h),g},tweenTo:function(a,b){return this.tween(null,a,b)},tweenFrom:function(a,b){return this.tween(a,null,b)}}),B=A.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(a){this._children=[],this._namedChildren={},this._initialize(a)||this.addChildren(Array.isArray(a)?a:arguments)},_changed:function a(b){a.base.call(this,b),2050&b&&(this._clipItem=g)},_getClipItem:function(){var a=this._clipItem;if(a===g){a=null;for(var b=this._children,c=0,d=b.length;c<d;c++)if(b[c]._clipMask){a=b[c];break}this._clipItem=a}return a},isClipped:function(){return!!this._getClipItem()},setClipped:function(a){var b=this.getFirstChild();b&&b.setClipMask(a)},_getBounds:function a(b,c){var d=this._getClipItem();return d?d._getCachedBounds(d._matrix.prepended(b),j.set({},c,{stroke:!1})):a.base.call(this,b,c)},_hitTestChildren:function a(b,c,d){var e=this._getClipItem();return(!e||e.contains(b))&&a.base.call(this,b,c,d,e)},_draw:function(a,b){var c=b.clip,d=!c&&this._getClipItem();b=b.extend({clipItem:d,clip:!1}),c?(a.beginPath(),b.dontStart=b.dontFinish=!0):d&&d.draw(a,b.extend({clip:!0}));for(var e=this._children,f=0,g=e.length;f<g;f++){var h=e[f];h!==d&&h.draw(a,b)}}}),C=B.extend({_class:"Layer",initialize:function(){B.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project},isInserted:function a(){return this._parent?a.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),D=A.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(a,b){this._initialize(a,b)},_equals:function(a){return this._type===a._type&&this._size.equals(a._size)&&j.equals(this._radius,a._radius)},copyContent:function(a){this.setType(a._type),this.setSize(a._size),this.setRadius(a._radius)},getType:function(){return this._type},setType:function(a){this._type=a},getShape:"#getType",setShape:"#setType",getSize:function(){var a=this._size;return new u(a.width,a.height,this,"setSize")},setSize:function(){var a=t.read(arguments);if(this._size){if(!this._size.equals(a)){var b=this._type,c=a.width,d=a.height;"rectangle"===b?this._radius.set(t.min(this._radius,a.divide(2).abs())):"circle"===b?(c=d=(c+d)/2,this._radius=c/2):"ellipse"===b&&this._radius._set(c/2,d/2),this._size._set(c,d),this._changed(9)}}else this._size=a.clone()},getRadius:function(){var a=this._radius;return"circle"===this._type?a:new u(a.width,a.height,this,"setRadius")},setRadius:function(a){var b=this._type;if("circle"===b){if(a===this._radius)return;var c=2*a;this._radius=a,this._size._set(c,c)}else if(a=t.read(arguments),this._radius){if(this._radius.equals(a))return;if(this._radius.set(a),"rectangle"===b){var c=t.max(this._size,a.multiply(2));this._size.set(c)}else"ellipse"===b&&this._size._set(2*a.width,2*a.height)}else this._radius=a.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(a){var b=new N[j.capitalize(this._type)]({center:new r,size:this._size,radius:this._radius,insert:!1});return b.copyAttributes(this),ak.settings.applyMatrix&&b.setApplyMatrix(!0),(a===g||a)&&b.insertAbove(this),b},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(a,b,c,d){var e=this._style,f=e.hasFill(),g=e.hasStroke(),h=b.dontFinish||b.clip,i=!d;if(f||g||h){var j=this._type,k=this._radius,l="circle"===j;if(b.dontStart||a.beginPath(),i&&l)a.arc(0,0,k,0,2*Math.PI,!0);else{var m=l?k:k.width,n=l?k:k.height,o=this._size,p=o.width,q=o.height;if(i&&"rectangle"===j&&0===m&&0===n)a.rect(-p/2,-q/2,p,q);else{var r=p/2,s=q/2,t=.44771525016920644,u=m*t,v=n*t,w=[-r,-s+n,-r,-s+v,-r+u,-s,-r+m,-s,r-m,-s,r-u,-s,r,-s+v,r,-s+n,r,s-n,r,s-v,r-u,s,r-m,s,-r+m,s,-r+u,s,-r,s-v,-r,s-n];d&&d.transform(w,w,32),a.moveTo(w[0],w[1]),a.bezierCurveTo(w[2],w[3],w[4],w[5],w[6],w[7]),r!==m&&a.lineTo(w[8],w[9]),a.bezierCurveTo(w[10],w[11],w[12],w[13],w[14],w[15]),s!==n&&a.lineTo(w[16],w[17]),a.bezierCurveTo(w[18],w[19],w[20],w[21],w[22],w[23]),r!==m&&a.lineTo(w[24],w[25]),a.bezierCurveTo(w[26],w[27],w[28],w[29],w[30],w[31])}}a.closePath()}!h&&(f||g)&&(this._setStyles(a,b,c),f&&(a.fill(e.getFillRule()),a.shadowColor="rgba(0,0,0,0)"),g&&a.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(a,b){var c=new v(this._size).setCenter(0,0),d=this._style,e=b.stroke&&d.hasStroke()&&d.getStrokeWidth();return a&&(c=a._transformBounds(c)),e?c.expand(N._getStrokePadding(e,this._getStrokeMatrix(a,b))):c}},new function(){function a(a,b,c){var d=a._radius;if(!d.isZero())for(var e=a._size.divide(2),f=1;f<=4;f++){var g=new r(f>1&&f<4?-1:1,f>2?-1:1),h=g.multiply(e),i=h.subtract(g.multiply(d));if(new v(c?h.add(g.multiply(c)):h,i).contains(b))return{point:i,quadrant:f}}}function b(a,b,c,d){var e=a.divide(b);return(!d||e.isInQuadrant(d))&&e.subtract(e.normalize()).multiply(b).divide(c).length<=1}return{_contains:function b(c){if("rectangle"!==this._type)return .5>=c.divide(this.size).getLength();var d=a(this,c);return d?1>=c.subtract(d.point).divide(this._radius).getLength():b.base.call(this,c)},_hitTestSelf:function c(d,e,f,g){var h=!1,i=this._style,j=e.stroke&&i.hasStroke(),k=e.fill&&i.hasFill();if(j||k){var l=this._type,m=this._radius,n=j?i.getStrokeWidth()/2:0,o=e._tolerancePadding.add(N._getStrokePadding(n,!i.getStrokeScaling()&&g));if("rectangle"===l){var p=o.multiply(2),q=a(this,d,p);if(q)h=b(d.subtract(q.point),m,o,q.quadrant);else{var r=new v(this._size).setCenter(0,0),s=r.expand(p),t=r.expand(p.negate());h=s._containsPoint(d)&&!t._containsPoint(d)}}else h=b(d,m,o)}return h?new H(j?"stroke":"fill",this):c.base.apply(this,arguments)}}},{statics:new function(){function a(a,b,c,d,e){var f=j.create(D.prototype);return f._type=a,f._size=c,f._radius=d,f._initialize(j.getNamed(e),b),f}return{Circle:function(){var b=arguments,c=r.readNamed(b,"center"),d=j.readNamed(b,"radius");return a("circle",c,new t(2*d),d,b)},Rectangle:function(){var b=arguments,c=v.readNamed(b,"rectangle"),d=t.min(t.readNamed(b,"radius"),c.getSize(!0).divide(2));return a("rectangle",c.getCenter(!0),c.getSize(!0),d,b)},Ellipse:function(){var b=arguments,c=D._readEllipse(b),d=c.radius;return a("ellipse",c.center,d.multiply(2),d,b)},_readEllipse:function(a){var b,c;if(j.hasNamed(a,"radius"))b=r.readNamed(a,"center"),c=t.readNamed(a,"radius");else{var d=v.readNamed(a,"rectangle");b=d.getCenter(!0),c=d.getSize(!0).divide(2)}return{center:b,radius:c}}}}}),E=A.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(a,b){if(!this._initialize(a,b!==g&&r.read(arguments))){var c,d=typeof a,e="string"===d?i.getElementById(a):"object"===d?a:null;if(e&&e!==A.NO_INSERT){if(e.getContext||null!=e.naturalHeight)c=e;else if(e){var f=t.read(arguments);f.isZero()||(c=ag.getCanvas(f))}}c?this.setImage(c):this.setSource(a)}this._size||(this._size=new t,this._loaded=!1)},_equals:function(a){return this.getSource()===a.getSource()},copyContent:function(a){var b=a._image,c=a._canvas;if(b)this._setImage(b);else if(c){var d=ag.getCanvas(a._size);d.getContext("2d").drawImage(c,0,0),this._setImage(d)}this._crossOrigin=a._crossOrigin},getSize:function(){var a=this._size;return new u(a?a.width:0,a?a.height:0,this,"setSize")},setSize:function(a,b){var c=t.read(arguments);if(c.equals(this._size))b&&this.clear();else if(c.width>0&&c.height>0){var d=!b&&this.getElement();this._setImage(ag.getCanvas(c)),d&&this.getContext(!0).drawImage(d,0,0,c.width,c.height)}else this._canvas&&ag.release(this._canvas),this._size=c.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(a){this.setSize(a,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(a){this.setSize(this.getWidth(),a)},getLoaded:function(){return this._loaded},isEmpty:function(){var a=this._size;return!a||0===a.width&&0===a.height},getResolution:function(){var a=this._matrix,b=new r(0,0).transform(a),c=new r(1,0).transform(a).subtract(b),d=new r(0,1).transform(a).subtract(b);return new t(72/c.getLength(),72/d.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(a){var b=this;function c(a){var c=b.getView(),d=a&&a.type||"load";c&&b.responds(d)&&(ak=c._scope,b.emit(d,new _(a)))}this._setImage(a),this._loaded?setTimeout(c,0):a&&Y.add(a,{load:function(d){b._setImage(a),c(d)},error:c})},_setImage:function(a){this._canvas&&ag.release(this._canvas),a&&a.getContext?(this._image=null,this._canvas=a,this._loaded=!0):(this._image=a,this._canvas=null,this._loaded=!!(a&&a.src&&a.complete)),this._size=new t(a?a.naturalWidth||a.width:0,a?a.naturalHeight||a.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var a=ag.getContext(this._size);try{this._image&&a.drawImage(this._image,0,0),this._canvas=a.canvas}catch(b){ag.release(a)}}return this._canvas},setCanvas:"#setImage",getContext:function(a){return this._context||(this._context=this.getCanvas().getContext("2d")),a&&(this._image=null,this._changed(1025)),this._context},setContext:function(a){this._context=a},getSource:function(){var a=this._image;return a&&a.src||this.toDataURL()},setSource:function(a){var b=new f.Image,c=this._crossOrigin;c&&(b.crossOrigin=c),a&&(b.src=a),this.setImage(b)},getCrossOrigin:function(){var a=this._image;return a&&a.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(a){this._crossOrigin=a;var b=this._image;b&&(b.crossOrigin=a)},getSmoothing:function(){return this._smoothing},setSmoothing:function(a){this._smoothing="string"==typeof a?a:a?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var a=v.read(arguments),b=ag.getContext(a.getSize());return b.drawImage(this.getCanvas(),a.x,a.y,a.width,a.height,0,0,a.width,a.height),b.canvas},getSubRaster:function(){var a=v.read(arguments),b=new E(A.NO_INSERT);return b._setImage(this.getSubCanvas(a)),b.translate(a.getCenter().subtract(this.getSize().divide(2))),b._matrix.prepend(this._matrix),b.insertAbove(this),b},toDataURL:function(){var a=this._image,b=a&&a.src;if(/^data:/.test(b))return b;var c=this.getCanvas();return c?c.toDataURL.apply(c,arguments):null},drawImage:function(a){var b=r.read(arguments,1);this.getContext(!0).drawImage(a,b.x,b.y)},getAverageColor:function(a){if(a?a instanceof M?(c=a,b=a.getBounds()):"object"==typeof a&&("width"in a?b=new v(a):"x"in a&&(b=new v(a.x-.5,a.y-.5,1,1))):b=this.getBounds(),!b)return null;var b,c,d=32,e=Math.min(b.width,d),f=Math.min(b.height,d),g=E._sampleContext;g?g.clearRect(0,0,d+1,d+1):g=E._sampleContext=ag.getContext(new t(d)),g.save();var h=new x().scale(e/b.width,f/b.height).translate(-b.x,-b.y);h.applyToContext(g),c&&c.draw(g,new j({clip:!0,matrices:[h]})),this._matrix.applyToContext(g);var i=this.getElement(),k=this._size;i&&g.drawImage(i,-k.width/2,-k.height/2),g.restore();for(var l=g.getImageData(.5,.5,Math.ceil(e),Math.ceil(f)).data,m=[0,0,0],n=0,o=0,p=l.length;o<p;o+=4){var q=l[o+3];n+=q,q/=255,m[0]+=l[o]*q,m[1]+=l[o+1]*q,m[2]+=l[o+2]*q}for(var o=0;o<3;o++)m[o]/=n;return n?T.read(m):null},getPixel:function(){var a=r.read(arguments),b=this.getContext().getImageData(a.x,a.y,1,1).data;return new T("rgb",[b[0]/255,b[1]/255,b[2]/255],b[3]/255)},setPixel:function(){var a=arguments,b=r.read(a),c=T.read(a),d=c._convert("rgb"),e=c._alpha,f=this.getContext(!0),g=f.createImageData(1,1),h=g.data;h[0]=255*d[0],h[1]=255*d[1],h[2]=255*d[2],h[3]=null!=e?255*e:255,f.putImageData(g,b.x,b.y)},clear:function(){var a=this._size;this.getContext(!0).clearRect(0,0,a.width+1,a.height+1)},createImageData:function(){var a=t.read(arguments);return this.getContext().createImageData(a.width,a.height)},getImageData:function(){var a=v.read(arguments);return a.isEmpty()&&(a=new v(this._size)),this.getContext().getImageData(a.x,a.y,a.width,a.height)},setImageData:function(a){var b=r.read(arguments,1);this.getContext(!0).putImageData(a,b.x,b.y)},_getBounds:function(a,b){var c=new v(this._size).setCenter(0,0);return a?a._transformBounds(c):c},_hitTestSelf:function(a){if(this._contains(a)){var b=this;return new H("pixel",b,{offset:a.add(b._size.divide(2)).round(),color:{get:function(){return b.getPixel(this.offset)}}})}},_draw:function(a,b,c){var d=this.getElement();if(d&&d.width>0&&d.height>0){a.globalAlpha=p.clamp(this._opacity,0,1),this._setStyles(a,b,c);var e=this._smoothing,f="off"===e;X.setPrefixed(a,f?"imageSmoothingEnabled":"imageSmoothingQuality",!f&&e),a.drawImage(d,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),F=A.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(a,b){this._initialize(a,b!==g&&r.read(arguments,1))||this.setDefinition(a instanceof G?a:new G(a))},_equals:function(a){return this._definition===a._definition},copyContent:function(a){this.setDefinition(a._definition)},getDefinition:function(){return this._definition},setDefinition:function(a){this._definition=a,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(a,b){var c=this._definition._item;return c._getCachedBounds(c._matrix.prepended(a),b)},_hitTestSelf:function(a,b,c){var d=b.extend({all:!1}),e=this._definition._item._hitTest(a,d,c);return e&&(e.item=this),e},_draw:function(a,b){this._definition._item.draw(a,b)}}),G=j.extend({_class:"SymbolDefinition",initialize:function(a,b){this._id=q.get(),this.project=ak.project,a&&this.setItem(a,b)},_serialize:function(a,b){return b.add(this,function(){return j.serialize([this._class,this._item],a,!1,b)})},_changed:function(a){8&a&&A._clearBoundsCache(this),1&a&&this.project._changed(a)},getItem:function(){return this._item},setItem:function(a,b){a._symbol&&(a=a.clone()),this._item&&(this._item._symbol=null),this._item=a,a.remove(),a.setSelected(!1),b||a.setPosition(new r),a._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(a){return new F(this,a)},clone:function(){return new G(this._item.clone(!1))},equals:function(a){return a===this||a&&this._item.equals(a._item)||!1}}),H=j.extend({_class:"HitResult",initialize:function(a,b,c){this.type=a,this.item=b,c&&this.inject(c)},statics:{getOptions:function(a){var b=a&&j.read(a);return new j({type:null,tolerance:ak.settings.hitTolerance,fill:!b,stroke:!b,segments:!b,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},b)}}}),I=j.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(a,b,c,d,e,f){var h,i,j,k,l=arguments.length;l>0&&(null==a||"object"==typeof a?1===l&&a&&"point"in a?(h=a.point,i=a.handleIn,j=a.handleOut,k=a.selection):(h=a,i=b,j=c,k=d):(h=[a,b],i=c!==g?[c,d]:null,j=e!==g?[e,f]:null)),new J(h,this,"_point"),new J(i,this,"_handleIn"),new J(j,this,"_handleOut"),k&&this.setSelection(k)},_serialize:function(a,b){var c=this._point,d=this._selection,e=d||this.hasHandles()?[c,this._handleIn,this._handleOut]:c;return d&&e.push(d),j.serialize(e,a,!0,b)},_changed:function(a){var b=this._path;if(b){var c,d=b._curves,e=this._index;d&&((!a||a===this._point||a===this._handleIn)&&(c=e>0?d[e-1]:b._closed?d[d.length-1]:null)&&c._changed(),(!a||a===this._point||a===this._handleOut)&&(c=d[e])&&c._changed()),b._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(r.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(r.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(r.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var a=this._handleIn,b=this._handleOut;return!a.isZero()&&!b.isZero()&&a.isCollinear(b)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(a){var b=this._selection,c=this._path;this._selection=a=a||0,c&&a!==b&&(c._updateSelection(this,b,a),c._changed(257))},_changeSelection:function(a,b){var c=this._selection;this.setSelection(b?c|a:c& ~a)},isSelected:function(){return!!(7&this._selection)},setSelected:function(a){this._changeSelection(7,a)},getIndex:function(){return g!==this._index?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var a=this._path,b=this._index;return a?(b>0&&!a._closed&&b===a._segments.length-1&&b--,a.getCurves()[b]||null):null},getLocation:function(){var a=this.getCurve();return a?new L(a,this===a._segment1?0:1):null},getNext:function(){var a=this._path&&this._path._segments;return a&&(a[this._index+1]||this._path._closed&&a[0])||null},smooth:function(a,b,c){var d=a||{},e=d.type,f=d.factor,h=this.getPrevious(),i=this.getNext(),j=(h||this)._point,k=this._point,l=(i||this)._point,m=j.getDistance(k),n=k.getDistance(l);if(e&&"catmull-rom"!==e){if("geometric"===e){if(h&&i){var o=j.subtract(l),p=f===g?.4:f,q=p*m/(m+n);b||this.setHandleIn(o.multiply(q)),c||this.setHandleOut(o.multiply(q-p))}}else throw Error("Smoothing method '"+e+"' not supported.")}else{var s=f===g?.5:f,t=Math.pow(m,s),u=t*t,v=Math.pow(n,s),w=v*v;if(!b&&h){var x=2*w+3*v*t+u,y=3*v*(v+t);this.setHandleIn(0!==y?new r((w*j._x+x*k._x-u*l._x)/y-k._x,(w*j._y+x*k._y-u*l._y)/y-k._y):new r)}if(!c&&i){var x=2*u+3*t*v+w,y=3*t*(t+v);this.setHandleOut(0!==y?new r((u*l._x+x*k._x-w*j._x)/y-k._x,(u*l._y+x*k._y-w*j._y)/y-k._y):new r)}}},getPrevious:function(){var a=this._path&&this._path._segments;return a&&(a[this._index-1]||this._path._closed&&a[a.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var a=this._path;return a&&this._index===a._segments.length-1||!1},reverse:function(){var a=this._handleIn,b=this._handleOut,c=a.clone();a.set(b),b.set(c)},reversed:function(){return new I(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new I(this._point,this._handleIn,this._handleOut)},equals:function(a){return a===this||a&&this._class===a._class&&this._point.equals(a._point)&&this._handleIn.equals(a._handleIn)&&this._handleOut.equals(a._handleOut)||!1},toString:function(){var a=["point: "+this._point];return this._handleIn.isZero()||a.push("handleIn: "+this._handleIn),this._handleOut.isZero()||a.push("handleOut: "+this._handleOut),"{ "+a.join(", ")+" }"},transform:function(a){this._transformCoordinates(a,Array(6),!0),this._changed()},interpolate:function(a,b,c){var d=1-c,e=c,f=a._point,g=b._point,h=a._handleIn,i=b._handleIn,j=b._handleOut,k=a._handleOut;this._point._set(d*f._x+e*g._x,d*f._y+e*g._y,!0),this._handleIn._set(d*h._x+e*i._x,d*h._y+e*i._y,!0),this._handleOut._set(d*k._x+e*j._x,d*k._y+e*j._y,!0),this._changed()},_transformCoordinates:function(a,b,c){var d=this._point,e=c&&this._handleIn.isZero()?null:this._handleIn,f=c&&this._handleOut.isZero()?null:this._handleOut,g=d._x,h=d._y,i=2;return b[0]=g,b[1]=h,e&&(b[i++]=e._x+g,b[i++]=e._y+h),f&&(b[i++]=f._x+g,b[i++]=f._y+h),a&&(a._transformCoordinates(b,b,i/2),g=b[0],h=b[1],c?(d._x=g,d._y=h,i=2,e&&(e._x=b[i++]-g,e._y=b[i++]-h),f&&(f._x=b[i++]-g,f._y=b[i++]-h)):(e||(b[i++]=g,b[i++]=h),f||(b[i++]=g,b[i++]=h))),b}}),J=r.extend({initialize:function(a,b,c){var d,e,f;if(a){if(g!==(d=a[0]))e=a[1];else{var h=a;g===(d=h.x)&&(h=r.read(arguments),d=h.x),e=h.y,f=h.selected}}else d=e=0;this._x=d,this._y=e,this._owner=b,b[c]=this,f&&this.setSelected(!0)},_set:function(a,b){return this._x=a,this._y=b,this._owner._changed(this),this},getX:function(){return this._x},setX:function(a){this._x=a,this._owner._changed(this)},getY:function(){return this._y},setY:function(a){this._y=a,this._owner._changed(this)},isZero:function(){var a=p.isZero;return a(this._x)&&a(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(a){this._owner._changeSelection(this._getSelection(),a)},_getSelection:function(){var a=this._owner;return this===a._point?1:this===a._handleIn?2:this===a._handleOut?4:0}}),K=j.extend({_class:"Curve",beans:!0,initialize:function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o=arguments.length;3===o?(this._path=a,i=b,j=c):o?1===o?"segment1"in a?(i=new I(a.segment1),j=new I(a.segment2)):"point1"in a?(k=a.point1,m=a.handle1,n=a.handle2,l=a.point2):Array.isArray(a)&&(k=[a[0],a[1]],l=[a[6],a[7]],m=[a[2]-a[0],a[3]-a[1]],n=[a[4]-a[6],a[5]-a[7]]):2===o?(i=new I(a),j=new I(b)):4===o?(k=a,m=b,n=c,l=d):8===o&&(k=[a,b],l=[g,h],m=[c-a,d-b],n=[e-g,f-h]):(i=new I,j=new I),this._segment1=i||new I(k,null,m),this._segment2=j||new I(l,n,null)},_serialize:function(a,b){return j.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],a,!0,b)},_changed:function(){this._length=this._bounds=g},clone:function(){return new K(this._segment1,this._segment2)},toString:function(){var a=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||a.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||a.push("handle2: "+this._segment2._handleIn),a.push("point2: "+this._segment2._point),"{ "+a.join(", ")+" }"},classify:function(){return K.classify(this.getValues())},remove:function(){var a=!1;if(this._path){var b=this._segment2,c=b._handleOut;(a=b.remove())&&this._segment1._handleOut.set(c)}return a},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(r.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(r.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(r.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(r.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var a=this._path&&this._path._curves;return a&&(a[this._segment1._index+1]||this._path._closed&&a[0])||null},getPrevious:function(){var a=this._path&&this._path._curves;return a&&(a[this._segment1._index-1]||this._path._closed&&a[a.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var a=this._path;return a&&this._segment1._index===a._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(a){this.getPoint1().setSelected(a),this.getHandle1().setSelected(a),this.getHandle2().setSelected(a),this.getPoint2().setSelected(a)},getValues:function(a){return K.getValues(this._segment1,this._segment2,a)},getPoints:function(){for(var a=this.getValues(),b=[],c=0;c<8;c+=2)b.push(new r(a[c],a[c+1]));return b}},{getLength:function(){return null==this._length&&(this._length=K.getLength(this.getValues(),0,1)),this._length},getArea:function(){return K.getArea(this.getValues())},getLine:function(){return new y(this._segment1._point,this._segment2._point)},getPart:function(a,b){return new K(K.getPart(this.getValues(),a,b))},getPartLength:function(a,b){return K.getLength(this.getValues(),a,b)},divideAt:function(a){return this.divideAtTime(a&&a.curve===this?a.time:this.getTimeAt(a))},divideAtTime:function(a,b){var c=null;if(a>=1e-8&&a<=.99999999){var d=K.subdivide(this.getValues(),a),e=d[0],f=d[1],g=b||this.hasHandles(),h=this._segment1,i=this._segment2,j=this._path;g&&(h._handleOut._set(e[2]-e[0],e[3]-e[1]),i._handleIn._set(f[4]-f[6],f[5]-f[7]));var k=e[6],l=e[7],m=new I(new r(k,l),g&&new r(e[4]-k,e[5]-l),g&&new r(f[2]-k,f[3]-l));j?(j.insert(h._index+1,m),c=this.getNext()):(this._segment2=m,this._changed(),c=new K(m,i))}return c},splitAt:function(a){var b=this._path;return b?b.splitAt(a):null},splitAtTime:function(a){return this.splitAt(this.getLocationAtTime(a))},divide:function(a,b){return this.divideAtTime(a===g?.5:b?a:this.getTimeAt(a))},split:function(a,b){return this.splitAtTime(a===g?.5:b?a:this.getTimeAt(a))},reversed:function(){return new K(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(a,b,c,d){var e=a._point,f=a._handleOut,g=b._handleIn,h=b._point,i=e.x,j=e.y,k=h.x,l=h.y,m=d?[i,j,i,j,k,l,k,l]:[i,j,i+f._x,j+f._y,k+g._x,l+g._y,k,l];return c&&c._transformCoordinates(m,m,4),m},subdivide:function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],h=a[4],i=a[5],j=a[6],k=a[7];b===g&&(b=.5);var l=1-b,m=l*c+b*e,n=l*d+b*f,o=l*e+b*h,p=l*f+b*i,q=l*h+b*j,r=l*i+b*k,s=l*m+b*o,t=l*n+b*p,u=l*o+b*q,v=l*p+b*r,w=l*s+b*u,x=l*t+b*v;return[[c,d,m,n,s,t,w,x],[w,x,u,v,q,r,j,k]]},getMonoCurves:function(a,b){var c=[],d=b?0:1,e=a[d+0],f=a[d+2],g=a[d+4],h=a[d+6];if(e>=f==f>=g&&f>=g==g>=h||K.isStraight(a))c.push(a);else{var i=3*(f-g)-e+h,j=2*(e+g)-4*f,k=f-e,l=1e-8,m=1-l,n=[],o=p.solveQuadratic(i,j,k,n,l,m);if(o){n.sort();var q=n[0],r=K.subdivide(a,q);c.push(r[0]),o>1&&(q=(n[1]-q)/(1-q),r=K.subdivide(r[1],q),c.push(r[0])),c.push(r[1])}else c.push(a)}return c},solveCubic:function(a,b,c,d,e,f){var g=a[b],h=a[b+2],i=a[b+4],j=a[b+6],k=0;if(!(g<c&&j<c&&h<c&&i<c||g>c&&j>c&&h>c&&i>c)){var l=3*(h-g),m=3*(i-h)-l,n=j-g-l-m;k=p.solveCubic(n,m,l,g-c,d,e,f)}return k},getTimeOf:function(a,b){var c=new r(a[0],a[1]),d=new r(a[6],a[7]);if(null===(b.isClose(c,1e-12)?0:b.isClose(d,1e-12)?1:null))for(var e=[b.x,b.y],f=[],g=0;g<2;g++)for(var h=K.solveCubic(a,g,e[g],f,0,1),i=0;i<h;i++){var j=f[i];if(b.isClose(K.getPoint(a,j),1e-7))return j}return b.isClose(c,1e-7)?0:b.isClose(d,1e-7)?1:null},getNearestTime:function(a,b){if(K.isStraight(a)){var c=a[0],d=a[1],e=a[6],f=a[7],g=e-c,h=f-d,i=g*g+h*h;if(0===i)return 0;var j=((b.x-c)*g+(b.y-d)*h)/i;return j<1e-12?0:j>.999999999999?1:K.getTimeOf(a,new r(c+j*g,d+j*h))}var k=1/0,l=0;function m(c){if(c>=0&&c<=1){var d=b.getDistance(K.getPoint(a,c),!0);if(d<k)return k=d,l=c,!0}}for(var n=0;n<=100;n++)m(n/100);for(var o=.005;o>1e-8;)m(l-o)||m(l+o)||(o/=2);return l},getPart:function(a,b,c){var d=b>c;if(d){var e=b;b=c,c=e}return b>0&&(a=K.subdivide(a,b)[1]),c<1&&(a=K.subdivide(a,(c-b)/(1-b))[0]),d?[a[6],a[7],a[4],a[5],a[2],a[3],a[0],a[1]]:a},isFlatEnough:function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=a[6],j=a[7],k=3*e-2*c-i,l=3*f-2*d-j,m=3*g-2*i-c,n=3*h-2*j-d;return Math.max(k*k,m*m)+Math.max(l*l,n*n)<=16*b*b},getArea:function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7];return 3*((i-c)*(d+f)-(h-b)*(e+g)+e*(b-f)-d*(c-g)+i*(f+b/3)-h*(g+c/3))/20},getBounds:function(a){for(var b=a.slice(0,2),c=b.slice(),d=[0,0],e=0;e<2;e++)K._addBounds(a[e],a[e+2],a[e+4],a[e+6],e,0,b,c,d);return new v(b[0],b[1],c[0]-b[0],c[1]-b[1])},_addBounds:function(a,b,c,d,e,f,g,h,i){function j(a,b){var c=a-b,d=a+b;c<g[e]&&(g[e]=c),d>h[e]&&(h[e]=d)}f/=2;var k=g[e]+f,l=h[e]-f;if(a<k||b<k||c<k||d<k||a>l||b>l||c>l||d>l){if(b<a!=b<d&&c<a!=c<d)j(a,0),j(d,0);else{var m=3*(b-c)-a+d,n=2*(a+c)-4*b,o=b-a,q=p.solveQuadratic(m,n,o,i),r=1e-8,s=1-r;j(d,0);for(var t=0;t<q;t++){var u=i[t],v=1-u;r<=u&&u<=s&&j(v*v*v*a+3*v*v*u*b+3*v*u*u*c+u*u*u*d,f)}}}}}},j.each(["getBounds","getStrokeBounds","getHandleBounds"],function(a){this[a]=function(){this._bounds||(this._bounds={});var b=this._bounds[a];return b||(b=this._bounds[a]=N[a]([this._segment1,this._segment2],!1,this._path)),b.clone()}},{}),j.each({isStraight:function(a,b,c,d){if(b.isZero()&&c.isZero())return!0;var e=d.subtract(a);if(e.isZero());else if(e.isCollinear(b)&&e.isCollinear(c)){var f=new y(a,d),g=1e-7;if(f.getDistance(a.add(b))<g&&f.getDistance(d.add(c))<g){var h=e.dot(e),i=e.dot(b)/h,j=e.dot(c)/h;return i>=0&&i<=1&&j<=0&&j>= -1}}return!1},isLinear:function(a,b,c,d){var e=d.subtract(a).divide(3);return b.equals(e)&&c.negate().equals(e)}},function(a,b){this[b]=function(b){var c=this._segment1,d=this._segment2;return a(c._point,c._handleOut,d._handleIn,d._point,b)},this.statics[b]=function(b,c){var d=b[0],e=b[1],f=b[6],g=b[7];return a(new r(d,e),new r(b[2]-d,b[3]-e),new r(b[4]-f,b[5]-g),new r(f,g),c)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(a){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(a||0)},isCollinear:function(a){return a&&this.isStraight()&&a.isStraight()&&this.getLine().isCollinear(a.getLine())},isHorizontal:function(){return this.isStraight()&&1e-8>Math.abs(this.getTangentAtTime(.5).y)},isVertical:function(){return this.isStraight()&&1e-8>Math.abs(this.getTangentAtTime(.5).x)}}),{beans:!1,getLocationAt:function(a,b){return this.getLocationAtTime(b?a:this.getTimeAt(a))},getLocationAtTime:function(a){return null!=a&&a>=0&&a<=1?new L(this,a):null},getTimeAt:function(a,b){return K.getTimeAt(this.getValues(),a,b)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var a=r.read(arguments);return a.isZero()?[]:K.getTimesWithTangent(this.getValues(),a)},getOffsetAtTime:function(a){return this.getPartLength(0,a)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(r.read(arguments)))},getOffsetOf:function(){var a=this.getLocationOf.apply(this,arguments);return a?a.getOffset():null},getTimeOf:function(){return K.getTimeOf(this.getValues(),r.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var a=r.read(arguments),b=this.getValues(),c=K.getNearestTime(b,a),d=K.getPoint(b,c);return new L(this,c,d,null,a.getDistance(d))},getNearestPoint:function(){var a=this.getNearestLocation.apply(this,arguments);return a?a.getPoint():a}},new function(){var a=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return j.each(a,function(a){this[a+"At"]=function(b,c){var d=this.getValues();return K[a](d,c?b:K.getTimeAt(d,b))},this[a+"AtTime"]=function(b){return K[a](this.getValues(),b)}},{statics:{_evaluateMethods:a}})},new function(){function a(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=9*(d-f)+3*(h-b),k=6*(b+f)-12*d,l=3*(d-b),m=9*(e-g)+3*(i-c),n=6*(c+g)-12*e,o=3*(e-c);return function(a){var b=(j*a+k)*a+l,c=(m*a+n)*a+o;return Math.sqrt(b*b+c*c)}}function b(a,b){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(b-a))))}function c(a,b,c,d){if(null==b||b<0||b>1)return null;var e=a[0],f=a[1],g=a[2],h=a[3],i=a[4],j=a[5],k=a[6],l=a[7],m=p.isZero;m(g-e)&&m(h-f)&&(g=e,h=f),m(i-k)&&m(j-l)&&(i=k,j=l);var n,o,q=3*(g-e),s=3*(i-g)-q,t=k-e-q-s,u=3*(h-f),v=3*(j-h)-u,w=l-f-u-v;if(0===c)n=0===b?e:1===b?k:((t*b+s)*b+q)*b+e,o=0===b?f:1===b?l:((w*b+v)*b+u)*b+f;else{var x=1e-8,y=1-x;if(b<x?(n=q,o=u):b>y?(n=3*(k-i),o=3*(l-j)):(n=(3*t*b+2*s)*b+q,o=(3*w*b+2*v)*b+u),d){0===n&&0===o&&(b<x||b>y)&&(n=i-g,o=j-h);var z=Math.sqrt(n*n+o*o);z&&(n/=z,o/=z)}if(3===c){var i=6*t*b+2*s,j=6*w*b+2*v,A=Math.pow(n*n+o*o,1.5);n=0!==A?(n*j-o*i)/A:0,o=0}}return 2===c?new r(o,-n):new r(n,o)}return{statics:{classify:function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],h=a[5],i=a[6],j=a[7],k=b*(j-h)+c*(f-i)+i*h-j*f,l=d*(c-j)+e*(i-b)+b*j-c*i,m=f*(e-c)+h*(b-d)+d*c-e*b,n=3*m,o=n-l,q=o-l+k,r=Math.sqrt(q*q+o*o+n*n),s=0!==r?1/r:0,t=p.isZero,u="serpentine";function v(a,b,c){var d=b!==g,e=d&&b>0&&b<1,f=d&&c>0&&c<1;return!d||(e||f)&&("loop"!==a||e&&f)||(a="arch",e=f=!1),{type:a,roots:e||f?e&&f?b<c?[b,c]:[c,b]:[e?b:c]:null}}if(q*=s,o*=s,n*=s,t(q))return t(o)?v(t(n)?"line":"quadratic"):v(u,n/(3*o));var w=3*o*o-4*q*n;if(t(w))return v("cusp",o/(2*q));var x=w>0?Math.sqrt(w/3):Math.sqrt(-w),y=2*q;return v(w>0?u:"loop",(o+x)/y,(o-x)/y)},getLength:function(c,d,e,f){if(d===g&&(d=0),e===g&&(e=1),K.isStraight(c)){var h=c;e<1&&(h=K.subdivide(h,e)[0],d/=e),d>0&&(h=K.subdivide(h,d)[1]);var i=h[6]-h[0],j=h[7]-h[1];return Math.sqrt(i*i+j*j)}return p.integrate(f||a(c),d,e,b(d,e))},getTimeAt:function(c,d,e){if(e===g&&(e=d<0?1:0),0===d)return e;var f=Math.abs,h=1e-12,i=d>0,j=i?e:0,k=i?1:e,l=a(c),m=K.getLength(c,j,k,l),n=f(d)-m;if(f(n)<h)return i?k:j;if(n>h)return null;var o=d/m,q=0;return p.findRoot(function(a){return q+=p.integrate(l,e,a,b(e,a)),e=a,q-d},l,e+o,j,k,32,1e-12)},getPoint:function(a,b){return c(a,b,0,!1)},getTangent:function(a,b){return c(a,b,1,!0)},getWeightedTangent:function(a,b){return c(a,b,1,!1)},getNormal:function(a,b){return c(a,b,2,!0)},getWeightedNormal:function(a,b){return c(a,b,2,!1)},getCurvature:function(a,b){return c(a,b,3,!1).x},getPeaks:function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=-b+3*d-3*f+h,k=3*b-6*d+3*f,l=-3*b+3*d,m=-c+3*e-3*g+i,n=3*c-6*e+3*g,o=-3*c+3*e,q=[];return p.solveCubic(9*(j*j+m*m),9*(j*k+n*m),2*(k*k+n*n)+3*(l*j+o*m),l*k+n*o,q,1e-8,.99999999),q.sort()}}}},new function(){function a(a,b,c,d,e,f,g){var h=!g&&c.getPrevious()===e,i=!g&&c!==e&&c.getNext()===e;if(null!==d&&d>=(h?1e-8:0)&&d<=(i?.99999999:1)&&null!==f&&f>=(i?1e-8:0)&&f<=(h?.99999999:1)){var j=new L(c,d,null,g),k=new L(e,f,null,g);j._intersection=k,k._intersection=j,(!b||b(j))&&L.insert(a,j,!0)}}function b(e,f,g,h,i,j,k,l,m,n,o,p,q){if(++m>=4096|| ++l>=40)return m;var r,s,t=1e-9,u=f[0],v=f[1],w=f[6],x=f[7],z=y.getSignedDistance,A=z(u,v,w,x,f[2],f[3]),B=z(u,v,w,x,f[4],f[5]),C=A*B>0?3/4:4/9,D=C*Math.min(0,A,B),E=C*Math.max(0,A,B),F=z(u,v,w,x,e[0],e[1]),G=z(u,v,w,x,e[2],e[3]),H=z(u,v,w,x,e[4],e[5]),I=z(u,v,w,x,e[6],e[7]),J=c(F,G,H,I),L=J[0],M=J[1];if(0===A&&0===B&&0===F&&0===G&&0===H&&0===I||null==(r=d(L,M,D,E))||null==(s=d(L.reverse(),M.reverse(),D,E)))return m;var N=n+(o-n)*r,O=n+(o-n)*s;if(Math.max(q-p,O-N)<t){var P=(N+O)/2,Q=(p+q)/2;a(i,j,k?h:g,k?Q:P,k?g:h,k?P:Q)}else{e=K.getPart(e,r,s);var R=q-p;if(s-r>.8){if(O-N>R){var S=K.subdivide(e,.5),P=(N+O)/2;m=b(f,S[0],h,g,i,j,!k,l,m,p,q,N,P),m=b(f,S[1],h,g,i,j,!k,l,m,p,q,P,O)}else{var S=K.subdivide(f,.5),Q=(p+q)/2;m=b(S[0],e,h,g,i,j,!k,l,m,p,Q,N,O),m=b(S[1],e,h,g,i,j,!k,l,m,Q,q,N,O)}}else m=0===R||R>=t?b(f,e,h,g,i,j,!k,l,m,p,q,N,O):b(e,f,g,h,i,j,k,l,m,N,O,p,q)}return m}function c(a,b,c,d){var e,f=[0,a],g=[1/3,b],h=[2/3,c],i=[1,d],j=b-(2*a+d)/3,k=c-(a+2*d)/3;if(j*k<0)e=[[f,g,i],[f,h,i]];else{var l=j/k;e=[l>=2?[f,g,i]:l<=.5?[f,h,i]:[f,g,h,i],[f,i]]}return 0>(j||k)?e.reverse():e}function d(a,b,c,d){return a[0][1]<c?e(a,!0,c):b[0][1]>d?e(b,!1,d):a[0][0]}function e(a,b,c){for(var d=a[0][0],e=a[0][1],f=1,g=a.length;f<g;f++){var h=a[f][0],i=a[f][1];if(b?i>=c:i<=c)return i===c?h:d+(c-e)*(h-d)/(i-e);d=h,e=i}return null}function f(a,b,c,d,e){var f=p.isZero;if(f(d)&&f(e)){var g=K.getTimeOf(a,new r(b,c));return null===g?[]:[g]}for(var h=Math.atan2(-e,d),i=Math.sin(h),j=Math.cos(h),k=[],l=[],m=0;m<8;m+=2){var n=a[m]-b,o=a[m+1]-c;k.push(n*j-o*i,n*i+o*j)}return K.solveCubic(k,1,0,l,0,1),l}function g(b,c,d,e,g,h,i){for(var j=c[0],k=c[1],l=c[6],m=c[7],n=f(b,j,k,l-j,m-k),o=0,p=n.length;o<p;o++){var q=n[o],r=K.getPoint(b,q),s=K.getTimeOf(c,r);null!==s&&a(g,h,i?e:d,i?s:q,i?d:e,i?q:s)}}function h(b,c,d,e,f,g){var h=y.intersect(b[0],b[1],b[6],b[7],c[0],c[1],c[6],c[7]);h&&a(f,g,d,K.getTimeOf(b,h),e,K.getTimeOf(c,h))}function i(c,d,e,f,i,j){var l=Math.min,m=Math.max;if(m(c[0],c[2],c[4],c[6])+1e-12>l(d[0],d[2],d[4],d[6])&&l(c[0],c[2],c[4],c[6])-1e-12<m(d[0],d[2],d[4],d[6])&&m(c[1],c[3],c[5],c[7])+1e-12>l(d[1],d[3],d[5],d[7])&&l(c[1],c[3],c[5],c[7])-1e-12<m(d[1],d[3],d[5],d[7])){var n=k(c,d);if(n)for(var o=0;o<2;o++){var p=n[o];a(i,j,e,p[0],f,p[1],!0)}else{var q=K.isStraight(c),s=K.isStraight(d),t=q&&s,u=q&&!s,v=i.length;if((t?h:q||s?g:b)(u?d:c,u?c:d,u?f:e,u?e:f,i,j,u,0,0,0,1,0,1),!t||i.length===v)for(var o=0;o<4;o++){var w=o>>1,x=1&o,y=6*w,z=6*x,A=new r(c[y],c[y+1]),B=new r(d[z],d[z+1]);A.isClose(B,1e-12)&&a(i,j,e,w,f,x)}}}return i}function j(b,c,d,e){var f=K.classify(b);if("loop"===f.type){var g=f.roots;a(d,e,c,g[0],c,g[1])}return d}function k(a,b){function c(a){var b=a[6]-a[0],c=a[7]-a[1];return b*b+c*c}var d=Math.abs,e=y.getDistance,f=K.isStraight(a),g=K.isStraight(b),h=f&&g,i=c(a)<c(b),j=i?b:a,k=i?a:b,l=j[0],m=j[1],n=j[6]-l,o=j[7]-m;if(1e-7>e(l,m,n,o,k[0],k[1],!0)&&1e-7>e(l,m,n,o,k[6],k[7],!0))!h&&1e-7>e(l,m,n,o,j[2],j[3],!0)&&1e-7>e(l,m,n,o,j[4],j[5],!0)&&1e-7>e(l,m,n,o,k[2],k[3],!0)&&1e-7>e(l,m,n,o,k[4],k[5],!0)&&(f=g=h=!0);else if(h)return null;if(f^g)return null;for(var p=[a,b],q=[],s=0;s<4&&q.length<2;s++){var t=1&s,u=1^t,v=s>>1,w=K.getTimeOf(p[t],new r(p[u][v?6:0],p[u][v?7:1]));if(null!=w){var x=t?[v,w]:[w,v];(!q.length||d(x[0]-q[0][0])>1e-8&&d(x[1]-q[0][1])>1e-8)&&q.push(x)}if(s>2&&!q.length)break}if(2!==q.length)q=null;else if(!h){var z=K.getPart(a,q[0][0],q[1][0]),A=K.getPart(b,q[0][1],q[1][1]);(d(A[2]-z[2])>1e-7||d(A[3]-z[3])>1e-7||d(A[4]-z[4])>1e-7||d(A[5]-z[5])>1e-7)&&(q=null)}return q}return{getIntersections:function(a){var b=this.getValues(),c=a&&a!==this&&a.getValues();return c?i(b,c,this,a,[]):j(b,this,[])},statics:{getOverlaps:k,getIntersections:function(a,b,c,d,e,f){var g=!b;g&&(b=a);for(var h=a.length,k=b.length,l=Array(h),m=g?l:Array(k),o=[],p=0;p<h;p++)l[p]=a[p].getValues(d);if(!g)for(var p=0;p<k;p++)m[p]=b[p].getValues(e);for(var q=n.findCurveBoundsCollisions(l,m,1e-7),r=0;r<h;r++){var s=a[r],t=l[r];g&&j(t,s,o,c);var u=q[r];if(u)for(var v=0;v<u.length;v++){if(f&&o.length)return o;var w=u[v];if(!g||w>r){var x=b[w],y=m[w];i(t,y,s,x,o,c)}}}return o},getCurveLineIntersections:f,getTimesWithTangent:function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=a[6],j=a[7],k=b.normalize(),l=k.x,m=k.y,n=3*i-9*g+9*e-3*c,o=3*j-9*h+9*f-3*d,q=6*g-12*e+6*c,r=6*h-12*f+6*d,s=3*e-3*c,t=3*f-3*d,u=2*n*m-2*o*l,v=[];if(Math.abs(u)<p.CURVETIME_EPSILON){var w=n*t-o*s,u=n*r-o*q;if(0!=u){var x=-w/u;x>=0&&x<=1&&v.push(x)}}else{var y=(q*q-4*n*s)*m*m+(-2*q*r+4*o*s+4*n*t)*l*m+(r*r-4*o*t)*l*l,z=q*m-r*l;if(y>=0&&0!=u){var A=Math.sqrt(y),B=-(z+A)/u,C=(-z+A)/u;B>=0&&B<=1&&v.push(B),C>=0&&C<=1&&v.push(C)}}return v}}}}),L=j.extend({_class:"CurveLocation",initialize:function(a,b,c,d,e){if(b>=.99999999){var f=a.getNext();f&&(b=0,a=f)}this._setCurve(a),this._time=b,this._point=c||a.getPointAtTime(b),this._overlap=d,this._distance=e,this._intersection=this._next=this._previous=null},_setPath:function(a){this._path=a,this._version=a?a._version:0},_setCurve:function(a){this._setPath(a._path),this._curve=a,this._segment=null,this._segment1=a._segment1,this._segment2=a._segment2},_setSegment:function(a){var b=a.getCurve();b?this._setCurve(b):(this._setPath(a._path),this._segment1=a,this._segment2=null),this._segment=a,this._time=a===this._segment1?0:1,this._point=a._point.clone()},getSegment:function(){var a=this._segment;if(!a){var b=this.getCurve(),c=this.getTime();0===c?a=b._segment1:1===c?a=b._segment2:null!=c&&(a=b.getPartLength(0,c)<b.getPartLength(c,1)?b._segment1:b._segment2),this._segment=a}return a},getCurve:function(){var a=this._path,b=this;function c(a){var c=a&&a.getCurve();if(c&&null!=(b._time=c.getTimeOf(b._point)))return b._setCurve(c),c}return a&&a._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null),this._curve||c(this._segment)||c(this._segment1)||c(this._segment2.getPrevious())},getPath:function(){var a=this.getCurve();return a&&a._path},getIndex:function(){var a=this.getCurve();return a&&a.getIndex()},getTime:function(){var a=this.getCurve(),b=this._time;return a&&null==b?this._time=a.getTimeOf(this._point):b},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var a=this._offset;if(null==a){a=0;var b=this.getPath(),c=this.getIndex();if(b&&null!=c)for(var d=b.getCurves(),e=0;e<c;e++)a+=d[e].getLength();this._offset=a+=this.getCurveOffset()}return a},getCurveOffset:function(){var a=this._curveOffset;if(null==a){var b=this.getCurve(),c=this.getTime();this._curveOffset=a=null!=c&&b&&b.getPartLength(0,c)}return a},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var a=this.getCurve(),b=a&&a.divideAtTime(this.getTime());return b&&this._setSegment(b._segment1),b},split:function(){var a=this.getCurve(),b=a._path,c=a&&a.splitAtTime(this.getTime());return c&&this._setSegment(b.getLastSegment()),c},equals:function(a,b){var c=this===a;if(!c&&a instanceof L){var d=this.getCurve(),e=a.getCurve(),f=d._path;if(f===e._path){var g=Math.abs,h=1e-7,i=g(this.getOffset()-a.getOffset()),j=!b&&this._intersection,k=!b&&a._intersection;c=(i<h||f&&g(f.getLength()-i)<h)&&(!j&&!k||j&&k&&j.equals(k,!0))}}return c},toString:function(){var a=[],b=this.getPoint(),c=o.instance;b&&a.push("point: "+b);var d=this.getIndex();null!=d&&a.push("index: "+d);var e=this.getTime();return null!=e&&a.push("time: "+c.number(e)),null!=this._distance&&a.push("distance: "+c.number(this._distance)),"{ "+a.join(", ")+" }"},isTouching:function(){var a=this._intersection;if(a&&this.getTangent().isCollinear(a.getTangent())){var b=this.getCurve(),c=a.getCurve();return!(b.isStraight()&&c.isStraight()&&b.getLine().intersect(c.getLine()))}return!1},isCrossing:function(){var a=this._intersection;if(!a)return!1;var b=this.getTime(),c=a.getTime(),d=1e-8,e=1-d,f=b>=d&&b<=e,g=c>=d&&c<=e;if(f&&g)return!this.isTouching();var h=this.getCurve(),i=h&&b<d?h.getPrevious():h,j=a.getCurve(),k=j&&c<d?j.getPrevious():j;if(b>e&&(h=h.getNext()),c>e&&(j=j.getNext()),!i||!h||!k||!j)return!1;var l=[];function m(a,b){var c=a.getValues(),d=K.classify(c).roots||K.getPeaks(c),e=d.length,f=K.getLength(c,b&&e?d[e-1]:0,!b&&e?d[0]:1);l.push(e?f:f/32)}function n(a,b,c){return b<c?a>b&&a<c:a>b||a<c}f||(m(i,!0),m(h,!1)),g||(m(k,!0),m(j,!1));var o=this.getPoint(),p=Math.min.apply(Math,l),q=f?h.getTangentAtTime(b):h.getPointAt(p).subtract(o),r=f?q.negate():i.getPointAt(-p).subtract(o),s=g?j.getTangentAtTime(c):j.getPointAt(p).subtract(o),t=g?s.negate():k.getPointAt(-p).subtract(o),u=r.getAngle(),v=q.getAngle(),w=t.getAngle(),x=s.getAngle();return!!(f?n(u,w,x)^n(v,w,x)&&n(u,x,w)^n(v,x,w):n(w,u,v)^n(x,u,v)&&n(w,v,u)^n(x,v,u))},hasOverlap:function(){return!!this._overlap}},j.each(K._evaluateMethods,function(a){var b=a+"At";this[a]=function(){var a=this.getCurve(),c=this.getTime();return null!=c&&a&&a[b](c,!0)}},{preserve:!0}),new function(){function a(a,b,c){var d=a.length,e=0,f=d-1;function g(c,e){for(var f=c+e;f>= -1&&f<=d;f+=e){var g=a[(f%d+d)%d];if(!b.getPoint().isClose(g.getPoint(),1e-7))break;if(b.equals(g))return g}return null}for(;e<=f;){var h,i=e+f>>>1,j=a[i];if(c&&(h=b.equals(j)?j:g(i,-1)||g(i,1)))return b._overlap&&(h._overlap=h._intersection._overlap=!0),h;var k=b.getPath(),l=j.getPath();(k!==l?k._id-l._id:b.getIndex()+b.getTime()-(j.getIndex()+j.getTime()))<0?f=i-1:e=i+1}return a.splice(e,0,b),b}return{statics:{insert:a,expand:function(b){for(var c=b.slice(),d=b.length-1;d>=0;d--)a(c,b[d]._intersection,!1);return c}}}}),M=A.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(a){if(j.isPlainObject(a)?(c=a.segments,b=a.pathData):Array.isArray(a)?c=a:"string"==typeof a&&(b=a),c){var b,c,d,e=c[0];d=e&&Array.isArray(e[0])}else b&&(d=(b.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(b));return new(d?O:N)(a)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(a){this.isClockwise()!=(a=!!a)&&this.reverse()},setPathData:function(a){var b,c,d,e=a&&a.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),f=!1,g=new r,h=new r;function i(a,c){var d=+b[a];return f&&(d+=g[c]),d}function j(a){return new r(i(a,"x"),i(a+1,"y"))}this.clear();for(var k=0,l=e&&e.length;k<l;k++){var m=e[k],n=m[0],o=n.toLowerCase(),p=(b=m.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g))&&b.length;switch(f=n===o,"z"!==c||/[mz]/.test(o)||this.moveTo(g),o){case"m":case"l":for(var q="m"===o,s=0;s<p;s+=2)this[q?"moveTo":"lineTo"](g=j(s)),q&&(h=g,q=!1);d=g;break;case"h":case"v":var u="h"===o?"x":"y";g=g.clone();for(var s=0;s<p;s++)g[u]=i(s,u),this.lineTo(g);d=g;break;case"c":for(var s=0;s<p;s+=6)this.cubicCurveTo(j(s),d=j(s+2),g=j(s+4));break;case"s":for(var s=0;s<p;s+=4)this.cubicCurveTo(/[cs]/.test(c)?g.multiply(2).subtract(d):g,d=j(s),g=j(s+2)),c=o;break;case"q":for(var s=0;s<p;s+=4)this.quadraticCurveTo(d=j(s),g=j(s+2));break;case"t":for(var s=0;s<p;s+=2)this.quadraticCurveTo(d=/[qt]/.test(c)?g.multiply(2).subtract(d):g,g=j(s)),c=o;break;case"a":for(var s=0;s<p;s+=7)this.arcTo(g=j(s+5),new t(+b[s],+b[s+1]),+b[s+2],+b[s+4],+b[s+3]);break;case"z":this.closePath(1e-12),g=h}c=o}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(a){var b=a.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(a):{};return b.onPath||!!("evenodd"===this.getFillRule()?1&b.windingL||1&b.windingR:b.winding)},getIntersections:function(a,b,c,d){var e=this===a||!a,f=this._matrix._orNullIfIdentity(),g=e?f:(c||a._matrix)._orNullIfIdentity();return e||this.getBounds(f).intersects(a.getBounds(g),1e-12)?K.getIntersections(this.getCurves(),!e&&a.getCurves(),b,f,g,d):[]},getCrossings:function(a){return this.getIntersections(a,function(a){return a.isCrossing()})},getNearestLocation:function(){for(var a=r.read(arguments),b=this.getCurves(),c=1/0,d=null,e=0,f=b.length;e<f;e++){var g=b[e].getNearestLocation(a);g._distance<c&&(c=g._distance,d=g)}return d},getNearestPoint:function(){var a=this.getNearestLocation.apply(this,arguments);return a?a.getPoint():a},interpolate:function(a,b,c){var d=!this._children,e=d?"_segments":"_children",f=a[e],g=b[e],h=this[e];if(!f||!g||f.length!==g.length)throw Error("Invalid operands in interpolate() call: "+a+", "+b);var i=h.length,j=g.length;if(i<j)for(var k=d?I:N,l=i;l<j;l++)this.add(new k);else i>j&&this[d?"removeSegments":"removeChildren"](j,i);for(var l=0;l<j;l++)h[l].interpolate(f[l],g[l],c);d&&(this.setClosed(a._closed),this._changed(9))},compare:function(a){var b=!1;if(a){var c=this._children||[this],d=a._children?a._children.slice():[a],e=c.length,f=d.length,g=[],h=0;b=!0;for(var i=n.findItemBoundsCollisions(c,d,p.GEOMETRIC_EPSILON),j=e-1;j>=0&&b;j--){var k=c[j];b=!1;var l=i[j];if(l)for(var m=l.length-1;m>=0&&!b;m--)k.compare(d[l[m]])&&(!g[l[m]]&&(g[l[m]]=!0,h++),b=!0)}b=b&&h===f}return b}}),N=M.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(a){this._closed=!1,this._segments=[],this._version=0;var b=arguments,c=Array.isArray(a)?"object"==typeof a[0]?a:b:a&&g===a.size&&(g!==a.x||g!==a.point)?b:null;c&&c.length>0?this.setSegments(c):(this._curves=g,this._segmentSelection=0,c||"string"!=typeof a||(this.setPathData(a),a=null)),this._initialize(!c&&a)},_equals:function(a){return this._closed===a._closed&&j.equals(this._segments,a._segments)},copyContent:function(a){this.setSegments(a._segments),this._closed=a._closed},_changed:function a(b){if(a.base.call(this,b),8&b){if(this._length=this._area=g,32&b)this._version++;else if(this._curves)for(var c=0,d=this._curves.length;c<d;c++)this._curves[c]._changed()}else 64&b&&(this._bounds=g)},getStyle:function(){var a=this._parent;return(a instanceof O?a:this)._style},getSegments:function(){return this._segments},setSegments:function(a){var b=this.isFullySelected(),c=a&&a.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=g,c){var d=a[c-1];"boolean"==typeof d&&(this.setClosed(d),c--),this._add(I.readList(a,0,{},c))}b&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var a=this._curves,b=this._segments;if(!a){var c=this._countCurves();a=this._curves=Array(c);for(var d=0;d<c;d++)a[d]=new K(this,b[d],b[d+1]||b[0])}return a},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var a=this.getCurves();return a[a.length-1]},isClosed:function(){return this._closed},setClosed:function(a){if(this._closed!=(a=!!a)){if(this._closed=a,this._curves){var b=this._curves.length=this._countCurves();a&&(this._curves[b-1]=new K(this,this._segments[b-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(a,b){var c,d,e,f,g,h,i,j,k=this._segments,l=k.length,m=new o(b),n=Array(6),p=!0,q=[];function r(b,k){if(b._transformCoordinates(a,n),c=n[0],d=n[1],p)q.push("M"+m.pair(c,d)),p=!1;else if(g=n[2],h=n[3],g===c&&h===d&&i===e&&j===f){if(!k){var l=c-e,o=d-f;q.push(0===l?"v"+m.number(o):0===o?"h"+m.number(l):"l"+m.pair(l,o))}}else q.push("c"+m.pair(i-e,j-f)+" "+m.pair(g-e,h-f)+" "+m.pair(c-e,d-f));e=c,f=d,i=n[4],j=n[5]}if(!l)return"";for(var s=0;s<l;s++)r(k[s]);return this._closed&&l>0&&(r(k[0],!0),q.push("z")),q.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(a){for(var b=this._segments,c=Array(6),d=0,e=b.length;d<e;d++)b[d]._transformCoordinates(a,c,!0);return!0},_add:function(a,b){for(var c=this._segments,d=this._curves,e=a.length,f=null==b,b=f?c.length:b,g=0;g<e;g++){var h=a[g];h._path&&(h=a[g]=h.clone()),h._path=this,h._index=b+g,h._selection&&this._updateSelection(h,0,h._selection)}if(f)j.push(c,a);else{c.splice.apply(c,[b,0].concat(a));for(var g=b+e,i=c.length;g<i;g++)c[g]._index=g}if(d){var k=this._countCurves(),l=b>0&&b+e-1===k?b-1:b,m=l,n=Math.min(l+e,k);a._curves&&(d.splice.apply(d,[l,0].concat(a._curves)),m+=a._curves.length);for(var g=m;g<n;g++)d.splice(g,0,new K(this,null,null));this._adjustCurves(l,n)}return this._changed(41),a},_adjustCurves:function(a,b){for(var c,d=this._segments,e=this._curves,f=a;f<b;f++)(c=e[f])._path=this,c._segment1=d[f],c._segment2=d[f+1]||d[0],c._changed();(c=e[this._closed&&!a?d.length-1:a-1])&&(c._segment2=d[a]||d[0],c._changed()),(c=e[b])&&(c._segment1=d[b],c._changed())},_countCurves:function(){var a=this._segments.length;return!this._closed&&a>0?a-1:a},add:function(a){var b=arguments;return b.length>1&&"number"!=typeof a?this._add(I.readList(b)):this._add([I.read(b)])[0]},insert:function(a,b){var c=arguments;return c.length>2&&"number"!=typeof b?this._add(I.readList(c,1),a):this._add([I.read(c,1)],a)[0]},addSegment:function(){return this._add([I.read(arguments)])[0]},insertSegment:function(a){return this._add([I.read(arguments,1)],a)[0]},addSegments:function(a){return this._add(I.readList(a))},insertSegments:function(a,b){return this._add(I.readList(b),a)},removeSegment:function(a){return this.removeSegments(a,a+1)[0]||null},removeSegments:function(a,b,c){a=a||0,b=j.pick(b,this._segments.length);var d=this._segments,e=this._curves,f=d.length,g=d.splice(a,b-a),h=g.length;if(!h)return g;for(var i=0;i<h;i++){var k=g[i];k._selection&&this._updateSelection(k,k._selection,0),k._index=k._path=null}for(var i=a,l=d.length;i<l;i++)d[i]._index=i;if(e){for(var m=a>0&&b===f+(this._closed?1:0)?a-1:a,e=e.splice(m,h),i=e.length-1;i>=0;i--)e[i]._path=null;c&&(g._curves=e.slice(1)),this._adjustCurves(m,m)}return this._changed(41),g},clear:"#removeSegments",hasHandles:function(){for(var a=this._segments,b=0,c=a.length;b<c;b++)if(a[b].hasHandles())return!0;return!1},clearHandles:function(){for(var a=this._segments,b=0,c=a.length;b<c;b++)a[b].clearHandles()},getLength:function(){if(null==this._length){for(var a=this.getCurves(),b=0,c=0,d=a.length;c<d;c++)b+=a[c].getLength();this._length=b}return this._length},getArea:function(){var a=this._area;if(null==a){var b=this._segments,c=this._closed;a=0;for(var d=0,e=b.length;d<e;d++){var f=d+1===e;a+=K.getArea(K.getValues(b[d],b[f?0:d+1],null,f&&!c))}this._area=a}return a},isFullySelected:function(){var a=this._segments.length;return this.isSelected()&&a>0&&this._segmentSelection===7*a},setFullySelected:function(a){a&&this._selectSegments(!0),this.setSelected(a)},setSelection:function a(b){1&b||this._selectSegments(!1),a.base.call(this,b)},_selectSegments:function(a){var b=this._segments,c=b.length,d=a?7:0;this._segmentSelection=d*c;for(var e=0;e<c;e++)b[e]._selection=d},_updateSelection:function(a,b,c){a._selection=c,(this._segmentSelection+=c-b)>0&&this.setSelected(!0)},divideAt:function(a){var b,c=this.getLocationAt(a);return c&&(b=c.getCurve().divideAt(c.getCurveOffset()))?b._segment1:null},splitAt:function(a){var b=this.getLocationAt(a),c=b&&b.index,d=b&&b.time;d>.99999999&&(c++,d=0);var e=this.getCurves();if(c>=0&&c<e.length){d>=1e-8&&e[c++].divideAtTime(d);var f,g=this.removeSegments(c,this._segments.length,!0);return this._closed?(this.setClosed(!1),f=this):((f=new N(A.NO_INSERT)).insertAbove(this),f.copyAttributes(this)),f._add(g,0),this.addSegment(g[0]),f}return null},split:function(a,b){var c,d=b===g?a:(c=this.getCurves()[a])&&c.getLocationAtTime(b);return null!=d?this.splitAt(d):null},join:function(a,b){var c=b||0;if(a&&a!==this){var d=a._segments,e=this.getLastSegment(),f=a.getLastSegment();if(!f)return this;e&&e._point.isClose(f._point,c)&&a.reverse();var g=a.getFirstSegment();if(e&&e._point.isClose(g._point,c))e.setHandleOut(g._handleOut),this._add(d.slice(1));else{var h=this.getFirstSegment();h&&h._point.isClose(g._point,c)&&a.reverse(),f=a.getLastSegment(),h&&h._point.isClose(f._point,c)?(h.setHandleIn(f._handleIn),this._add(d.slice(0,d.length-1),0)):this._add(d.slice())}a._closed&&this._add([d[0]]),a.remove()}var i=this.getFirstSegment(),j=this.getLastSegment();return i!==j&&i._point.isClose(j._point,c)&&(i.setHandleIn(j._handleIn),j.remove(),this.setClosed(!0)),this},reduce:function(a){for(var b=this.getCurves(),c=a&&a.simplify,d=c?1e-7:0,e=b.length-1;e>=0;e--){var f=b[e];!f.hasHandles()&&(!f.hasLength(d)||c&&f.isCollinear(f.getNext()))&&f.remove()}return this},reverse:function(){this._segments.reverse();for(var a=0,b=this._segments.length;a<b;a++){var c=this._segments[a],d=c._handleIn;c._handleIn=c._handleOut,c._handleOut=d,c._index=a}this._curves=null,this._changed(9)},flatten:function(a){for(var b=new P(this,a||.25,256,!0).parts,c=b.length,d=[],e=0;e<c;e++)d.push(new I(b[e].curve.slice(0,2)));!this._closed&&c>0&&d.push(new I(b[c-1].curve.slice(6))),this.setSegments(d)},simplify:function(a){var b=new Q(this).fit(a||2.5);return b&&this.setSegments(b),!!b},smooth:function(a){var b=this,c=a||{},d=c.type||"asymmetric",e=this._segments,f=e.length,h=this._closed;function i(a,c){var d=a&&a.index;if(null!=d){var e=a.path;if(e&&e!==b)throw Error(a._class+" "+d+" of "+e+" is not part of "+b);c&&a instanceof K&&d++}else d="number"==typeof a?a:c;return Math.min(d<0&&h?d%f:d<0?d+f:d,f-1)}var j=h&&g===c.from&&g===c.to,k=i(c.from,0),l=i(c.to,f-1);if(k>l){if(h)k-=f;else{var m=k;k=l,l=m}}if(/^(?:asymmetric|continuous)$/.test(d)){var n="asymmetric"===d,o=Math.min,p=l-k+1,q=p-1,r=j?o(p,4):1,s=r,t=r,u=[];if(h||(s=o(1,k),t=o(1,f-l-1)),(q+=s+t)<=1)return;for(var v=0,w=k-s;v<=q;v++,w++)u[v]=e[(w<0?w+f:w)%f]._point;for(var x=u[0]._x+2*u[1]._x,y=u[0]._y+2*u[1]._y,z=2,A=q-1,B=[x],C=[y],D=[z],E=[],F=[],v=1;v<q;v++){var G=v<A,H=G?1:n?1:2,I=G?4:n?2:7,J=G?4:n?3:8,L=G?2:n?0:1,M=H/z;z=D[v]=I-M,x=B[v]=J*u[v]._x+L*u[v+1]._x-M*x,y=C[v]=J*u[v]._y+L*u[v+1]._y-M*y}E[A]=B[A]/D[A],F[A]=C[A]/D[A];for(var v=q-2;v>=0;v--)E[v]=(B[v]-E[v+1])/D[v],F[v]=(C[v]-F[v+1])/D[v];E[q]=(3*u[q]._x-E[A])/2,F[q]=(3*u[q]._y-F[A])/2;for(var v=s,N=q-t,w=k;v<=N;v++,w++){var O=e[w<0?w+f:w],P=O._point,Q=E[v]-P._x,R=F[v]-P._y;(j||v<N)&&O.setHandleOut(Q,R),(j||v>s)&&O.setHandleIn(-Q,-R)}}else for(var v=k;v<=l;v++)e[v<0?v+f:v].smooth(c,!j&&v===k,!j&&v===l)},toShape:function(a){if(!this._closed)return null;var b,c,d,e,f,h,i,j,k=this._segments;function l(a,b){var c=k[a],d=c.getNext(),e=k[b],f=e.getNext();return c._handleOut.isZero()&&d._handleIn.isZero()&&e._handleOut.isZero()&&f._handleIn.isZero()&&d._point.subtract(c._point).isCollinear(f._point.subtract(e._point))}function m(a){var b=k[a],c=b.getNext(),d=b._handleOut,e=c._handleIn,f=.5522847498307936;if(d.isOrthogonal(e)){var g=b._point,h=c._point,i=new y(g,d,!0).intersect(new y(h,e,!0),!0);return i&&p.isZero(d.getLength()/i.subtract(g).getLength()-f)&&p.isZero(e.getLength()/i.subtract(h).getLength()-f)}return!1}function n(a,b){return k[a]._point.getDistance(k[b]._point)}if(!this.hasHandles()&&4===k.length&&l(0,2)&&l(1,3)&&(d=(c=k[1]).getPrevious(),e=c.getNext(),d._handleOut.isZero()&&c._handleIn.isZero()&&c._handleOut.isZero()&&e._handleIn.isZero()&&c._point.subtract(d._point).isOrthogonal(e._point.subtract(c._point)))?(f=D.Rectangle,h=new t(n(0,3),n(0,1)),j=k[1]._point.add(k[2]._point).divide(2)):8===k.length&&m(0)&&m(2)&&m(4)&&m(6)&&l(1,5)&&l(3,7)?(f=D.Rectangle,i=(h=new t(n(1,6),n(0,3))).subtract(new t(n(0,7),n(1,2))).divide(2),j=k[3]._point.add(k[4]._point).divide(2)):4===k.length&&m(0)&&m(1)&&m(2)&&m(3)&&(p.isZero(n(0,2)-n(1,3))?(f=D.Circle,i=n(0,2)/2):(f=D.Ellipse,i=new t(n(2,0)/2,n(3,1)/2)),j=k[1]._point),f){var o=this.getPosition(!0),q=new f({center:o,size:h,radius:i,insert:!1});return q.copyAttributes(this,!0),q._matrix.prepend(this._matrix),q.rotate(j.subtract(o).getAngle()+90),(a===g||a)&&q.insertAbove(this),q}return null},toPath:"#clone",compare:function a(b){if(!b||b instanceof O)return a.base.call(this,b);var c=this.getCurves(),d=b.getCurves(),e=c.length,f=d.length;if(!e||!f)return e==f;for(var g,h,i=c[0].getValues(),j=[],k=0,l=0,m=0;m<f;m++){var n=d[m].getValues();j.push(n);var o=K.getOverlaps(i,n);if(o){g=!m&&o[0][0]>0?f-1:m,h=o[0][1];break}}for(var p,q=Math.abs,r=1e-8,n=j[g];i&&n;){var o=K.getOverlaps(i,n);if(o&&q(o[0][0]-l)<r){1===(l=o[1][0])&&(i=++k<e?c[k].getValues():null,l=0);var s=o[0][1];if(q(s-h)<r){if(p||(p=[g,s]),1===(h=o[1][1])&&(++g>=f&&(g=0),n=j[g]||d[g].getValues(),h=0),!i)return p[0]===g&&p[1]===h;continue}}break}return!1},_hitTestSelf:function(a,b,c,d){var e,f,g,h,i,j,k=this,l=this.getStyle(),m=this._segments,n=m.length,o=this._closed,p=b._tolerancePadding,q=p,r=b.stroke&&l.hasStroke(),s=b.fill&&l.hasFill(),t=b.curves,u=r?l.getStrokeWidth()/2:s&&b.tolerance>0||t?0:null;function v(b,c){return a.subtract(b).divide(c).length<=1}function w(a,c,d){if(!b.selected||c.isSelected()){var e=a._point;if(c!==e&&(c=c.add(e)),v(c,q))return new H(d,k,{segment:a,point:c})}}function x(a,c){return(c||b.segments)&&w(a,a._point,"segment")|| !c&&b.handles&&(w(a,a._handleIn,"handle-in")||w(a,a._handleOut,"handle-out"))}function y(a){h.add(a)}function z(b){var c,i=o||b._index>0&&b._index<n-1;return(i?e:f)==="round"?v(b._point,q):(h=new N({internal:!0,closed:!0}),i?b.isSmooth()||N._addBevelJoin(b,e,u,g,null,d,y,!0):"square"===f&&N._addSquareCap(b,f,u,null,d,y,!0),h.isEmpty())?void 0:h.contains(a)||(c=h.getNearestLocation(a))&&v(c.getPoint(),p)}if(null!==u&&(u>0?(e=l.getStrokeJoin(),f=l.getStrokeCap(),g=l.getMiterLimit(),q=q.add(N._getStrokePadding(u,d))):e=f="round"),!b.ends||b.segments||o){if(b.segments||b.handles){for(var A=0;A<n;A++)if(j=x(m[A]))return j}}else if(j=x(m[0],!0)||x(m[n-1],!0))return j;if(null!==u){if(i=this.getNearestLocation(a)){var B=i.getTime();0===B||1===B&&n>1?z(i.getSegment())||(i=null):v(i.getPoint(),q)||(i=null)}if(!i&&"miter"===e&&n>1)for(var A=0;A<n;A++){var C=m[A];if(a.getDistance(C._point)<=g*u&&z(C)){i=C.getLocation();break}}}return!i&&s&&this._contains(a)||i&&!r&&!t?new H("fill",this):i?new H(r?"stroke":"curve",this,{location:i,point:i.getPoint()}):null}},j.each(K._evaluateMethods,function(a){this[a+"At"]=function(b){var c=this.getLocationAt(b);return c&&c[a]()}},{beans:!1,getLocationOf:function(){for(var a=r.read(arguments),b=this.getCurves(),c=0,d=b.length;c<d;c++){var e=b[c].getLocationOf(a);if(e)return e}return null},getOffsetOf:function(){var a=this.getLocationOf.apply(this,arguments);return a?a.getOffset():null},getLocationAt:function(a){if("number"==typeof a){for(var b=this.getCurves(),c=0,d=0,e=b.length;d<e;d++){var f=c,g=b[d];if((c+=g.getLength())>a)return g.getLocationAt(a-f)}if(b.length>0&&a<=this.getLength())return new L(b[b.length-1],1)}else if(a&&a.getPath&&a.getPath()===this)return a;return null},getOffsetsWithTangent:function(){var a=r.read(arguments);if(a.isZero())return[];for(var b=[],c=0,d=this.getCurves(),e=0,f=d.length;e<f;e++){for(var g=d[e],h=g.getTimesWithTangent(a),i=0,j=h.length;i<j;i++){var k=c+g.getOffsetAtTime(h[i]);0>b.indexOf(k)&&b.push(k)}c+=g.length}return b}}),new function(){function a(a,b,c){var d,e,f,g,h,i,j,k,l=b._segments,m=l.length,n=Array(6),o=!0;function p(b){if(c)b._transformCoordinates(c,n),d=n[0],e=n[1];else{var l=b._point;d=l._x,e=l._y}if(o)a.moveTo(d,e),o=!1;else{if(c)h=n[2],i=n[3];else{var m=b._handleIn;h=d+m._x,i=e+m._y}h===d&&i===e&&j===f&&k===g?a.lineTo(d,e):a.bezierCurveTo(j,k,h,i,d,e)}if(f=d,g=e,c)j=n[4],k=n[5];else{var m=b._handleOut;j=f+m._x,k=g+m._y}}for(var q=0;q<m;q++)p(l[q]);b._closed&&m>0&&p(l[0])}return{_draw:function(b,c,d,e){var f=c.dontStart,g=c.dontFinish||c.clip,h=this.getStyle(),i=h.hasFill(),j=h.hasStroke(),k=h.getDashArray(),l=!ak.support.nativeDash&&j&&k&&k.length;function m(a){return k[(a%l+l)%l]}if(f||b.beginPath(),(i||j&&!l||g)&&(a(b,this,e),this._closed&&b.closePath()),!g&&(i||j)&&(this._setStyles(b,c,d),i&&(b.fill(h.getFillRule()),b.shadowColor="rgba(0,0,0,0)"),j)){if(l){f||b.beginPath();for(var n,o=new P(this,.25,32,!1,e),p=o.length,q=-h.getDashOffset(),r=0;q>0;)q-=m(r--)+m(r--);for(;q<p;)n=q+m(r++),(q>0||n>0)&&o.drawPart(b,Math.max(q,0),Math.max(n,0)),q=n+m(r++)}b.stroke()}},_drawSelected:function(b,c){b.beginPath(),a(b,this,c),b.stroke(),function(a,b,c,d){if(!(d<=0))for(var e,f,g=d/2,h=d-2,i=g-1,j=Array(6),k=0,l=b.length;k<l;k++){var m=b[k],n=m._selection;if(m._transformCoordinates(c,j),e=j[0],f=j[1],2&n&&p(2),4&n&&p(4),a.fillRect(e-g,f-g,d,d),h>0&&!(1&n)){var o=a.fillStyle;a.fillStyle="#ffffff",a.fillRect(e-i,f-i,h,h),a.fillStyle=o}}function p(b){var c=j[b],d=j[b+1];(e!=c||f!=d)&&(a.beginPath(),a.moveTo(e,f),a.lineTo(c,d),a.stroke(),a.beginPath(),a.arc(c,d,g,0,2*Math.PI,!0),a.fill())}}(b,this._segments,c,ak.settings.handleSize)}}},new function(){function a(a){var b=a._segments;if(!b.length)throw Error("Use a moveTo() command first");return b[b.length-1]}return{moveTo:function(){var a=this._segments;1===a.length&&this.removeSegment(0),a.length||this._add([new I(r.read(arguments))])},moveBy:function(){throw Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new I(r.read(arguments))])},cubicCurveTo:function(){var b=arguments,c=r.read(b),d=r.read(b),e=r.read(b),f=a(this);f.setHandleOut(c.subtract(f._point)),this._add([new I(e,d.subtract(e))])},quadraticCurveTo:function(){var b=arguments,c=r.read(b),d=r.read(b),e=a(this)._point;this.cubicCurveTo(c.add(e.subtract(c).multiply(1/3)),c.add(d.subtract(c).multiply(1/3)),d)},curveTo:function(){var b=arguments,c=r.read(b),d=r.read(b),e=j.pick(j.read(b),.5),f=1-e,g=a(this)._point,h=c.subtract(g.multiply(f*f)).subtract(d.multiply(e*e)).divide(2*e*f);if(h.isNaN())throw Error("Cannot put a curve through points with parameter = "+e);this.quadraticCurveTo(h,d)},arcTo:function(){var b,c,d,e,f,g=arguments,h=Math.abs,i=Math.sqrt,k=a(this),l=k._point,m=r.read(g),n=j.peek(g),o=j.pick(n,!0);if("boolean"==typeof o)var q=l.add(m).divide(2),b=q.add(q.subtract(l).rotate(o?-90:90));else if(2>=j.remain(g))b=m,m=r.read(g);else if(!l.equals(m)){var s=t.read(g),u=p.isZero;if(u(s.width)||u(s.height))return this.lineTo(m);var v=j.read(g),o=!!j.read(g),w=!!j.read(g),q=l.add(m).divide(2),z=l.subtract(q).rotate(-v),A=z.x,B=z.y,C=h(s.width),D=h(s.height),E=C*C,F=D*D,G=A*A,H=B*B,J=i(G/E+H/F);if(J>1&&(C*=J,D*=J,E=C*C,F=D*D),1e-12>h(J=(E*F-E*H-F*G)/(E*H+F*G))&&(J=0),J<0)throw Error("Cannot create an arc with the given arguments");c=new r(C*B/D,-D*A/C).multiply((w===o?-1:1)*i(J)).rotate(v).add(q),d=(e=(f=new x().translate(c).rotate(v).scale(C,D))._inverseTransform(l)).getDirectedAngle(f._inverseTransform(m)),!o&&d>0?d-=360:o&&d<0&&(d+=360)}if(b){var K=new y(l.add(b).divide(2),b.subtract(l).rotate(90),!0),L=new y(b.add(m).divide(2),m.subtract(b).rotate(90),!0),M=new y(l,m),N=M.getSide(b);if(!(c=K.intersect(L,!0))){if(!N)return this.lineTo(m);throw Error("Cannot create an arc with the given arguments")}d=(e=l.subtract(c)).getDirectedAngle(m.subtract(c));var O=M.getSide(c,!0);0===O?d=N*h(d):N===O&&(d+=d<0?360:-360)}if(d){for(var P=1e-7,Q=h(d),R=Q>=360?4:Math.ceil((Q-P)/90),S=d/R,T=S*Math.PI/360,U=4/3*Math.sin(T)/(1+Math.cos(T)),V=[],W=0;W<=R;W++){var z=m,X=null;if(W<R&&(X=e.rotate(90).multiply(U),f?(z=f._transformPoint(e),X=f._transformPoint(e.add(X)).subtract(z)):z=c.add(e)),W){var Y=e.rotate(-90).multiply(U);f&&(Y=f._transformPoint(e.add(Y)).subtract(z)),V.push(new I(z,Y,X))}else k.setHandleOut(X);e=e.rotate(S)}this._add(V)}},lineBy:function(){var b=r.read(arguments),c=a(this)._point;this.lineTo(c.add(b))},curveBy:function(){var b=arguments,c=r.read(b),d=r.read(b),e=j.read(b),f=a(this)._point;this.curveTo(f.add(c),f.add(d),e)},cubicCurveBy:function(){var b=arguments,c=r.read(b),d=r.read(b),e=r.read(b),f=a(this)._point;this.cubicCurveTo(f.add(c),f.add(d),f.add(e))},quadraticCurveBy:function(){var b=arguments,c=r.read(b),d=r.read(b),e=a(this)._point;this.quadraticCurveTo(e.add(c),e.add(d))},arcBy:function(){var b=arguments,c=a(this)._point,d=c.add(r.read(b)),e=j.pick(j.peek(b),!0);"boolean"==typeof e?this.arcTo(d,e):this.arcTo(d,c.add(r.read(b)))},closePath:function(a){this.setClosed(!0),this.join(this,a)}}},{_getBounds:function(a,b){return N[b.handle?"getHandleBounds":b.stroke?"getStrokeBounds":"getBounds"](this._segments,this._closed,this,a,b)},statics:{getBounds:function(a,b,c,d,e,f){var g=a[0];if(!g)return new v;var h=Array(6),i=g._transformCoordinates(d,Array(6)),j=i.slice(0,2),k=j.slice(),l=[,,];function m(a){a._transformCoordinates(d,h);for(var b=0;b<2;b++)K._addBounds(i[b],i[b+4],h[b+2],h[b],b,f?f[b]:0,j,k,l);var c=i;i=h,h=c}for(var n=1,o=a.length;n<o;n++)m(a[n]);return b&&m(g),new v(j[0],j[1],k[0]-j[0],k[1]-j[1])},getStrokeBounds:function(a,b,c,d,e){var f=c.getStyle(),g=f.hasStroke(),h=f.getStrokeWidth(),i=g&&c._getStrokeMatrix(d,e),j=g&&N._getStrokePadding(h,i),k=N.getBounds(a,b,c,d,e,j);if(!g)return k;var l=h/2,m=f.getStrokeJoin(),n=f.getStrokeCap(),o=f.getMiterLimit(),p=new v(new t(j));function q(a){k=k.include(a)}function r(a){k=k.unite(p.setCenter(a._point.transform(d)))}function s(a,b){"round"===b||a.isSmooth()?r(a):N._addBevelJoin(a,b,l,o,d,i,q)}function u(a,b){"round"===b?r(a):N._addSquareCap(a,b,l,d,i,q)}var w=a.length-(b?0:1);if(w>0){for(var x=1;x<w;x++)s(a[x],m);b?s(a[0],m):(u(a[0],n),u(a[a.length-1],n))}return k},_getStrokePadding:function(a,b){if(!b)return[a,a];var c=new r(a,0).transform(b),d=new r(0,a).transform(b),e=c.getAngleInRadians(),f=c.getLength(),g=d.getLength(),h=Math.sin(e),i=Math.cos(e),j=Math.tan(e),k=Math.atan2(g*j,f),l=Math.atan2(g,j*f);return[Math.abs(f*Math.cos(k)*i+g*Math.sin(k)*h),Math.abs(g*Math.sin(l)*i+f*Math.cos(l)*h)]},_addBevelJoin:function(a,b,c,d,e,f,g,h){var i=a.getCurve(),j=i.getPrevious(),k=i.getPoint1().transform(e),l=j.getNormalAtTime(1).multiply(c).transform(f),m=i.getNormalAtTime(0).multiply(c).transform(f),n=l.getDirectedAngle(m);if((n<0||n>=180)&&(l=l.negate(),m=m.negate()),h&&g(k),g(k.add(l)),"miter"===b){var o=new y(k.add(l),new r(-l.y,l.x),!0).intersect(new y(k.add(m),new r(-m.y,m.x),!0),!0);o&&k.getDistance(o)<=d*c&&g(o)}g(k.add(m))},_addSquareCap:function(a,b,c,d,e,f,g){var h=a._point.transform(d),i=a.getLocation(),j=i.getNormal().multiply(0===i.getTime()?c:-c).transform(e);"square"===b&&(g&&(f(h.subtract(j)),f(h.add(j))),h=h.add(j.rotate(-90))),f(h.add(j)),f(h.subtract(j))},getHandleBounds:function(a,b,c,d,e){var f,g,h=c.getStyle();if(e.stroke&&h.hasStroke()){var i=c._getStrokeMatrix(d,e),j=h.getStrokeWidth()/2,k=j;"miter"===h.getStrokeJoin()&&(k=j*h.getMiterLimit()),"square"===h.getStrokeCap()&&(k=Math.max(k,j*Math.SQRT2)),f=N._getStrokePadding(j,i),g=N._getStrokePadding(k,i)}for(var l=Array(6),m=1/0,n=-m,o=m,p=n,q=0,r=a.length;q<r;q++){a[q]._transformCoordinates(d,l);for(var s=0;s<6;s+=2){var t=s?f:g,u=t?t[0]:0,w=t?t[1]:0,x=l[s],y=l[s+1],z=x-u,A=x+u,B=y-w,C=y+w;z<m&&(m=z),A>n&&(n=A),B<o&&(o=B),C>p&&(p=C)}}return new v(m,o,n-m,p-o)}}});N.inject({statics:new function(){var a=[new I([-1,0],[0,.5522847498307936],[0,-.5522847498307936]),new I([0,-1],[-.5522847498307936,0],[.5522847498307936,0]),new I([1,0],[0,-.5522847498307936],[0,.5522847498307936]),new I([0,1],[.5522847498307936,0],[-.5522847498307936,0])];function b(a,b,c){var d=j.getNamed(c),e=new N(d&& !1==d.insert&&A.NO_INSERT);return e._add(a),e._closed=b,e.set(d,{insert:!0})}function c(c,d,e){for(var f=[,,,,],g=0;g<4;g++){var h=a[g];f[g]=new I(h._point.multiply(d).add(c),h._handleIn.multiply(d),h._handleOut.multiply(d))}return b(f,!0,e)}return{Line:function(){var a=arguments;return b([new I(r.readNamed(a,"from")),new I(r.readNamed(a,"to"))],!1,a)},Circle:function(){var a=arguments,b=r.readNamed(a,"center"),d=j.readNamed(a,"radius");return c(b,new t(d),a)},Rectangle:function(){var a,c=arguments,d=v.readNamed(c,"rectangle"),e=t.readNamed(c,"radius",0,{readNull:!0}),f=d.getBottomLeft(!0),g=d.getTopLeft(!0),h=d.getTopRight(!0),i=d.getBottomRight(!0);if(!e||e.isZero())a=[new I(f),new I(g),new I(h),new I(i)];else{var j=(e=t.min(e,d.getSize(!0).divide(2))).width,k=e.height,l=.5522847498307936*j,m=.5522847498307936*k;a=[new I(f.add(j,0),null,[-l,0]),new I(f.subtract(0,k),[0,m]),new I(g.add(0,k),null,[0,-m]),new I(g.add(j,0),[-l,0],null),new I(h.subtract(j,0),null,[l,0]),new I(h.add(0,k),[0,-m],null),new I(i.subtract(0,k),null,[0,m]),new I(i.subtract(j,0),[l,0])]}return b(a,!0,c)},RoundRectangle:"#Rectangle",Ellipse:function(){var a=arguments,b=D._readEllipse(a);return c(b.center,b.radius,a)},Oval:"#Ellipse",Arc:function(){var a=arguments,b=r.readNamed(a,"from"),c=r.readNamed(a,"through"),d=r.readNamed(a,"to"),e=j.getNamed(a),f=new N(e&& !1==e.insert&&A.NO_INSERT);return f.moveTo(b),f.arcTo(c,d),f.set(e)},RegularPolygon:function(){for(var a=arguments,c=r.readNamed(a,"center"),d=j.readNamed(a,"sides"),e=j.readNamed(a,"radius"),f=360/d,g=d%3==0,h=new r(0,g?-e:e),i=g?-1:.5,k=Array(d),l=0;l<d;l++)k[l]=new I(c.add(h.rotate((l+i)*f)));return b(k,!0,a)},Star:function(){for(var a=arguments,c=r.readNamed(a,"center"),d=2*j.readNamed(a,"points"),e=j.readNamed(a,"radius1"),f=j.readNamed(a,"radius2"),g=360/d,h=new r(0,-1),i=Array(d),k=0;k<d;k++)i[k]=new I(c.add(h.rotate(g*k).multiply(k%2?f:e)));return b(i,!0,a)}}}});var O=M.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(a){this._children=[],this._namedChildren={},this._initialize(a)||("string"==typeof a?this.setPathData(a):this.addChildren(Array.isArray(a)?a:arguments))},insertChildren:function a(b,c){var d=c,e=d[0];e&&"number"==typeof e[0]&&(d=[d]);for(var f=c.length-1;f>=0;f--){var g=d[f];d!==c||g instanceof N||(d=j.slice(d)),Array.isArray(g)?d[f]=new N({segments:g,insert:!1}):g instanceof O&&(d.splice.apply(d,[f,1].concat(g.removeChildren())),g.remove())}return a.base.call(this,b,d)},reduce:function a(b){for(var c=this._children,d=c.length-1;d>=0;d--){var e=c[d].reduce(b);e.isEmpty()&&e.remove()}if(!c.length){var e=new N(A.NO_INSERT);return e.copyAttributes(this),e.insertAbove(this),this.remove(),e}return a.base.call(this)},isClosed:function(){for(var a=this._children,b=0,c=a.length;b<c;b++)if(!a[b]._closed)return!1;return!0},setClosed:function(a){for(var b=this._children,c=0,d=b.length;c<d;c++)b[c].setClosed(a)},getFirstSegment:function(){var a=this.getFirstChild();return a&&a.getFirstSegment()},getLastSegment:function(){var a=this.getLastChild();return a&&a.getLastSegment()},getCurves:function(){for(var a=this._children,b=[],c=0,d=a.length;c<d;c++)j.push(b,a[c].getCurves());return b},getFirstCurve:function(){var a=this.getFirstChild();return a&&a.getFirstCurve()},getLastCurve:function(){var a=this.getLastChild();return a&&a.getLastCurve()},getArea:function(){for(var a=this._children,b=0,c=0,d=a.length;c<d;c++)b+=a[c].getArea();return b},getLength:function(){for(var a=this._children,b=0,c=0,d=a.length;c<d;c++)b+=a[c].getLength();return b},getPathData:function(a,b){for(var c=this._children,d=[],e=0,f=c.length;e<f;e++){var g=c[e],h=g._matrix;d.push(g.getPathData(a&&!h.isIdentity()?a.appended(h):a,b))}return d.join("")},_hitTestChildren:function a(b,c,d){return a.base.call(this,b,c.class===N||"path"===c.type?c:j.set({},c,{fill:!1}),d)},_draw:function(a,b,c,d){var e=this._children;if(e.length){b=b.extend({dontStart:!0,dontFinish:!0}),a.beginPath();for(var f=0,g=e.length;f<g;f++)e[f].draw(a,b,d);if(!b.clip){this._setStyles(a,b,c);var h=this._style;h.hasFill()&&(a.fill(h.getFillRule()),a.shadowColor="rgba(0,0,0,0)"),h.hasStroke()&&a.stroke()}}},_drawSelected:function(a,b,c){for(var d=this._children,e=0,f=d.length;e<f;e++){var g=d[e],h=g._matrix;c[g._id]||g._drawSelected(a,h.isIdentity()?b:b.appended(h))}}},new function(){function a(a,b){var c=a._children;if(b&&!c.length)throw Error("Use a moveTo() command first");return c[c.length-1]}return j.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(b){this[b]=function(){var c=a(this,!0);c[b].apply(c,arguments)}},{moveTo:function(){var b=a(this),c=b&&b.isEmpty()?b:new N(A.NO_INSERT);c!==b&&this.addChild(c),c.moveTo.apply(c,arguments)},moveBy:function(){var b=a(this,!0),c=b&&b.getLastSegment(),d=r.read(arguments);this.moveTo(c?d.add(c._point):d)},closePath:function(b){a(this,!0).closePath(b)}})},j.each(["reverse","flatten","simplify","smooth"],function(a){this[a]=function(b){for(var c,d=this._children,e=0,f=d.length;e<f;e++)c=d[e][a](b)||c;return c}},{}));M.inject(new function(){var a=Math.min,b=Math.max,c=Math.abs,d={unite:{"1":!0,"2":!0},intersect:{"2":!0},subtract:{"1":!0},exclude:{"1":!0,"-1":!0}};function e(a){return a._children||[a]}function f(a,b){var c=a.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(b){for(var d=e(c),f=0,g=d.length;f<g;f++){var a=d[f];a._closed||a.isEmpty()||(a.closePath(1e-12),a.getFirstSegment().setHandleIn(0,0),a.getLastSegment().setHandleOut(0,0))}c=c.resolveCrossings().reorient("nonzero"===c.getFillRule(),!0)}return c}function h(a,b,c,d,e){var f=new O(A.NO_INSERT);return f.addChildren(a,!0),f=f.reduce({simplify:b}),e&& !1==e.insert||f.insertAbove(d&&c.isSibling(d)&&c.getIndex()<d.getIndex()?d:c),f.copyAttributes(c,!0),f}function i(a){return a.hasOverlap()||a.isCrossing()}function k(a,b,c,g){if(g&&(!1==g.trace||g.stroke)&&/^(subtract|intersect)$/.test(c))return l(a,b,c);var k=f(a,!0),m=b&&a!==b&&f(b,!0),o=d[c];o[c]=!0,m&&(o.subtract||o.exclude)^(m.isClockwise()^k.isClockwise())&&m.reverse();var p,s=r(L.expand(k.getIntersections(m,i))),v=e(k),w=m&&e(m),x=[],y=[];function z(a){for(var b=0,c=a.length;b<c;b++){var d=a[b];j.push(x,d._segments),j.push(y,d.getCurves()),d._overlapsOnly=!0}}function A(a){for(var b=[],c=0,d=a&&a.length;c<d;c++)b.push(y[a[c]]);return b}if(s.length){z(v),w&&z(w);for(var B=Array(y.length),C=0,D=y.length;C<D;C++)B[C]=y[C].getValues();for(var E=n.findCurveBoundsCollisions(B,B,0,!0),F={},C=0;C<y.length;C++){var G=y[C],H=G._path._id;(F[H]=F[H]||{})[G.getIndex()]={hor:A(E[C].hor),ver:A(E[C].ver)}}for(var C=0,D=s.length;C<D;C++)t(s[C]._segment,k,m,F,o);for(var C=0,D=x.length;C<D;C++){var I=x[C],J=I._intersection;I._winding||t(I,k,m,F,o),J&&J._overlap||(I._path._overlapsOnly=!1)}p=u(x,o)}else p=q(w?v.concat(w):v.slice(),function(a){return!!o[a]});return h(p,!0,a,b,g)}function l(a,b,c){var d=f(a),e=f(b),g=d.getIntersections(e,i),j="subtract"===c,k="divide"===c,l={},m=[];function n(a){if(!l[a._id]&&(k||e.contains(a.getPointAt(a.getLength()/2))^j))return m.unshift(a),l[a._id]=!0}for(var o=g.length-1;o>=0;o--){var p=g[o].split();p&&(n(p)&&p.getFirstSegment().setHandleIn(0,0),d.getLastSegment().setHandleOut(0,0))}return n(d),h(m,!1,a,b)}function m(a,b){for(var c=a;c;){if(c===b)return;c=c._previous}for(;a._next&&a._next!==b;)a=a._next;if(!a._next){for(;b._previous;)b=b._previous;a._next=b,b._previous=a}}function o(a){for(var b=a.length-1;b>=0;b--)a[b].clearHandles()}function q(a,b,d){var e=a&&a.length;if(e){var f=j.each(a,function(a,b){this[a._id]={container:null,winding:a.isClockwise()?1:-1,index:b}},{}),g=a.slice().sort(function(a,b){return c(b.getArea())-c(a.getArea())}),h=g[0],i=n.findItemBoundsCollisions(g,null,p.GEOMETRIC_EPSILON);null==d&&(d=h.isClockwise());for(var k=0;k<e;k++){var l=g[k],m=f[l._id],o=0,q=i[k];if(q){for(var r=null,s=q.length-1;s>=0;s--)if(q[s]<k){r=r||l.getInteriorPoint();var t=g[q[s]];if(t.contains(r)){var u=f[t._id];o=u.winding,m.winding+=o,m.container=u.exclude?u.container:t;break}}}if(b(m.winding)===b(o))m.exclude=!0,a[m.index]=null;else{var v=m.container;l.setClockwise(v?!v.isClockwise():d)}}}return a}function r(a,b,c){var d,e,f,g=b&&[],h=!1,i=c||[],j=c&&{};function k(a){return a._path._id+"."+a._segment1._index}for(var l=(c&&c.length)-1;l>=0;l--){var n=c[l];n._path&&(j[k(n)]=!0)}for(var l=a.length-1;l>=0;l--){var p,q=a[l],r=q._time,s=r,t=b&&!b(q),n=q._curve;if(n&&(n!==e?(h=!n.hasHandles()||j&&j[k(n)],d=[],f=null,e=n):f>=1e-8&&(r/=f)),t){d&&d.push(q);continue}if(b&&g.unshift(q),f=s,r<1e-8)p=n._segment1;else if(r>.99999999)p=n._segment2;else{var u=n.divideAtTime(r,!0);h&&i.push(n,u),p=u._segment1;for(var v=d.length-1;v>=0;v--){var w=d[v];w._time=(w._time-r)/(1-r)}}q._setSegment(p);var x=p._intersection,y=q._intersection;if(x){m(x,y);for(var z=x;z;)m(z._intersection,x),z=z._next}else p._intersection=y}return c||o(i),g||a}function s(d,e,f,g,h){var i,j,k=Array.isArray(e)?e:e[f?"hor":"ver"],l=f?1:0,m=1^l,n=[d.x,d.y],o=n[l],p=n[m],q=o-1e-9,r=o+1e-9,t=0,u=0,v=0,w=0,x=!1,y=!1,z=1,A=[];function B(c){var j=c[m+0],k=c[m+6];if(!(p<a(j,k)||p>b(j,k))){var n=c[l+0],t=c[l+2],u=c[l+4],y=c[l+6];if(j===k){(n<r&&y>q||y<r&&n>q)&&(x=!0);return}var B=p===j?0:p===k?1:q>b(n,t,u,y)||r<a(n,t,u,y)?1:K.solveCubic(c,m,p,A,0,1)>0?A[0]:1,C=0===B?n:1===B?y:K.getPoint(c,B)[f?"y":"x"],D=j>k?1:-1,E=i[m]>i[m+6]?1:-1,F=i[l+6];return p!==j?(C<q?v+=D:C>r?w+=D:x=!0,C>o-1e-6&&C<o+1e-6&&(z/=2)):(D!==E?n<q?v+=D:n>r&&(w+=D):n!=F&&(F<r&&C>r?(w+=D,x=!0):F>q&&C<q&&(v+=D,x=!0)),z/=4),i=c,!h&&C>q&&C<r&&0===K.getTangent(c,B)[f?"x":"y"]&&s(d,e,!f,g,!0)}}function C(c){var d=c[m+0],e=c[m+2],g=c[m+4],h=c[m+6];if(p<=b(d,e,g,h)&&p>=a(d,e,g,h)){for(var i,j=c[l+0],k=c[l+2],n=c[l+4],o=c[l+6],s=q>b(j,k,n,o)||r<a(j,k,n,o)?[c]:K.getMonoCurves(c,f),t=0,u=s.length;t<u;t++)if(i=B(s[t]))return i}}for(var D=0,E=k.length;D<E;D++){var F,G=k[D],H=G._path,I=G.getValues();if((!D||k[D-1]._path!==H)&&(i=null,H._closed||(j=K.getValues(H.getLastCurve().getSegment2(),G.getSegment1(),null,!g))[m]===j[m+6]||(i=j),!i)){i=I;for(var J=H.getLastCurve();J&&J!==G;){var L=J.getValues();if(L[m]!==L[m+6]){i=L;break}J=J.getPrevious()}}if(F=C(I))return F;if(D+1===E||k[D+1]._path!==H){if(j&&(F=C(j)))return F;!x||v||w||(v=w=H.isClockwise(g)^f?1:-1),t+=v,u+=w,v=w=0,x&&(y=!0,x=!1),j=null}}return t=c(t),u=c(u),{winding:b(t,u),windingL:t,windingR:u,quality:z,onPath:y}}function t(a,b,d,e,f){var g,h=[],i=a,j=0;do{var k=a.getCurve();if(k){var l=k.getLength();h.push({segment:a,curve:k,length:l}),j+=l}a=a.getNext()}while(a&&!a._intersection&&a!==i);for(var m=[.5,.25,.75],g={winding:0,quality:-1},n=.001,o=1-n,q=0;q<m.length&&g.quality<.5;q++)for(var l=j*m[q],r=0,t=h.length;r<t;r++){var u=h[r],v=u.length;if(l<=v){var k=u.curve,w=k._path,x=w._parent,y=x instanceof O?x:w,z=p.clamp(k.getTimeAt(l),n,o),A=k.getPointAtTime(z),B=c(k.getTangentAtTime(z).y)<Math.SQRT1_2,C=null;if(f.subtract&&d){var D=(y===b?d:b)._getWinding(A,B,!0);if(y===b&&D.winding||y===d&&!D.winding){if(D.quality<1)continue;C={winding:0,quality:1}}}(C=C||s(A,e[w._id][k.getIndex()],B,!0)).quality>g.quality&&(g=C);break}l-=v}for(var r=h.length-1;r>=0;r--)h[r].segment._winding=g}function u(a,b){var c,d=[];function e(a){var c;return!!(a&&!a._visited&&(!b||b[(c=a._winding||{}).winding]&&!(b.unite&&2===c.winding&&c.windingL&&c.windingR)))}function f(a){if(a){for(var b=0,d=c.length;b<d;b++)if(a===c[b])return!0}return!1}function g(a){for(var b=a._segments,c=0,d=b.length;c<d;c++)b[c]._visited=!0}function h(a,b){var d=a._intersection,g=d,h=[];function i(d,g){for(;d&&d!==g;){var i=d._segment,j=i&&i._path;if(j){var k=i.getNext()||j.getFirstSegment(),l=k._intersection;i!==a&&(f(i)||f(k)||k&&e(i)&&(e(k)||l&&e(l._segment)))&&h.push(i),b&&c.push(i)}d=d._next}}if(b&&(c=[a]),d){for(i(d);d&&d._previous;)d=d._previous;i(d,g)}return h}a.sort(function(a,b){var c=a._intersection,d=b._intersection,e=!!(c&&c._overlap),f=!!(d&&d._overlap),g=a._path,h=b._path;return e^f?e?1:-1:!c^ !d?c?1:-1:g!==h?g._id-h._id:a._index-b._index});for(var i=0,j=a.length;i<j;i++){var k,l,m,n=a[i],o=e(n),p=null,q=!1,r=!0,s=[];if(o&&n._path._overlapsOnly){var t=n._path,u=n._intersection._segment._path;t.compare(u)&&(t.getArea()&&d.push(t.clone(!1)),g(t),g(u),o=!1)}for(;o;){var v=!p,w=h(n,v),x=w.shift(),q=!v&&(f(n)||f(x)),y=!q&&x;if(v&&(p=new N(A.NO_INSERT),k=null),q){(n.isFirst()||n.isLast())&&(r=n._path._closed),n._visited=!0;break}if(y&&k&&(s.push(k),k=null),k||(y&&w.push(n),k={start:p._segments.length,crossings:w,visited:l=[],handleIn:m}),y&&(n=x),!e(n)){p.removeSegments(k.start);for(var z=0,B=l.length;z<B;z++)l[z]._visited=!1;l.length=0;do(n=k&&k.crossings.shift())&&n._path||(n=null,(k=s.pop())&&(l=k.visited,m=k.handleIn));while(k&&!e(n));if(!n)break}var C=n.getNext();p.add(new I(n._point,m,C&&n._handleOut)),n._visited=!0,l.push(n),n=C||n._path.getFirstSegment(),m=C&&C._handleIn}q&&(r&&(p.getFirstSegment().setHandleIn(m),p.setClosed(r)),0!==p.getArea()&&d.push(p))}return d}return{_getWinding:function(a,b,c){return s(a,this.getCurves(),b,c)},unite:function(a,b){return k(this,a,"unite",b)},intersect:function(a,b){return k(this,a,"intersect",b)},subtract:function(a,b){return k(this,a,"subtract",b)},exclude:function(a,b){return k(this,a,"exclude",b)},divide:function(a,b){return b&&(!1==b.trace||b.stroke)?l(this,a,"divide"):h([this.subtract(a,b),this.intersect(a,b)],!0,this,a,b)},resolveCrossings:function(){var a=this._children,b=a||[this];function c(a,b){var c=a&&a._intersection;return c&&c._overlap&&c._path===b}var d=!1,e=!1,f=this.getIntersections(null,function(a){return a.hasOverlap()&&(d=!0)||a.isCrossing()&&(e=!0)}),g=d&&e&&[];if(f=L.expand(f),d)for(var h=r(f,function(a){return a.hasOverlap()},g),i=h.length-1;i>=0;i--){var k=h[i],l=k._path,m=k._segment,n=m.getPrevious(),p=m.getNext();c(n,l)&&c(p,l)&&(m.remove(),n._handleOut._set(0,0),p._handleIn._set(0,0),n===m||n.getCurve().hasLength()||(p._handleIn.set(n._handleIn),n.remove()))}e&&(r(f,d&&function(a){var b=a.getCurve(),c=a.getSegment(),d=a._intersection,e=d._curve,f=d._segment;if(b&&e&&b._path&&e._path)return!0;c&&(c._intersection=null),f&&(f._intersection=null)},g),g&&o(g),b=u(j.each(b,function(a){j.push(this,a._segments)},[])));var q,s=b.length;return s>1&&a?(b!==a&&this.setChildren(b),q=this):1!==s||a||(b[0]!==this&&this.setSegments(b[0].removeSegments()),q=this),q||((q=new O(A.NO_INSERT)).addChildren(b),(q=q.reduce()).copyAttributes(this),this.replaceWith(q)),q},reorient:function(a,b){var c=this._children;return c&&c.length?this.setChildren(q(this.removeChildren(),function(b){return!!(a?b:1&b)},b)):b!==g&&this.setClockwise(b),this},getInteriorPoint:function(){var c=this.getBounds().getCenter(!0);if(!this.contains(c)){for(var d=this.getCurves(),e=c.y,f=[],g=[],h=0,i=d.length;h<i;h++){var j=d[h].getValues(),k=j[1],l=j[3],m=j[5],n=j[7];if(e>=a(k,l,m,n)&&e<=b(k,l,m,n))for(var o=K.getMonoCurves(j),p=0,q=o.length;p<q;p++){var r=o[p],s=r[1],t=r[7];if(s!==t&&(e>=s&&e<=t||e>=t&&e<=s)){var u=e===s?r[0]:e===t?r[6]:1===K.solveCubic(r,1,e,g,0,1)?K.getPoint(r,g[0]).x:(r[0]+r[6])/2;f.push(u)}}}f.length>1&&(f.sort(function(a,b){return a-b}),c.x=(f[0]+f[1])/2)}return c}}});var P=j.extend({_class:"PathFlattener",initialize:function(a,b,c,d,e){var f,g=[],h=[],i=0,j=1/(c||32),k=a._segments,l=k[0];function m(a,b){var c=K.getValues(a,b,e);g.push(c),n(c,a._index,0,1)}function n(a,c,e,f){if(!(f-e>j)||d&&K.isStraight(a)||K.isFlatEnough(a,b||.25)){var g=a[6]-a[0],k=a[7]-a[1],l=Math.sqrt(g*g+k*k);l>0&&(i+=l,h.push({offset:i,curve:a,index:c,time:f}))}else{var m=K.subdivide(a,.5),o=(e+f)/2;n(m[0],c,e,o),n(m[1],c,o,f)}}for(var o=1,p=k.length;o<p;o++)m(l,f=k[o]),l=f;a._closed&&m(f||l,k[0]),this.curves=g,this.parts=h,this.length=i,this.index=0},_get:function(a){for(var b,c=this.parts,d=c.length,e=this.index;b=e,e&&!(c[--e].offset<a););for(;b<d;b++){var f=c[b];if(f.offset>=a){this.index=b;var g=c[b-1],h=g&&g.index===f.index?g.time:0,i=g?g.offset:0;return{index:f.index,time:h+(f.time-h)*(a-i)/(f.offset-i)}}}return{index:c[d-1].index,time:1}},drawPart:function(a,b,c){for(var d=this._get(b),e=this._get(c),f=d.index,g=e.index;f<=g;f++){var h=K.getPart(this.curves[f],f===d.index?d.time:0,f===e.index?e.time:1);f===d.index&&a.moveTo(h[0],h[1]),a.bezierCurveTo.apply(a,h.slice(2))}}},j.each(K._evaluateMethods,function(a){this[a+"At"]=function(b){var c=this._get(b);return K[a](this.curves[c.index],c.time)}},{})),Q=j.extend({initialize:function(a){for(var b,c=this.points=[],d=a._segments,e=a._closed,f=0,g=d.length;f<g;f++){var h=d[f].point;b&&b.equals(h)||c.push(b=h.clone())}e&&(c.unshift(c[c.length-1]),c.push(c[1])),this.closed=e},fit:function(a){var b=this.points,c=b.length,d=null;return c>0&&(d=[new I(b[0])],c>1&&(this.fitCubic(d,a,0,c-1,b[1].subtract(b[0]),b[c-2].subtract(b[c-1])),this.closed&&(d.shift(),d.pop()))),d},fitCubic:function(a,b,c,d,e,f){var g=this.points;if(d-c==1){var h=g[c],i=g[d],j=h.getDistance(i)/3;this.addCurve(a,[h,h.add(e.normalize(j)),i.add(f.normalize(j)),i]);return}for(var k,l=this.chordLengthParameterize(c,d),m=Math.max(b,b*b),n=!0,o=0;o<=4;o++){var p=this.generateBezier(c,d,l,e,f),q=this.findMaxError(c,d,p,l);if(q.error<b&&n){this.addCurve(a,p);return}if(k=q.index,q.error>=m)break;n=this.reparameterize(c,d,l,p),m=q.error}var r=g[k-1].subtract(g[k+1]);this.fitCubic(a,b,c,k,e,r),this.fitCubic(a,b,k,d,r.negate(),f)},addCurve:function(a,b){a[a.length-1].setHandleOut(b[1].subtract(b[0])),a.push(new I(b[3],b[2].subtract(b[3])))},generateBezier:function(a,b,c,d,e){for(var f=Math.abs,g=this.points,h=g[a],i=g[b],j=[[0,0],[0,0]],k=[0,0],l=0,m=b-a+1;l<m;l++){var n=c[l],o=1-n,p=3*n*o,q=o*o*o,r=p*o,s=p*n,t=n*n*n,u=d.normalize(r),v=e.normalize(s),w=g[a+l].subtract(h.multiply(q+r)).subtract(i.multiply(s+t));j[0][0]+=u.dot(u),j[0][1]+=u.dot(v),j[1][0]=j[0][1],j[1][1]+=v.dot(v),k[0]+=u.dot(w),k[1]+=v.dot(w)}var x,y,z=j[0][0]*j[1][1]-j[1][0]*j[0][1];if(f(z)>1e-12){var A=j[0][0]*k[1]-j[1][0]*k[0],B=k[0]*j[1][1]-k[1]*j[0][1];x=B/z,y=A/z}else{var C=j[0][0]+j[0][1],D=j[1][0]+j[1][1];x=y=f(C)>1e-12?k[0]/C:f(D)>1e-12?k[1]/D:0}var E,F,G=i.getDistance(h),H=1e-12*G;if(x<H||y<H)x=y=G/3;else{var I=i.subtract(h);E=d.normalize(x),F=e.normalize(y),E.dot(I)-F.dot(I)>G*G&&(x=y=G/3,E=F=null)}return[h,h.add(E||d.normalize(x)),i.add(F||e.normalize(y)),i]},reparameterize:function(a,b,c,d){for(var e=a;e<=b;e++)c[e-a]=this.findRoot(d,this.points[e],c[e-a]);for(var e=1,f=c.length;e<f;e++)if(c[e]<=c[e-1])return!1;return!0},findRoot:function(a,b,c){for(var d=[],e=[],f=0;f<=2;f++)d[f]=a[f+1].subtract(a[f]).multiply(3);for(var f=0;f<=1;f++)e[f]=d[f+1].subtract(d[f]).multiply(2);var g=this.evaluate(3,a,c),h=this.evaluate(2,d,c),i=this.evaluate(1,e,c),j=g.subtract(b),k=h.dot(h)+j.dot(i);return p.isMachineZero(k)?c:c-j.dot(h)/k},evaluate:function(a,b,c){for(var d=b.slice(),e=1;e<=a;e++)for(var f=0;f<=a-e;f++)d[f]=d[f].multiply(1-c).add(d[f+1].multiply(c));return d[0]},chordLengthParameterize:function(a,b){for(var c=[0],d=a+1;d<=b;d++)c[d-a]=c[d-a-1]+this.points[d].getDistance(this.points[d-1]);for(var d=1,e=b-a;d<=e;d++)c[d]/=c[e];return c},findMaxError:function(a,b,c,d){for(var e=Math.floor((b-a+1)/2),f=0,g=a+1;g<b;g++){var h=this.evaluate(3,c,d[g-a]).subtract(this.points[g]),i=h.x*h.x+h.y*h.y;i>=f&&(f=i,e=g)}return{error:f,index:e}}}),R=A.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(a){this._content="",this._lines=[];var b=a&&j.isPlainObject(a)&&g===a.x&&g===a.y;this._initialize(b&&a,!b&&r.read(arguments))},_equals:function(a){return this._content===a._content},copyContent:function(a){this.setContent(a._content)},getContent:function(){return this._content},setContent:function(a){this._content=""+a,this._lines=this._content.split(/\r\n|\n|\r/mg),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),S=R.extend({_class:"PointText",initialize:function(){R.apply(this,arguments)},getPoint:function(){var a=this._matrix.getTranslation();return new s(a.x,a.y,this,"setPoint")},setPoint:function(){var a=r.read(arguments);this.translate(a.subtract(this._matrix.getTranslation()))},_draw:function(a,b,c){if(this._content){this._setStyles(a,b,c);var d=this._lines,e=this._style,f=e.hasFill(),g=e.hasStroke(),h=e.getLeading(),i=a.shadowColor;a.font=e.getFontStyle(),a.textAlign=e.getJustification();for(var j=0,k=d.length;j<k;j++){a.shadowColor=i;var l=d[j];f&&(a.fillText(l,0,0),a.shadowColor="rgba(0,0,0,0)"),g&&a.strokeText(l,0,0),a.translate(0,h)}}},_getBounds:function(a,b){var c=this._style,d=this._lines,e=d.length,f=c.getJustification(),g=c.getLeading(),h=this.getView().getTextWidth(c.getFontStyle(),d),i=0;"left"!==f&&(i-=h/("center"===f?2:1));var j=new v(i,e?-.75*g:0,h,e*g);return a?a._transformBounds(j,j):j}}),T=j.extend(new function(){var a,b={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},c={},d={transparent:[0,0,0,0]},e=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],f={"rgb-hsb":function(a,b,c){var d=Math.max(a,b,c),e=d-Math.min(a,b,c);return[0===e?0:(d==a?(b-c)/e+(b<c?6:0):d==b?(c-a)/e+2:(a-b)/e+4)*60,0===d?0:e/d,d]},"hsb-rgb":function(a,b,c){var d=Math.floor(a=(a/60%6+6)%6),f=a-d,d=e[d],g=[c,c*(1-b),c*(1-b*f),c*(1-b*(1-f))];return[g[d[0]],g[d[1]],g[d[2]]]},"rgb-hsl":function(a,b,c){var d=Math.max(a,b,c),e=Math.min(a,b,c),f=d-e,g=0===f,h=(d+e)/2;return[g?0:(d==a?(b-c)/f+(b<c?6:0):d==b?(c-a)/f+2:(a-b)/f+4)*60,g?0:h<.5?f/(d+e):f/(2-d-e),h]},"hsl-rgb":function(a,b,c){if(a=(a/360%1+1)%1,0===b)return[c,c,c];for(var d=[a+1/3,a,a-1/3],e=c<.5?c*(1+b):c+b-c*b,f=2*c-e,g=[],h=0;h<3;h++){var i=d[h];i<0&&(i+=1),i>1&&(i-=1),g[h]=6*i<1?f+(e-f)*6*i:2*i<1?e:3*i<2?f+(e-f)*(2/3-i)*6:f}return g},"rgb-gray":function(a,b,c){return[.2989*a+.587*b+.114*c]},"gray-rgb":function(a){return[a,a,a]},"gray-hsb":function(a){return[0,0,a]},"gray-hsl":function(a){return[0,0,a]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return j.each(b,function(a,d){c[d]=[],j.each(a,function(a,e){var f=j.capitalize(a),g=/^(hue|saturation)$/.test(a),h=c[d][e]="gradient"===d?"gradient"===a?function(a){var b=this._components[0];return a=U.read(Array.isArray(a)?a:arguments,0,{readNull:!0}),b!==a&&(b&&b._removeOwner(this),a&&a._addOwner(this)),a}:function(){return r.read(arguments,0,{readNull:"highlight"===a,clone:!0})}:function(a){return null==a||isNaN(a)?0:+a};this["get"+f]=function(){return this._type===d||g&&/^hs[bl]$/.test(this._type)?this._components[e]:this._convert(d)[e]},this["set"+f]=function(a){this._type===d||g&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(d),this._properties=b[d],this._type=d),this._components[e]=h.call(this,a),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function e(f){var g,i,k,l,m=arguments,n=this.__read,o=0;Array.isArray(f)&&(f=(m=f)[0]);var p=null!=f&&typeof f;if("string"===p&&f in b&&(g=f,Array.isArray(f=m[1])?(i=f,k=m[2]):(n&&(o=1),m=j.slice(m,1),p=typeof f)),!i){if(l="number"===p?m:"object"===p&&null!=f.length?f:null){g||(g=l.length>=3?"rgb":"gray");var q=b[g].length;k=l[q],n&&(o+=l===arguments?q+(null!=k?1:0):1),l.length>q&&(l=j.slice(l,0,q))}else if("string"===p){var r=function(b){var c,e=b.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||b.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),f="rgb";if(e){var g=e[4]?4:3;c=Array(g);for(var i=0;i<g;i++){var j=e[i+1];c[i]=parseInt(1==j.length?j+j:j,16)/255}}else if(e=b.match(/^(rgb|hsl)a?\((.*)\)$/)){f=e[1],c=e[2].trim().split(/[,\s]+/g);for(var k="hsl"===f,i=0,l=Math.min(c.length,4);i<l;i++){var m=c[i],j=parseFloat(m);k?0===i?j*=({turn:360,rad:180/Math.PI,grad:.9})[m.match(/([a-z]*)$/)[1]]||1:i<3&&(j/=100):i<3&&(j/=/%$/.test(m)?100:255),c[i]=j}}else{var n=d[b];if(!n){if(h){a||((a=ag.getContext(1,1)).globalCompositeOperation="copy"),a.fillStyle="rgba(0,0,0,0)",a.fillStyle=b,a.fillRect(0,0,1,1);var o=a.getImageData(0,0,1,1).data;n=d[b]=[o[0]/255,o[1]/255,o[2]/255]}else n=[0,0,0]}c=n.slice()}return[f,c]}(f);g=r[0],i=r[1],4===i.length&&(k=i[3],i.length--)}else if("object"===p){if(f.constructor===e){if(g=f._type,i=f._components.slice(),k=f._alpha,"gradient"===g)for(var s=1,t=i.length;s<t;s++){var u=i[s];u&&(i[s]=u.clone())}}else if(f.constructor===U)g="gradient",l=m;else{var v=b[g="hue"in f?"lightness"in f?"hsl":"hsb":"gradient"in f||"stops"in f||"radial"in f?"gradient":"gray"in f?"gray":"rgb"],w=c[g];this._components=i=[];for(var s=0,t=v.length;s<t;s++){var x=f[v[s]];null==x&&!s&&"gradient"===g&&"stops"in f&&(x={stops:f.stops,radial:f.radial}),null!=(x=w[s].call(this,x))&&(i[s]=x)}k=f.alpha}}n&&g&&(o=1)}if(this._type=g||"rgb",!i){this._components=i=[];for(var w=c[this._type],s=0,t=w.length;s<t;s++){var x=w[s].call(this,l&&l[s]);null!=x&&(i[s]=x)}}return this._components=i,this._properties=b[this._type],this._alpha=k,n&&(this.__read=o),this},set:"#initialize",_serialize:function(a,b){var c=this.getComponents();return j.serialize(/^(gray|rgb)$/.test(this._type)?c:[this._type].concat(c),a,!0,b)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(a){var b;return this._type===a?this._components.slice():(b=f[this._type+"-"+a])?b.apply(this,this._components):f["rgb-"+a].apply(this,f[this._type+"-rgb"].apply(this,this._components))},convert:function(a){return new T(a,this._convert(a),this._alpha)},getType:function(){return this._type},setType:function(a){this._components=this._convert(a),this._properties=b[a],this._type=a},getComponents:function(){var a=this._components.slice();return null!=this._alpha&&a.push(this._alpha),a},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(a){this._alpha=null==a?null:Math.min(Math.max(a,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(a){var b=j.isPlainValue(a,!0)?T.read(arguments):a;return b===this||b&&this._class===b._class&&this._type===b._type&&this.getAlpha()===b.getAlpha()&&j.equals(this._components,b._components)||!1},toString:function(){for(var a=this._properties,b=[],c="gradient"===this._type,d=o.instance,e=0,f=a.length;e<f;e++){var g=this._components[e];null!=g&&b.push(a[e]+": "+(c?g:d.number(g)))}return null!=this._alpha&&b.push("alpha: "+d.number(this._alpha)),"{ "+b.join(", ")+" }"},toCSS:function(a){var b=this._convert("rgb"),c=a||null==this._alpha?1:this._alpha;function d(a){return Math.round((a<0?0:a>1?1:a)*255)}return b=[d(b[0]),d(b[1]),d(b[2])],c<1&&b.push(c<0?0:c),a?"#"+(16777216+(b[0]<<16)+(b[1]<<8)+b[2]).toString(16).slice(1):(4==b.length?"rgba(":"rgb(")+b.join(",")+")"},toCanvasStyle:function(a,b){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var c,d=this._components,e=d[0],f=e._stops,g=d[1],h=d[2],i=d[3],j=b&&b.inverted();if(j&&(g=j._transformPoint(g),h=j._transformPoint(h),i&&(i=j._transformPoint(i))),e._radial){var k=h.getDistance(g);if(i){var l=i.subtract(g);l.getLength()>k&&(i=g.add(l.normalize(k-.1)))}var m=i||g;c=a.createRadialGradient(m.x,m.y,0,g.x,g.y,k)}else c=a.createLinearGradient(g.x,g.y,h.x,h.y);for(var n=0,o=f.length;n<o;n++){var p=f[n],q=p._offset;c.addColorStop(null==q?n/(o-1):q,p._color.toCanvasStyle())}return this._canvasStyle=c},transform:function(a){if("gradient"===this._type){for(var b=this._components,c=1,d=b.length;c<d;c++){var e=b[c];a._transformPoint(e,e,!0)}this._changed()}},statics:{_types:b,random:function(){var a=Math.random;return new T(a(),a(),a())},_setOwner:function(a,b,c){return a&&(a._owner&&b&&a._owner!==b&&(a=a.clone()),!a._owner^ !b&&(a._owner=b||null,a._setter=c||null)),a}}})},new function(){return j.each({add:function(a,b){return a+b},subtract:function(a,b){return a-b},multiply:function(a,b){return a*b},divide:function(a,b){return a/b}},function(a,b){this[b]=function(b){b=T.read(arguments);for(var c=this._type,d=this._components,e=b._convert(c),f=0,g=d.length;f<g;f++)e[f]=a(d[f],e[f]);return new T(c,e,null!=this._alpha?a(this._alpha,b.getAlpha()):null)}},{})}),U=j.extend({_class:"Gradient",initialize:function(a,b){this._id=q.get(),a&&j.isPlainObject(a)&&(this.set(a),a=b=null),null==this._stops&&this.setStops(a||["white","black"]),null==this._radial&&this.setRadial("string"==typeof b&&"radial"===b||b||!1)},_serialize:function(a,b){return b.add(this,function(){return j.serialize([this._stops,this._radial],a,!0,b)})},_changed:function(){for(var a=0,b=this._owners&&this._owners.length;a<b;a++)this._owners[a]._changed()},_addOwner:function(a){this._owners||(this._owners=[]),this._owners.push(a)},_removeOwner:function(a){var b=this._owners?this._owners.indexOf(a):-1;-1==b||(this._owners.splice(b,1),this._owners.length||(this._owners=g))},clone:function(){for(var a=[],b=0,c=this._stops.length;b<c;b++)a[b]=this._stops[b].clone();return new U(a,this._radial)},getStops:function(){return this._stops},setStops:function(a){if(a.length<2)throw Error("Gradient stop list needs to contain at least two stops.");var b=this._stops;if(b)for(var c=0,d=b.length;c<d;c++)b[c]._owner=g;b=this._stops=V.readList(a,0,{clone:!0});for(var c=0,d=b.length;c<d;c++)b[c]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(a){this._radial=a,this._changed()},equals:function(a){if(a===this)return!0;if(a&&this._class===a._class){var b=this._stops,c=a._stops,d=b.length;if(d===c.length){for(var e=0;e<d;e++)if(!b[e].equals(c[e]))return!1;return!0}}return!1}}),V=j.extend({_class:"GradientStop",initialize:function(a,b){var c=a,d=b;"object"==typeof a&&b===g&&(Array.isArray(a)&&"number"!=typeof a[0]?(c=a[0],d=a[1]):("color"in a||"offset"in a||"rampPoint"in a)&&(c=a.color,d=a.offset||a.rampPoint||0)),this.setColor(c),this.setOffset(d)},clone:function(){return new V(this._color.clone(),this._offset)},_serialize:function(a,b){var c=this._color,d=this._offset;return j.serialize(null==d?[c]:[c,d],a,!0,b)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(a){this._offset=a,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){T._setOwner(this._color,null),this._color=T._setOwner(T.read(arguments,0),this,"setColor"),this._changed()},equals:function(a){return a===this||a&&this._class===a._class&&this._color.equals(a._color)&&this._offset==a._offset||!1}}),W=j.extend(new function(){var a={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new r,selectedColor:null},b=j.set({},a,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),c=j.set({},b,{fillColor:new T}),d={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},e={beans:!0},f={_class:"Style",beans:!0,initialize:function(d,e,f){this._values={},this._owner=e,this._project=e&&e._project||f||ak.project,this._defaults=!e||e instanceof B?b:e instanceof R?c:a,d&&this.set(d)}};return j.each(b,function(a,b){var c=/Color$/.test(b),h="shadowOffset"===b,i=j.capitalize(b),k=d[b],l="set"+i,m="get"+i;f[l]=function(a){var d=this._owner,e=d&&d._children,f=e&&e.length>0&&!(d instanceof O);if(f)for(var g=0,h=e.length;g<h;g++)e[g]._style[l](a);if(("selectedColor"===b||!f)&&b in this._defaults){var i=this._values[b];i!==a&&(c&&(i&&(T._setOwner(i,null),i._canvasStyle=null),a&&a.constructor===T&&(a=T._setOwner(a,d,f&&l))),this._values[b]=a,d&&d._changed(k||129))}},f[m]=function(a){var d,e=this._owner,f=e&&e._children,i=f&&f.length>0&&!(e instanceof O);if(i&&!a)for(var k=0,n=f.length;k<n;k++){var o=f[k]._style[m]();if(k){if(!j.equals(d,o))return}else d=o}else if(b in this._defaults){var d=this._values[b];if(d===g)(d=this._defaults[b])&&d.clone&&(d=d.clone());else{var p=c?T:h?r:null;p&&!(d&&d.constructor===p)&&(this._values[b]=d=p.read([d],0,{readNull:!0,clone:!0}))}}return d&&c&&(d=T._setOwner(d,e,i&&l)),d},e[m]=function(a){return this._style[m](a)},e[l]=function(a){this._style[l](a)}}),j.each({Font:"FontFamily",WindingRule:"FillRule"},function(a,b){var c="get"+b,d="set"+b;f[c]=e[c]="#get"+a,f[d]=e[d]="#set"+a}),A.inject(e),f},{set:function(a){var b=a instanceof W,c=b?a._values:a;if(c){for(var d in c)if(d in this._defaults){var e=c[d];this[d]=e&&b&&e.clone?e.clone():e}}},equals:function(a){function b(a,b,c){var d=a._values,e=b._values,f=b._defaults;for(var h in d){var i=d[h],k=e[h];if(!(c&&h in e)&&!j.equals(i,k===g?f[h]:k))return!1}return!0}return a===this||a&&this._class===a._class&&b(this,a)&&b(a,this,!0)||!1},_dispose:function(){var a;(a=this.getFillColor())&&(a._canvasStyle=null),(a=this.getStrokeColor())&&(a._canvasStyle=null),(a=this.getShadowColor())&&(a._canvasStyle=null)},hasFill:function(){var a=this.getFillColor();return!!a&&a.alpha>0},hasStroke:function(){var a=this.getStrokeColor();return!!a&&a.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var a=this.getShadowColor();return!!a&&a.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var a=this.getFontSize();return this.getFontWeight()+" "+a+(/[a-z]/i.test(a+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function a(){var b=a.base.call(this),c=this.getFontSize();return/pt|em|%|px/.test(c)&&(c=this.getView().getPixelSize(c)),null!=b?b:1.2*c}}),X=new function(){function a(a,b,c,d){for(var e=["","webkit","moz","Moz","ms","o"],f=b[0].toUpperCase()+b.substring(1),g=0;g<6;g++){var h=e[g],i=h?h+f:b;if(i in a){if(!c)return a[i];a[i]=d;break}}}return{getStyles:function(a){var b=a&&9!==a.nodeType?a.ownerDocument:a,c=b&&b.defaultView;return c&&c.getComputedStyle(a,"")},getBounds:function(a,b){var c,d=a.ownerDocument,e=d.body,f=d.documentElement;try{c=a.getBoundingClientRect()}catch(g){c={left:0,top:0,width:0,height:0}}var h=c.left-(f.clientLeft||e.clientLeft||0),i=c.top-(f.clientTop||e.clientTop||0);if(!b){var j=d.defaultView;h+=j.pageXOffset||f.scrollLeft||e.scrollLeft,i+=j.pageYOffset||f.scrollTop||e.scrollTop}return new v(h,i,c.width,c.height)},getViewportBounds:function(a){var b=a.ownerDocument,c=b.defaultView,d=b.documentElement;return new v(0,0,c.innerWidth||d.clientWidth,c.innerHeight||d.clientHeight)},getOffset:function(a,b){return X.getBounds(a,b).getPoint()},getSize:function(a){return X.getBounds(a,!0).getSize()},isInvisible:function(a){return X.getSize(a).equals(new t(0,0))},isInView:function(a){return!X.isInvisible(a)&&X.getViewportBounds(a).intersects(X.getBounds(a,!0))},isInserted:function(a){return i.body.contains(a)},getPrefixed:function(b,c){return b&&a(b,c)},setPrefixed:function(b,c,d){if("object"==typeof c)for(var e in c)a(b,e,!0,c[e]);else a(b,c,!0,d)}}},Y={add:function(a,b){if(a)for(var c in b)for(var d=b[c],e=c.split(/[\s,]+/g),f=0,g=e.length;f<g;f++){var h=e[f],j=a===i&&("touchstart"===h||"touchmove"===h)&&{passive:!1};a.addEventListener(h,d,j)}},remove:function(a,b){if(a)for(var c in b)for(var d=b[c],e=c.split(/[\s,]+/g),f=0,g=e.length;f<g;f++)a.removeEventListener(e[f],d,!1)},getPoint:function(a){var b=a.targetTouches?a.targetTouches.length?a.targetTouches[0]:a.changedTouches[0]:a;return new r(b.pageX||b.clientX+i.documentElement.scrollLeft,b.pageY||b.clientY+i.documentElement.scrollTop)},getTarget:function(a){return a.target||a.srcElement},getRelatedTarget:function(a){return a.relatedTarget||a.toElement},getOffset:function(a,b){return Y.getPoint(a).subtract(X.getOffset(b||Y.getTarget(a)))}};Y.requestAnimationFrame=new function(){var a,b=X.getPrefixed(h,"requestAnimationFrame"),c=!1,d=[];function e(){var a=d;d=[];for(var f=0,g=a.length;f<g;f++)a[f]();(c=b&&d.length)&&b(e)}return function(f){d.push(f),b?c||(b(e),c=!0):a||(a=setInterval(e,1e3/60))}};var Z=j.extend(k,{_class:"View",initialize:function a(b,c){function d(a){return c[a]||parseInt(c.getAttribute(a),10)}function e(){var a=X.getSize(c);return a.isNaN()||a.isZero()?new t(d("width"),d("height")):a}if(h&&c){this._id=c.getAttribute("id"),null==this._id&&c.setAttribute("id",this._id="paper-view-"+a._id++),Y.add(c,this._viewEvents);var f,g="none";if(X.setPrefixed(c.style,{userDrag:g,userSelect:g,touchCallout:g,contentZooming:g,tapHighlightColor:"rgba(0,0,0,0)"}),l.hasAttribute(c,"resize")){var j=this;Y.add(h,this._windowEvents={resize:function(){j.setViewSize(e())}})}if(f=e(),l.hasAttribute(c,"stats")&&"undefined"!=typeof Stats){this._stats=new Stats;var k=this._stats.domElement,m=k.style,n=X.getOffset(c);m.position="absolute",m.left=n.x+"px",m.top=n.y+"px",i.body.appendChild(k)}}else f=new t(c),c=null;this._project=b,this._scope=b._scope,this._element=c,this._pixelRatio||(this._pixelRatio=h&&h.devicePixelRatio||1),this._setElementSize(f.width,f.height),this._viewSize=f,a._views.push(this),a._viewsById[this._id]=this,(this._matrix=new x)._owner=this,a._focused||(a._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!ak.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;Z._focused===this&&(Z._focused=null),Z._views.splice(Z._views.indexOf(this),1),delete Z._viewsById[this._id];var a=this._project;return a._view===this&&(a._view=null),Y.remove(this._element,this._viewEvents),Y.remove(h,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:j.each(A._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(a){this[a]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(a){this._autoUpdate=a,a&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var a=this;Y.requestAnimationFrame(function(){if(a._requested=!1,a._animate){a.requestUpdate();var b=a._element;(!X.getPrefixed(i,"hidden")||"true"===l.getAttribute(b,"keepalive"))&&X.isInView(b)&&a._handleFrame()}a._autoUpdate&&a.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){ak=this._scope;var a=Date.now()/1e3,b=this._last?a-this._last:0;this._last=a,this.emit("frame",new j({delta:b,time:this._time+=b,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(a,b){var c=this._frameItems;b?(c[a._id]={item:a,time:0,count:0},1== ++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete c[a._id],0== --this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(a){for(var b in this._frameItems){var c=this._frameItems[b];c.item.emit("frame",new j(a,{time:c.time+=a.delta,count:c.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=g},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var a=this._viewSize;return new u(a.width,a.height,this,"setViewSize")},setViewSize:function(){var a=t.read(arguments),b=a.subtract(this._viewSize);!b.isZero()&&(this._setElementSize(a.width,a.height),this._viewSize.set(a),this._changed(),this.emit("resize",{size:a,delta:b}),this._autoUpdate&&this.update())},_setElementSize:function(a,b){var c=this._element;c&&(c.width!==a&&(c.width=a),c.height!==b&&(c.height=b))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new v(new r,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return X.isInView(this._element)},isInserted:function(){return X.isInserted(this._element)},getPixelSize:function(a){var b,c=this._element;if(c){var d=c.parentNode,e=i.createElement("div");e.style.fontSize=a,d.appendChild(e),b=parseFloat(X.getStyles(e).fontSize),d.removeChild(e)}else b=parseFloat(b);return b},getTextWidth:function(a,b){return 0}},j.each(["rotate","scale","shear","skew"],function(a){var b="rotate"===a;this[a]=function(){var c=arguments,d=(b?j:r).read(c),e=r.read(c,0,{readNull:!0});return this.transform(new x()[a](d,e||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var a=new x;return this.transform(a.translate.apply(a,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var a=r.read(arguments);this.translate(this.getCenter().subtract(a))},getZoom:function(){var a=this._decompose().scaling;return(a.x+a.y)/2},setZoom:function(a){this.transform(new x().scale(a/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(a){var b=this.getRotation();null!=b&&null!=a&&this.rotate(a-b)},getScaling:function(){var a=this._decompose().scaling;return new s(a.x,a.y,this,"setScaling")},setScaling:function(){var a=this.getScaling(),b=r.read(arguments,0,{clone:!0,readNull:!0});a&&b&&this.scale(b.x/a.x,b.y/a.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var a=this._matrix;a.set.apply(a,arguments)},transform:function(a){this._matrix.append(a)},scrollBy:function(){this.translate(r.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(r.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(r.read(arguments))},getEventPoint:function(a){return this.viewToProject(Y.getOffset(a,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(a,b){return i&&"string"==typeof b&&(b=i.getElementById(b)),new(h?$:Z)(a,b)}}},new function(){if(h){var a,b,c,d,e,f=!1,g=!1,j=h.navigator;j.pointerEnabled||j.msPointerEnabled?(c="pointerdown MSPointerDown",d="pointermove MSPointerMove",e="pointerup pointercancel MSPointerUp MSPointerCancel"):(c="touchstart",d="touchmove",e="touchend touchcancel","ontouchstart"in h&&j.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(c+=" mousedown",d+=" mousemove",e+=" mouseup"));var k={},l={mouseout:function(a){var b=Z._focused,c=Y.getRelatedTarget(a);if(b&&(!c||"HTML"===c.nodeName)){var d=Y.getOffset(a,b._element),e=d.x,f=Math.abs,g=f(e),h=g-33554432;d.x=f(h)<g?h*(e<0?-1:1):e,C(b,a,b.viewToProject(d))}},scroll:B};k[c]=function(a){var b=Z._focused=A(a);f||(f=!0,b._handleMouseEvent("mousedown",a))},l[d]=function(c){var d=Z._focused;if(!g){var e=A(c);e?d!==e&&(d&&C(d,c),a||(a=d),d=Z._focused=b=e):b&&b===d&&(a&&!a.isInserted()&&(a=null),d=Z._focused=a,a=null,B())}d&&C(d,c)},l[c]=function(){g=!0},l[e]=function(a){var b=Z._focused;b&&f&&b._handleMouseEvent("mouseup",a),g=f=!1},Y.add(i,l),Y.add(h,{load:B});var m,n,o,p,q,r,s,t,u,v=!1,w=!1,x={doubleclick:"click",mousedrag:"mousemove"},y=!1,z={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:k,_handleMouseEvent:function(a,b,c){var d=this._itemEvents,e=d.native[a],g="mousemove"===a,h=this._scope.tool,i=this;function j(a){return d.virtual[a]||i.responds(a)||h&&h.responds(a)}g&&f&&j("mousedrag")&&(a="mousedrag"),c||(c=this.getEventPoint(b));var k=this.getBounds().contains(c),l=e&&k&&i._project.hitTest(c,{tolerance:0,fill:!0,stroke:!0}),x=l&&l.item||null,z=!1,A={};if(A[a.substr(5)]=!0,e&&x!==q&&(q&&D(q,null,"mouseleave",b,c),x&&D(x,null,"mouseenter",b,c),q=x),y^k&&(D(this,null,k?"mouseenter":"mouseleave",b,c),m=k?this:null,z=!0),(k||A.drag)&&!c.equals(o)&&(E(this,x,g?a:"mousemove",b,c,o),z=!0),y=k,A.down&&k||A.up&&n){if(E(this,x,a,b,c,n),A.down){if(u=x===s&&Date.now()-t<300,p=s=x,!w&&x){for(var B=x;B&&!B.responds("mousedrag");)B=B._parent;B&&(r=x)}n=c}else A.up&&(w||x!==p||(t=Date.now(),E(this,x,u?"doubleclick":"click",b,c,n),u=!1),p=r=null);y=!1,z=!0}o=c,z&&h&&(v=h._handleMouseEvent(a,b,c,A)||v),!1!==b.cancelable&&(v&&!A.move||A.down&&j("mouseup"))&&b.preventDefault()},_handleKeyEvent:function(a,b,c,d){var e,f=this._scope,g=f.tool;function h(g){g.responds(a)&&(ak=f,g.emit(a,e=e||new aa(a,b,c,d)))}this.isVisible()&&(h(this),g&&g.responds(a)&&h(g))},_countItemEvent:function(a,b){var c=this._itemEvents,d=c.native,e=c.virtual;for(var f in z)d[f]=(d[f]||0)+(z[f][a]||0)*b;e[a]=(e[a]||0)+b},statics:{updateFocus:B,_resetState:function(){f=g=v=y=!1,a=b=m=n=o=p=q=r=s=t=u=null}}}}function A(a){var b=Y.getTarget(a);return b.getAttribute&&Z._viewsById[b.getAttribute("id")]}function B(){var a=Z._focused;if(!a||!a.isVisible()){for(var c=0,d=Z._views.length;c<d;c++)if((a=Z._views[c]).isVisible()){Z._focused=b=a;break}}}function C(a,b,c){a._handleMouseEvent("mousemove",b,c)}function D(a,b,c,d,e,f,g){var h,i=!1;function j(a,c){if(a.responds(c)){if(h||(h=new ac(c,d,e,b||a,f?e.subtract(f):null)),a.emit(c,h)&&(v=!0,h.prevented&&(w=!0),h.stopped))return i=!0}else{var g=x[c];if(g)return j(a,g)}}for(;a&&a!==g&&!j(a,c);)a=a._parent;return i}function E(a,b,c,d,e,f){return a._project.removeOn(c),w=v=!1,r&&D(r,null,c,d,e,f)||b&&b!==r&&!b.isDescendant(r)&&D(b,null,"mousedrag"===c?"mousemove":c,d,e,f,r)||D(a,r||b||a,c,d,e,f)}}),$=Z.extend({_class:"CanvasView",initialize:function(a,b){if(!(b instanceof h.HTMLCanvasElement)){var c=t.read(arguments,1);if(c.isZero())throw Error("Cannot create CanvasView with the provided argument: "+j.slice(arguments,1));b=ag.getCanvas(c)}var d=this._context=b.getContext("2d");if(d.save(),this._pixelRatio=1,!/^off|false$/.test(l.getAttribute(b,"hidpi"))){var e=h.devicePixelRatio||1,f=X.getPrefixed(d,"backingStorePixelRatio")||1;this._pixelRatio=e/f}Z.call(this,a,b),this._needsUpdate=!0},remove:function a(){return this._context.restore(),a.base.call(this)},_setElementSize:function a(b,c){var d=this._pixelRatio;if(a.base.call(this,b*d,c*d),1!==d){var e=this._element,f=this._context;if(!l.hasAttribute(e,"resize")){var g=e.style;g.width=b+"px",g.height=c+"px"}f.restore(),f.save(),f.scale(d,d)}},getContext:function(){return this._context},getPixelSize:function a(b){var c,d=ak.agent;if(d&&d.firefox)c=a.base.call(this,b);else{var e=this._context,f=e.font;e.font=b+" serif",c=parseFloat(e.font),e.font=f}return c},getTextWidth:function(a,b){var c=this._context,d=c.font,e=0;c.font=a;for(var f=0,g=b.length;f<g;f++)e=Math.max(e,c.measureText(b[f]).width);return c.font=d,e},update:function(){if(!this._needsUpdate)return!1;var a=this._project,b=this._context,c=this._viewSize;return b.clearRect(0,0,c.width+1,c.height+1),a&&a.draw(b,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),_=j.extend({_class:"Event",initialize:function(a){this.event=a,this.type=a&&a.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return ab.modifiers}}),aa=_.extend({_class:"KeyEvent",initialize:function(a,b,c,d){this.type=a,this.event=b,this.key=c,this.character=d},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),ab=new function(){var a,b,c={"	":"tab"," ":"space","\b":"backspace","\x7f":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},d={tab:"	",space:" ",enter:"\r"},e={},f={},k=new j({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var a=ak&&ak.agent;return a&&a.mac?this.meta:this.control}}});function l(a){var b=a.key||a.keyIdentifier;return c[b=/^U\+/.test(b)?String.fromCharCode(parseInt(b.substr(2),16)):/^Arrow[A-Z]/.test(b)?b.substr(5):"Unidentified"===b||b===g?String.fromCharCode(a.keyCode):b]||(b.length>1?j.hyphenate(b):b.toLowerCase())}function m(b,c,d,g){var h,i=Z._focused;if(e[c]=b,b?f[c]=d:delete f[c],c.length>1&&(h=j.camelize(c))in k){k[h]=b;var l=ak&&ak.agent;if("meta"===h&&l&&l.mac){if(b)a={};else{for(var n in a)n in f&&m(!1,n,a[n],g);a=null}}}else b&&a&&(a[c]=d);i&&i._handleKeyEvent(b?"keydown":"keyup",g,c,d)}return Y.add(i,{keydown:function(a){var c=l(a),e=ak&&ak.agent;c.length>1||e&&e.chrome&&(a.altKey||e.mac&&a.metaKey|| !e.mac&&a.ctrlKey)?m(!0,c,d[c]||(c.length>1?"":c),a):b=c},keypress:function(a){if(b){var c=l(a),d=a.charCode,e=d>=32?String.fromCharCode(d):c.length>1?"":c;c!==b&&(c=e.toLowerCase()),m(!0,c,e,a),b=null}},keyup:function(a){var b=l(a);b in f&&m(!1,b,f[b],a)}}),Y.add(h,{blur:function(a){for(var b in f)m(!1,b,f[b],a)}}),{modifiers:k,isDown:function(a){return!!e[a]}}},ac=_.extend({_class:"MouseEvent",initialize:function(a,b,c,d,e){this.type=a,this.event=b,this.point=c,this.target=d,this.delta=e},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),ad=_.extend({_class:"ToolEvent",_item:null,initialize:function(a,b,c){this.tool=a,this.type=b,this.event=c},_choosePoint:function(a,b){return a||(b?b.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(a){this._point=a},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(a){this._lastPoint=a},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(a){this._downPoint=a},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(a){this._middlePoint=a},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(a){this._delta=a},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(a){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=a},getItem:function(){if(!this._item){var a=this.tool._scope.project.hitTest(this.getPoint());if(a){for(var b=a.item,c=b._parent;/^(Group|CompoundPath)$/.test(c._class);)b=c,c=c._parent;this._item=b}}return this._item},setItem:function(a){this._item=a},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}});m.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(a){m.call(this),this._moveCount=-1,this._downCount=-1,this.set(a)},getMinDistance:function(){return this._minDistance},setMinDistance:function(a){this._minDistance=a,null!=a&&null!=this._maxDistance&&a>this._maxDistance&&(this._maxDistance=a)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(a){this._maxDistance=a,null!=this._minDistance&&null!=a&&a<this._minDistance&&(this._minDistance=a)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(a){this._minDistance=this._maxDistance=a},_handleMouseEvent:function(a,b,c,d){ak=this._scope,d.drag&&!this.responds(a)&&(a="mousemove");var e=d.move||d.drag,f=this.responds(a),g=this.minDistance,h=this.maxDistance,i=!1,j=this;function k(a,b){var f=c,g=e?j._point:j._downPoint||f;if(e){if(j._moveCount>=0&&f.equals(g))return!1;if(g&&(null!=a||null!=b)){var h=f.subtract(g),i=h.getLength();if(i<(a||0))return!1;b&&(f=g.add(h.normalize(Math.min(i,b))))}j._moveCount++}return j._point=f,j._lastPoint=g||f,d.down&&(j._moveCount=-1,j._downPoint=f,j._downCount++),!0}function l(){f&&(i=j.emit(a,new ad(j,a,b))||i)}if(d.down)k(),l();else if(d.up)k(null,h),l();else if(f)for(;k(g,h);)l();return i}});var ae=j.extend(k,{_class:"Tween",statics:{easings:new j({linear:function(a){return a},easeInQuad:function(a){return a*a},easeOutQuad:function(a){return a*(2-a)},easeInOutQuad:function(a){return a<.5?2*a*a:-1+2*(2-a)*a},easeInCubic:function(a){return a*a*a},easeOutCubic:function(a){return--a*a*a+1},easeInOutCubic:function(a){return a<.5?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1},easeInQuart:function(a){return a*a*a*a},easeOutQuart:function(a){return 1- --a*a*a*a},easeInOutQuart:function(a){return a<.5?8*a*a*a*a:1-8* --a*a*a*a},easeInQuint:function(a){return a*a*a*a*a},easeOutQuint:function(a){return 1+ --a*a*a*a*a},easeInOutQuint:function(a){return a<.5?16*a*a*a*a*a:1+16* --a*a*a*a*a}})},initialize:function a(b,c,d,e,f,g){this.object=b;var h=typeof f,i="function"===h;this.type=i?h:"string"===h?f:"linear",this.easing=i?f:a.easings[this.type],this.duration=e,this.running=!1,this._then=null,this._startTime=null;var j=c||d;this._keys=j?Object.keys(j):[],this._parsedKeys=this._parseKeys(this._keys),this._from=j&&this._getState(c),this._to=j&&this._getState(d),!1!==g&&this.start()},then:function(a){return this._then=a,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(a){if(this.running){a>=1&&(a=1,this.running=!1);for(var b=this.easing(a),c=this._keys,d=function(c){return"function"==typeof c?c(b,a):c},e=0,f=c&&c.length;e<f;e++){var g=c[e],h=d(this._from[g]),i=d(this._to[g]),k=h&&i&&h.__add&&i.__add?i.__subtract(h).__multiply(b).__add(h):(i-h)*b+h;this._setProperty(this._parsedKeys[g],k)}this.responds("update")&&this.emit("update",new j({progress:a,factor:b})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(a){var b=this._startTime,c=b?(a-b)/this.duration:0;b||(this._startTime=a),this.update(c)},_getState:function(a){for(var b=this._keys,c={},d=0,e=b.length;d<e;d++){var f,g=b[d],h=this._parsedKeys[g],i=this._getProperty(h);if(a){var j=this._resolveValue(i,a[g]);this._setProperty(h,j),f=(f=this._getProperty(h))&&f.clone?f.clone():f,this._setProperty(h,i)}else f=i&&i.clone?i.clone():i;c[g]=f}return c},_resolveValue:function(a,b){if(b){if(Array.isArray(b)&&2===b.length){var c=b[0];return c&&c.match&&c.match(/^[+\-\*\/]=/)?this._calculate(a,c[0],b[1]):b}if("string"==typeof b){var d=b.match(/^[+\-*/]=(.*)/);if(d){var e=JSON.parse(d[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(a,b[0],e)}}}return b},_calculate:function(a,b,c){return ak.PaperScript.calculateBinary(a,b,c)},_parseKeys:function(a){for(var b={},c=0,d=a.length;c<d;c++){var e=a[c],f=e.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");b[e]=f.split("/")}return b},_getProperty:function(a,b){for(var c=this.object,d=0,e=a.length-(b||0);d<e&&c;d++)c=c[a[d]];return c},_setProperty:function(a,b){var c=this._getProperty(a,1);c&&(c[a[a.length-1]]=b)}}),af={request:function(a){var b=new f.XMLHttpRequest;return b.open((a.method||"get").toUpperCase(),a.url,j.pick(a.async,!0)),a.mimeType&&b.overrideMimeType(a.mimeType),b.onload=function(){var c=b.status;0===c||200===c?a.onLoad&&a.onLoad.call(b,b.responseText):b.onerror()},b.onerror=function(){var c=b.status,d='Could not load "'+a.url+'" (Status: '+c+")";if(a.onError)a.onError(d,c);else throw Error(d)},b.send(null)}},ag=j.exports.CanvasProvider={canvases:[],getCanvas:function(a,b){if(!h)return null;var c,d=!0;"object"==typeof a&&(b=a.height,a=a.width),this.canvases.length?c=this.canvases.pop():(c=i.createElement("canvas"),d=!1);var e=c.getContext("2d");if(!e)throw Error("Canvas "+c+" is unable to provide a 2D context.");return c.width===a&&c.height===b?d&&e.clearRect(0,0,a+1,b+1):(c.width=a,c.height=b),e.save(),c},getContext:function(a,b){var c=this.getCanvas(a,b);return c?c.getContext("2d"):null},release:function(a){var b=a&&a.canvas?a.canvas:a;b&&b.getContext&&(b.getContext("2d").restore(),this.canvases.push(b))}},ah=new function(){var a,b,c,d,e,f,g,h,i,k,l,m=Math.min,n=Math.max,o=Math.abs;function p(a,b,c){return .2989*a+.587*b+.114*c}function q(a,b,c,d){var e=d-p(a,b,c);i=a+e,k=b+e;var d=p(i,k,l=c+e),f=m(i,k,l),g=n(i,k,l);if(f<0){var h=d-f;i=d+(i-d)*d/h,k=d+(k-d)*d/h,l=d+(l-d)*d/h}if(g>255){var j=255-d,o=g-d;i=d+(i-d)*j/o,k=d+(k-d)*j/o,l=d+(l-d)*j/o}}function r(a,b,c){return n(a,b,c)-m(a,b,c)}function s(a,b,c,d){var e,f=[a,b,c],g=n(a,b,c),h=m(a,b,c);h=h===a?0:h===b?1:2,g=g===a?0:g===b?1:2,e=0===m(h,g)?1===n(h,g)?2:1:0,f[g]>f[h]?(f[e]=(f[e]-f[h])*d/(f[g]-f[h]),f[g]=d):f[e]=f[g]=0,f[h]=0,i=f[0],k=f[1],l=f[2]}var t={multiply:function(){i=e*a/255,k=f*b/255,l=g*c/255},screen:function(){i=e+a-e*a/255,k=f+b-f*b/255,l=g+c-g*c/255},overlay:function(){i=e<128?2*e*a/255:255-2*(255-e)*(255-a)/255,k=f<128?2*f*b/255:255-2*(255-f)*(255-b)/255,l=g<128?2*g*c/255:255-2*(255-g)*(255-c)/255},"soft-light":function(){var d=a*e/255;i=d+e*(255-(255-e)*(255-a)/255-d)/255,k=(d=b*f/255)+f*(255-(255-f)*(255-b)/255-d)/255,l=(d=c*g/255)+g*(255-(255-g)*(255-c)/255-d)/255},"hard-light":function(){i=a<128?2*a*e/255:255-2*(255-a)*(255-e)/255,k=b<128?2*b*f/255:255-2*(255-b)*(255-f)/255,l=c<128?2*c*g/255:255-2*(255-c)*(255-g)/255},"color-dodge":function(){i=0===e?0:255===a?255:m(255,255*e/(255-a)),k=0===f?0:255===b?255:m(255,255*f/(255-b)),l=0===g?0:255===c?255:m(255,255*g/(255-c))},"color-burn":function(){i=255===e?255:0===a?0:n(0,255-(255-e)*255/a),k=255===f?255:0===b?0:n(0,255-(255-f)*255/b),l=255===g?255:0===c?0:n(0,255-(255-g)*255/c)},darken:function(){i=e<a?e:a,k=f<b?f:b,l=g<c?g:c},lighten:function(){i=e>a?e:a,k=f>b?f:b,l=g>c?g:c},difference:function(){(i=e-a)<0&&(i=-i),(k=f-b)<0&&(k=-k),(l=g-c)<0&&(l=-l)},exclusion:function(){i=e+a*(255-e-e)/255,k=f+b*(255-f-f)/255,l=g+c*(255-g-g)/255},hue:function(){s(a,b,c,r(e,f,g)),q(i,k,l,p(e,f,g))},saturation:function(){s(e,f,g,r(a,b,c)),q(i,k,l,p(e,f,g))},luminosity:function(){q(e,f,g,p(a,b,c))},color:function(){q(a,b,c,p(e,f,g))},add:function(){i=m(e+a,255),k=m(f+b,255),l=m(g+c,255)},subtract:function(){i=n(e-a,0),k=n(f-b,0),l=n(g-c,0)},average:function(){i=(e+a)/2,k=(f+b)/2,l=(g+c)/2},negation:function(){i=255-o(255-a-e),k=255-o(255-b-f),l=255-o(255-c-g)}},u=this.nativeModes=j.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(a){this[a]=!0},{}),v=ag.getContext(1,1);v&&(j.each(t,function(a,b){var c="darken"===b,d=!1;v.save();try{v.fillStyle=c?"#300":"#a00",v.fillRect(0,0,1,1),v.globalCompositeOperation=b,v.globalCompositeOperation===b&&(v.fillStyle=c?"#a00":"#300",v.fillRect(0,0,1,1),d=v.getImageData(0,0,1,1).data[0]!==c?170:51)}catch(e){}v.restore(),u[b]=d}),ag.release(v)),this.process=function(j,m,n,o,p){var q=m.canvas,r="normal"===j;if(r||u[j])n.save(),n.setTransform(1,0,0,1,0,0),n.globalAlpha=o,r||(n.globalCompositeOperation=j),n.drawImage(q,p.x,p.y),n.restore();else{var s=t[j];if(!s)return;for(var v=n.getImageData(p.x,p.y,q.width,q.height),w=v.data,x=m.getImageData(0,0,q.width,q.height).data,y=0,z=w.length;y<z;y+=4){a=x[y],e=w[y],b=x[y+1],f=w[y+1],c=x[y+2],g=w[y+2],d=x[y+3],h=w[y+3],s();var A=d*o/255,B=1-A;w[y]=A*i+B*e,w[y+1]=A*k+B*f,w[y+2]=A*l+B*g,w[y+3]=d*o+B*h}n.putImageData(v,p.x,p.y)}}},ai=new function(){var a="http://www.w3.org/2000/svg",b="http://www.w3.org/2000/xmlns",c="http://www.w3.org/1999/xlink",d={href:c,xlink:b,xmlns:b+"/","xmlns:xlink":b+"/"};function e(a,b,c){for(var e in b){var f=b[e],g=d[e];"number"==typeof f&&c&&(f=c.number(f)),g?a.setAttributeNS(g,e,f):a.setAttribute(e,f)}return a}return{svg:a,xmlns:b,xlink:c,create:function(b,c,d){return e(i.createElementNS(a,b),c,d)},get:function(a,b){var c=d[b],e=c?a.getAttributeNS(c,b):a.getAttribute(b);return"null"===e?null:e},set:e}},aj=j.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(a,b){return!b&&(a instanceof M||a instanceof D||a instanceof R)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(a,b){var c=j.capitalize(b),d=a[2];this[b]={type:a[1],property:b,attribute:a[0],toSVG:d,fromSVG:d&&j.each(d,function(a,b){this[a]=b},{}),exportFilter:a[3],get:"get"+c,set:"set"+c}},{});new function(){function a(a,b,c){var e,f=new j,g=a.getTranslation();if(b&&(a.isInvertible()?(e=(a=a._shiftless())._inverseTransform(g),g=null):e=new r,f[c?"cx":"x"]=e.x,f[c?"cy":"y"]=e.y),!a.isIdentity()){var h=a.decompose();if(h){var i=[],k=h.rotation,l=h.scaling,m=h.skewing;g&&!g.isZero()&&i.push("translate("+d.point(g)+")"),k&&i.push("rotate("+d.number(k)+")"),p.isZero(l.x-1)&&p.isZero(l.y-1)||i.push("scale("+d.point(l)+")"),m.x&&i.push("skewX("+d.number(m.x)+")"),m.y&&i.push("skewY("+d.number(m.y)+")"),f.transform=i.join(" ")}else f.transform="matrix("+a.getValues().join(",")+")"}return f}function b(b,c){for(var e=a(b._matrix),f=b._children,g=ai.create("g",e,d),h=0,j=f.length;h<j;h++){var k=f[h],m=l(k,c);if(m){if(k.isClipMask()){var n=ai.create("clipPath");n.appendChild(m),i(k,n,"clip"),ai.set(g,{"clip-path":"url(#"+n.id+")"})}else g.appendChild(m)}}return g}function c(b){var c=b._type,e=b._radius,f=a(b._matrix,!0,"rectangle"!==c);if("rectangle"===c){c="rect";var g=b._size,h=g.width,i=g.height;f.x-=h/2,f.y-=i/2,f.width=h,f.height=i,e.isZero()&&(e=null)}return e&&("circle"===c?f.r=e:(f.rx=e.width,f.ry=e.height)),ai.create(c,f,d)}var d,e,g={Group:b,Layer:b,Raster:function(b,c){var e=a(b._matrix,!0),f=b.getSize(),g=b.getImage();return e.x-=f.width/2,e.y-=f.height/2,e.width=f.width,e.height=f.height,e.href=!1==c.embedImages&&g&&g.src||b.toDataURL(),ai.create("image",e,d)},Path:function(b,e){var f=e.matchShapes;if(f){var g=b.toShape(!1);if(g)return c(g,e)}var h,i=b._segments,j=i.length,k=a(b._matrix);if(f&&j>=2&&!b.hasHandles()){if(j>2){h=b._closed?"polygon":"polyline";for(var l=[],m=0;m<j;m++)l.push(d.point(i[m]._point));k.points=l.join(" ")}else{h="line";var n=i[0]._point,o=i[1]._point;k.set({x1:n.x,y1:n.y,x2:o.x,y2:o.y})}}else h="path",k.d=b.getPathData(null,e.precision);return ai.create(h,k,d)},Shape:c,CompoundPath:function(b,c){var e=a(b._matrix),f=b.getPathData(null,c.precision);return f&&(e.d=f),ai.create("path",e,d)},SymbolItem:function(b,c){var e=a(b._matrix,!0),f=b._definition,g=h(f,"symbol"),j=f._item,k=j.getStrokeBounds();return g||((g=ai.create("symbol",{viewBox:d.rectangle(k)})).appendChild(l(j,c)),i(f,g,"symbol")),e.href="#"+g.id,e.x+=k.x,e.y+=k.y,e.width=k.width,e.height=k.height,e.overflow="visible",ai.create("use",e,d)},PointText:function(b){var c=ai.create("text",a(b._matrix,!0),d);return c.textContent=b._content,c}};function h(a,b){return e||(e={ids:{},svgs:{}}),a&&e.svgs[b+"-"+(a._id||a.__id||(a.__id=q.get("svg")))]}function i(a,b,c){e||h();var d=e.ids[c]=(e.ids[c]||0)+1;b.id=c+"-"+d,e.svgs[c+"-"+(a._id||a.__id)]=b}function k(a,b){var c=a,d=null;if(e){for(var g in c="svg"===a.nodeName.toLowerCase()&&a,e.svgs)d||(c||(c=ai.create("svg")).appendChild(a),d=c.insertBefore(ai.create("defs"),c.firstChild)),d.appendChild(e.svgs[g]);e=null}return b.asString?new f.XMLSerializer().serializeToString(c):c}function l(a,b,c){var e,f,k,l,m,n,o=g[a._class],p=o&&o(a,b);if(p){var q=b.onExport;q&&(p=q(a,p,b)||p);var r=JSON.stringify(a._data);r&&"{}"!==r&&"null"!==r&&p.setAttribute("data-paper-data",r)}return p&&(e=a,f=p,l={},m=!(k=c)&&e.getParent(),n=[],null!=e._name&&(l.id=e._name),j.each(aj,function(a){var b=a.get,c=a.type,f=e[b]();if(a.exportFilter?a.exportFilter(e,f):!m||!j.equals(m[b](),f)){if("color"===c&&null!=f){var g=f.getAlpha();g<1&&(l[a.attribute+"-opacity"]=g)}"style"===c?n.push(a.attribute+": "+f):l[a.attribute]=null==f?"none":"color"===c?f.gradient?function(a){var b=h(a,"color");if(!b){var c,e=a.getGradient(),f=e._radial,g=a.getOrigin(),j=a.getDestination();if(f){c={cx:g.x,cy:g.y,r:g.getDistance(j)};var k=a.getHighlight();k&&(c.fx=k.x,c.fy=k.y)}else c={x1:g.x,y1:g.y,x2:j.x,y2:j.y};c.gradientUnits="userSpaceOnUse",b=ai.create((f?"radial":"linear")+"Gradient",c,d);for(var l=e._stops,m=0,n=l.length;m<n;m++){var o=l[m],p=o._color,q=p.getAlpha(),r=o._offset;c={offset:null==r?m/(n-1):r},p&&(c["stop-color"]=p.toCSS(!0)),q<1&&(c["stop-opacity"]=q),b.appendChild(ai.create("stop",c,d))}i(a,b,"color")}return"url(#"+b.id+")"}(f,e):f.toCSS(!0):"array"===c?f.join(","):"lookup"===c?a.toSVG[f]:f}}),n.length&&(l.style=n.join(";")),1===l.opacity&&delete l.opacity,e._visible||(l.visibility="hidden"),ai.set(f,l,d))}function m(a){return a||(a={}),d=new o(a.precision),a}A.inject({exportSVG:function(a){return a=m(a),k(l(this,a,!0),a)}}),z.inject({exportSVG:function(b){b=m(b);var c=this._children,e=this.getView(),f=j.pick(b.bounds,"view"),g=b.matrix||"view"===f&&e._matrix,h=g&&x.read([g]),i="view"===f?new v([0,0],e.getViewSize()):"content"===f?A._getBounds(c,h,{stroke:!0}).rect:v.read([f],0,{readNull:!0}),n={version:"1.1",xmlns:ai.svg,"xmlns:xlink":ai.xlink};i&&(n.width=i.width,n.height=i.height,(i.x||0===i.x||i.y||0===i.y)&&(n.viewBox=d.rectangle(i)));var o=ai.create("svg",n,d),p=o;h&&!h.isIdentity()&&(p=o.appendChild(ai.create("g",a(h),d)));for(var q=0,r=c.length;q<r;q++)p.appendChild(l(c[q],b,!0));return k(o,b)}})},new function(){var a,b={};function c(b,c,d,e,f,g){var h=ai.get(b,c)||g,i=null==h?e?null:d?"":0:d?h:parseFloat(h);return/%\s*$/.test(h)?i/100*(f?1:a[/x|^width/.test(c)?"width":"height"]):i}function d(a,b,d,e,f,g,h){return b=c(a,b||"x",!1,e,f,g),d=c(a,d||"y",!1,e,f,h),e&&(null==b||null==d)?null:new r(b,d)}function e(a,b,d,e,f){return b=c(a,b||"width",!1,e,f),d=c(a,d||"height",!1,e,f),e&&(null==b||null==d)?null:new t(b,d)}function k(a,b,c){return"none"===a?null:"number"===b?parseFloat(a):"array"===b?a?a.split(/[\s,]+/g).map(parseFloat):[]:"color"===b?y(a)||a:"lookup"===b?c[a]:a}function l(a,b,c,d){var e=a.childNodes,f="clippath"===b,g="defs"===b,h=new B,i=h._project,j=i._currentStyle,k=[];if(f||g||(h=w(h,a,d),i._currentStyle=h._style.clone()),d)for(var l=a.querySelectorAll("defs"),m=0,n=l.length;m<n;m++)C(l[m],c,!1);for(var m=0,n=e.length;m<n;m++){var o,p=e[m];!(1===p.nodeType&&!/^defs$/i.test(p.nodeName)&&(o=C(p,c,!1)))||o instanceof G||k.push(o)}return h.addChildren(k),f&&(h=w(h.reduce(),a,d)),i._currentStyle=j,(f||g)&&(h.remove(),h=null),h}function m(a,b){for(var c=a.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),d=[],e=0,f=c.length;e<f;e+=2)d.push(new r(parseFloat(c[e]),parseFloat(c[e+1])));var g=new N(d);return"polygon"===b&&g.closePath(),g}function n(a,e){var f,g=(c(a,"href",!0)||"").substring(1),h="radialgradient"===e;if(g)(f=b[g].getGradient())._radial^h&&((f=f.clone())._radial=h);else{for(var i=a.childNodes,j=[],k=0,l=i.length;k<l;k++){var m=i[k];1===m.nodeType&&j.push(w(new V,m))}f=new U(j,h)}var n,o,p,q="userSpaceOnUse"!==c(a,"gradientUnits",!0);return h?(o=(n=d(a,"cx","cy",!1,q,"50%","50%")).add(c(a,"r",!1,!1,q,"50%"),0),p=d(a,"fx","fy",!0,q)):(n=d(a,"x1","y1",!1,q,"0%","0%"),o=d(a,"x2","y2",!1,q,"100%","0%")),w(new T(f,n,o,p),a)._scaleToBounds=q,null}var o={"#document":function(a,b,c,d){for(var e=a.childNodes,f=0,g=e.length;f<g;f++){var h=e[f];if(1===h.nodeType)return C(h,c,d)}},g:l,svg:l,clippath:l,polygon:m,polyline:m,path:function(a){return M.create(a.getAttribute("d"))},lineargradient:n,radialgradient:n,image:function(a){var b=new E(c(a,"href",!0));return b.on("load",function(){var b=e(a);this.setSize(b);var c=d(a).add(b.divide(2));this._matrix.append(new x().translate(c))}),b},symbol:function(a,b,c,d){return new G(l(a,b,c,d),!0)},defs:l,use:function(a){var e=b[(c(a,"href",!0)||"").substring(1)],f=d(a);return e?e instanceof G?e.place(f):e.clone().translate(f):null},circle:function(a){return new D.Circle(d(a,"cx","cy"),c(a,"r"))},ellipse:function(a){return new D.Ellipse({center:d(a,"cx","cy"),radius:e(a,"rx","ry")})},rect:function(a){return new D.Rectangle(new v(d(a),e(a)),e(a,"rx","ry"))},line:function(a){return new N.Line(d(a,"x1","y1"),d(a,"x2","y2"))},text:function(a){var b=new S(d(a).add(d(a,"dx","dy")));return b.setContent(a.textContent.trim()||""),b},switch:l};function p(a,b,c,d){if(a.transform){for(var e=(d.getAttribute(c)||"").split(/\)\s*/g),f=new x,g=0,h=e.length;g<h;g++){var i=e[g];if(!i)break;for(var j=i.split(/\(\s*/),k=j[0],l=j[1].split(/[\s,]+/g),m=0,n=l.length;m<n;m++)l[m]=parseFloat(l[m]);switch(k){case"matrix":f.append(new x(l[0],l[1],l[2],l[3],l[4],l[5]));break;case"rotate":f.rotate(l[0],l[1]||0,l[2]||0);break;case"translate":f.translate(l[0],l[1]||0);break;case"scale":f.scale(l);break;case"skewX":f.skew(l[0],0);break;case"skewY":f.skew(0,l[0])}}a.transform(f)}}function q(a,b,c){var d="fill-opacity"===c?"getFillColor":"getStrokeColor",e=a[d]&&a[d]();e&&e.setAlpha(parseFloat(b))}var s=j.set(j.each(aj,function(a){this[a.attribute]=function(b,c){if(b[a.set]&&(b[a.set](k(c,a.type,a.fromSVG)),"color"===a.type)){var d=b[a.get]();if(d&&d._scaleToBounds){var e=b.getBounds();d.transform(new x().translate(e.getPoint()).scale(e.getSize()))}}}},{}),{id:function(a,c){b[c]=a,a.setName&&a.setName(c)},"clip-path":function(a,b){var c=y(b);if(c){if((c=c.clone()).setClipMask(!0),!(a instanceof B))return new B(c,a);a.insertChild(0,c)}},gradientTransform:p,transform:p,"fill-opacity":q,"stroke-opacity":q,visibility:function(a,b){a.setVisible&&a.setVisible("visible"===b)},display:function(a,b){a.setVisible&&a.setVisible(null!==b)},"stop-color":function(a,b){a.setColor&&a.setColor(b)},"stop-opacity":function(a,b){a._color&&a._color.setAlpha(parseFloat(b))},offset:function(a,b){if(a.setOffset){var c=b.match(/(.*)%$/);a.setOffset(c?c[1]/100:parseFloat(b))}},viewBox:function(a,b,c,d,f){var g,h,i=new v(k(b,"array")),j=e(d,null,null,!0);if(a instanceof B){var l=j?j.divide(i.getSize()):1,h=new x().scale(l).translate(i.getPoint().negate());g=a}else a instanceof G&&(j&&i.setSize(j),g=a._item);if(g){if("visible"!==u(d,"overflow",f)){var m=new D.Rectangle(i);m.setClipMask(!0),g.addChild(m)}h&&g.transform(h)}}});function u(a,b,c){var d=a.attributes[b],e=d&&d.value;if(!e&&a.style){var f=j.camelize(b);(e=a.style[f])||c.node[f]===c.parent[f]||(e=c.node[f])}return e?"none"===e?null:e:g}function w(a,b,c){var d=b.parentNode,e={node:X.getStyles(b)||{},parent:!c&&!/^defs$/i.test(d.tagName)&&X.getStyles(d)||{}};return j.each(s,function(c,d){var f=u(b,d,e);a=f!==g&&c(a,f,d,b,e)||a}),a}function y(a){var c=a&&a.match(/\((?:["'#]*)([^"')]+)/),d=c&&c[1],e=d&&b[h?d.replace(h.location.href.split("#")[0]+"#",""):d];return e&&e._scaleToBounds&&((e=e.clone())._scaleToBounds=!0),e}function C(c,d,f){var g,h,k,l=c.nodeName.toLowerCase(),m="#document"!==l,n=i.body;f&&m&&(a=ak.getView().getSize(),a=e(c,null,null,!0)||a,g=ai.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),h=c.parentNode,k=c.nextSibling,g.appendChild(c),n.appendChild(g));var p=ak.settings,q=p.applyMatrix,r=p.insertItems;p.applyMatrix=!1,p.insertItems=!1;var s=o[l],t=s&&s(c,l,d,f)||null;if(p.insertItems=r,p.applyMatrix=q,t){!m||t instanceof B||(t=w(t,c,f));var u=d.onImport,v=m&&c.getAttribute("data-paper-data");u&&(t=u(c,t,d)||t),d.expandShapes&&t instanceof D&&(t.remove(),t=t.toPath()),v&&(t._data=JSON.parse(v))}return g&&(n.removeChild(g),h&&(k?h.insertBefore(c,k):h.appendChild(c))),f&&(b={},t&&j.pick(d.applyMatrix,q)&&t.matrix.apply(!0,!0)),t}function F(a,b,c){if(!a)return null;b="function"==typeof b?{onLoad:b}:b||{};var d=ak,e=null;function h(h){try{var i="object"==typeof h?h:new f.DOMParser().parseFromString(h.trim(),"image/svg+xml");if(!i.nodeName)throw i=null,Error("Unsupported SVG source: "+a);ak=d,e=C(i,b,!0),b&& !1===b.insert||c._insertItem(g,e);var k=b.onLoad;k&&k(e,h)}catch(l){j(l)}}function j(a,c){var d=b.onError;if(d)d(a,c);else throw Error(a)}if("string"!=typeof a||/^[\s\S]*</.test(a)){if("undefined"!=typeof File&&a instanceof File){var k=new FileReader;return k.onload=function(){h(k.result)},k.onerror=function(){j(k.error)},k.readAsText(a)}h(a)}else{var l=i.getElementById(a);l?h(l):af.request({url:a,async:!0,onLoad:h,onError:j})}return e}A.inject({importSVG:function(a,b){return F(a,b,this)}}),z.inject({importSVG:function(a,b){return this.activate(),F(a,b,this)}})};var ak=new(l.inject(j.exports,{Base:j,Numerical:p,Key:ab,DomEvent:Y,DomElement:X,document:i,window:h,Symbol:G,PlacedSymbol:F}));return ak.agent.node&&c(4169)(ak),g!==(e="function"==typeof(d=ak)?d.call(b,c,b,a):d)&&(a.exports=e),ak}).call(this,"object"==typeof self?self:null)}}])