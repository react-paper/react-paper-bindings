(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[154],{296:function(a){function b(a,b,c){function d(){var k=Date.now()-h;k<b&&k>=0?e=setTimeout(d,b-k):(e=null,c||(j=a.apply(g,f),g=f=null))}null==b&&(b=100);var e,f,g,h,j,k=function(){g=this,f=arguments,h=Date.now();var k=c&&!e;return e||(e=setTimeout(d,b)),k&&(j=a.apply(g,f),g=f=null),j};return k.clear=function(){e&&(clearTimeout(e),e=null)},k.flush=function(){e&&(j=a.apply(g,f),g=f=null,clearTimeout(e),e=null)},k}b.debounce=b,a.exports=b},7145:function(a,b,c){"use strict";var d=c(3454);function e(a){return"object"!=typeof a||"toString"in a?a:Object.prototype.toString.call(a).slice(8,-1)}Object.defineProperty(b,"__esModule",{value:!0});var f="object"==typeof d;function g(a,b){if(!a){if(f)throw Error("Invariant failed");throw Error(b())}}b.invariant=g;var h=Object.prototype.hasOwnProperty,j=Array.prototype.splice,k=Object.prototype.toString;function l(a){return k.call(a).slice(8,-1)}var m=Object.assign||function(a,b){return n(b).forEach(function(c){h.call(b,c)&&(a[c]=b[c])}),a},n="function"==typeof Object.getOwnPropertySymbols?function(a){return Object.keys(a).concat(Object.getOwnPropertySymbols(a))}:function(a){return Object.keys(a)};function o(a){return Array.isArray(a)?m(a.constructor(a.length),a):"Map"===l(a)?new Map(a):"Set"===l(a)?new Set(a):a&&"object"==typeof a?m(Object.create(Object.getPrototypeOf(a)),a):a}var p=function(){function a(){this.commands=m({},q),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(a,b){return a===b},this.update.newContext=function(){return new a().update}}return Object.defineProperty(a.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(a){this.update.isEquals=a},enumerable:!0,configurable:!0}),a.prototype.extend=function(a,b){this.commands[a]=b},a.prototype.update=function(a,b){var c=this,d="function"==typeof b?{$apply:b}:b;Array.isArray(a)&&Array.isArray(d)||g(!Array.isArray(d),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),g("object"==typeof d&&null!==d,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: "+Object.keys(c.commands).join(", ")+"."});var e=a;return n(d).forEach(function(b){if(h.call(c.commands,b)){var f=a===e;e=c.commands[b](d[b],e,d,a),f&&c.isEquals(e,a)&&(e=a)}else{var g="Map"===l(a)?c.update(a.get(b),d[b]):c.update(a[b],d[b]),j="Map"===l(e)?e.get(b):e[b];c.isEquals(g,j)&&(void 0!==g||h.call(a,b))||(e===a&&(e=o(a)),"Map"===l(e)?e.set(b,g):e[b]=g)}}),e},a}();b.Context=p;var q={$push:function(a,b,c){return s(b,c,"$push"),a.length?b.concat(a):b},$unshift:function(a,b,c){return s(b,c,"$unshift"),a.length?a.concat(b):b},$splice:function(a,b,c,d){return u(b,c),a.forEach(function(a){v(a),b===d&&a.length&&(b=o(d)),j.apply(b,a)}),b},$set:function(a,b,c){return x(c),a},$toggle:function(a,b){t(a,"$toggle");var c=a.length?o(b):b;return a.forEach(function(a){c[a]=!b[a]}),c},$unset:function(a,b,c,d){return t(a,"$unset"),a.forEach(function(a){Object.hasOwnProperty.call(b,a)&&(b===d&&(b=o(d)),delete b[a])}),b},$add:function(a,b,c,d){return z(b,"$add"),t(a,"$add"),"Map"===l(b)?a.forEach(function(a){var c=a[0],e=a[1];b===d&&b.get(c)!==e&&(b=o(d)),b.set(c,e)}):a.forEach(function(a){b!==d||b.has(a)||(b=o(d)),b.add(a)}),b},$remove:function(a,b,c,d){return z(b,"$remove"),t(a,"$remove"),a.forEach(function(a){b===d&&b.has(a)&&(b=o(d)),b.delete(a)}),b},$merge:function(a,b,c,d){return y(b,a),n(a).forEach(function(c){a[c]!==b[c]&&(b===d&&(b=o(d)),b[c]=a[c])}),b},$apply:function(a,b){return w(a),a(b)}},r=new p;function s(a,b,c){g(Array.isArray(a),function(){return"update(): expected target of "+e(c)+" to be an array; got "+e(a)+"."}),t(b[c],c)}function t(a,b){g(Array.isArray(a),function(){return"update(): expected spec of "+e(b)+" to be an array; got "+e(a)+". Did you forget to wrap your parameter in an array?"})}function u(a,b){g(Array.isArray(a),function(){return"Expected $splice target to be an array; got "+e(a)}),v(b.$splice)}function v(a){g(Array.isArray(a),function(){return"update(): expected spec of $splice to be an array of arrays; got "+e(a)+". Did you forget to wrap your parameters in an array?"})}function w(a){g("function"==typeof a,function(){return"update(): expected spec of $apply to be a function; got "+e(a)+"."})}function x(a){g(1===Object.keys(a).length,function(){return"Cannot have more than one key in an object with $set"})}function y(a,b){g(b&&"object"==typeof b,function(){return"update(): $merge expects a spec of type 'object'; got "+e(b)}),g(a&&"object"==typeof a,function(){return"update(): $merge expects a target of type 'object'; got "+e(a)})}function z(a,b){var c=l(a);g("Map"===c||"Set"===c,function(){return"update(): "+e(b)+" expects a target of type Set or Map; got "+e(c)})}b.isEquals=r.update.isEquals,b.extend=r.extend,b.default=r.update,b.default.default=a.exports=m(b.default,b)},3454:function(a,b,c){"use strict";var d,e;a.exports=(null==(d=c.g.process)?void 0:d.env)&&"object"==typeof(null==(e=c.g.process)?void 0:e.env)?c.g.process:c(7663)},1832:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/editor",function(){return c(8008)}])},8008:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return aU}});var d,e,f,g,h,j=c(5893),k=c(7294),l=c(9008),m=c.n(l),n=(0,k.createContext)(void 0),o=c(4924),p=c(943),q=c(3375),r=c(1566),s=c(7145),t=c.n(s),u=c(6042),v=c(9396),w=c(253),x=c(3724),y=function(a){return(0,j.jsx)(x.Cd,(0,u.Z)({},a))},z=function(a){var b=(0,k.useCallback)(function(){document.body&&(document.body.style.cursor="pointer")},[]),c=(0,k.useCallback)(function(){document.body&&(document.body.style.cursor="auto")},[]);return(0,j.jsx)(x.y$,(0,v.Z)((0,u.Z)({},a),{onMouseEnter:b,onMouseLeave:c}))};(h=d||(d={})).Circle="Circle",h.Path="Path";var A={Circle:y,Path:z},B=new Uint8Array(16);function C(){if(!e&&!(e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(B)}for(var D=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,E=[],F=0;F<256;++F)E.push((F+256).toString(16).substr(1));var G,H=function(a){var b,c=arguments.length>1&& void 0!==arguments[1]?arguments[1]:0,d=(E[a[c+0]]+E[a[c+1]]+E[a[c+2]]+E[a[c+3]]+"-"+E[a[c+4]]+E[a[c+5]]+"-"+E[a[c+6]]+E[a[c+7]]+"-"+E[a[c+8]]+E[a[c+9]]+"-"+E[a[c+10]]+E[a[c+11]]+E[a[c+12]]+E[a[c+13]]+E[a[c+14]]+E[a[c+15]]).toLowerCase();if(!("string"==typeof(b=d)&&D.test(b)))throw TypeError("Stringified UUID is invalid");return d},I=function(a,b,c){var d=(a=a||{}).random||(a.rng||C)();if(d[6]=15&d[6]|64,d[8]=63&d[8]|128,b){c=c||0;for(var e=0;e<16;++e)b[c+e]=d[e];return b}return H(d)},J={strokeColor:"#ff0000",strokeWidth:3,strokeScaling:!1},K=function(a,b){return(0,v.Z)((0,u.Z)({},J,b),{id:I(),type:a})},L=c(2670),M=function(a){var b=a.point,c=a.event,d=a.tool;return(0,L.Z)(c,TouchEvent)?{point:d.view.projectToView(b),x:c.touches[0].pageX,y:c.touches[0].pageY}:{point:d.view.projectToView(b),x:c.pageX,y:c.pageY}},N=function(a,b){var c=a.point,d=a.tool,e=c.subtract(d.view.viewToProject(b.point));return{tx:e.x,ty:e.y,x:e.x,y:e.y}},O=function(){var a=(0,k.useRef)(null),b=(0,k.useCallback)(function(b){var c=M(b);if(a.current){var d=N(b,a.current);b.tool.view.translate(d.tx,d.ty)}a.current=c},[]),c=(0,k.useCallback)(function(){a.current=null},[]);return{mouseDrag:b,mouseUp:c}},P=function(a,b){var c=a.touches,d=b.element.getBoundingClientRect(),e=d.top,f=d.left,g=c[0].pageX-f,h=c[0].pageY-e,j=c[1].pageX-f,k=c[1].pageY-e;return{center:[(g+j)/2,(h+k)/2],distance:Math.sqrt(Math.pow(j-g,2)+Math.pow(k-h,2))}},Q=function(a,b,c){var d=a.viewToProject(c.center),e=d.subtract(a.viewToProject(b.center)),f=c.distance/b.distance;return{tx:e.x,ty:e.y,sx:d.x,sy:d.y,x:e.x,y:e.y,zoom:f}},R=function(){var a=(0,k.useRef)(null),b=(0,k.useCallback)(function(b){var c=b.event,d=b.tool,e=P(c,d.view);if(a.current){var f=Q(d.view,a.current,e);d.view.scale(f.zoom,[f.sx,f.sy]),d.view.translate(f.tx,f.ty)}a.current=e},[]),c=(0,k.useCallback)(function(){a.current=null},[]);return{mouseDrag:b,mouseUp:c}},S=function(a){var b=(0,w.Z)(af(),2),c=b[0],d=b[1],e=(0,k.useCallback)(function(a){if(c.scope){var b=c.scope,e=b.view,f=b.Point;if(e.element===a.target){a.stopPropagation();var g=-a.deltaY>0?1.1:.9090909090909091,h=e.element.getBoundingClientRect(),j=h.left,k=h.top,l=e.viewToProject(new f(a.clientX-j,a.clientY-k));e.scale(g,l),d({type:"setZoom",zoom:e.zoom})}}},[d,c.scope]);(0,k.useEffect)(function(){return c.scope&&c.tool===a&&document.addEventListener("wheel",e),function(){c.tool===a&&document.removeEventListener("wheel",e)}},[e,c.scope,c.tool,a])},T="Circle",U=function(){var a=(0,w.Z)(af(),2),b=a[0],c=a[1],e=(0,k.useRef)(null),f=(0,k.useCallback)(function(a){b.scope&&(e.current=new b.scope.Path.Circle((0,v.Z)((0,u.Z)({},J),{insert:!0,center:a.point,radius:10})),b.scope.project.activeLayer.addChild(e.current))},[b.scope]),g=(0,k.useCallback)(function(a){if(b.scope&&e.current){var c=a.downPoint,d=c.getDistance(a.point);if(d>0){var f=c.x-d,g=c.y-d,h=2*d;e.current.fitBounds(f,g,h,h)}}},[b.scope]),h=(0,k.useCallback)(function(){b.image&&e.current&&(c({type:"addItem",item:K(d.Circle,{pathData:e.current.pathData})}),e.current.remove(),e.current=null)},[c,b.image]);return(0,j.jsx)(x.UA,{name:T,active:b.tool===T,onMouseDown:f,onMouseDrag:g,onMouseUp:h})},V="Delete",W=function(){var a=(0,w.Z)(af(),2),b=a[0],c=a[1],d=(0,k.useCallback)(function(a){if(b.scope){var d=b.scope.project.hitTest(a.point,{fill:!0,segments:!0,stroke:!0,tolerance:15});d&&d.item&&c({type:"removeItem",index:d.item.index})}},[c,b.scope]);return(0,j.jsx)(x.UA,{name:V,active:b.tool===V,onMouseDown:d})};(G=f||(f={})).Circle="Circle",G.Delete="Delete",G.Move="Move",G.Pen="Pen",G.Select="Select";var X=f.Move,Y=function(){var a=(0,w.Z)(af(),1)[0],b=R(),c=O();S(X);var d=(0,k.useCallback)(function(){},[]),e=(0,k.useCallback)(function(a){var d=a.event;(0,L.Z)(d,TouchEvent)&&2===d.touches.length?b.mouseDrag(a):c.mouseDrag(a)},[c,b]),f=(0,k.useCallback)(function(){c.mouseUp(),b.mouseUp()},[c,b]);return(0,j.jsx)(x.UA,{name:X,active:a.tool===X,onMouseDown:d,onMouseDrag:e,onMouseUp:f})},Z=function(){var a=(0,w.Z)(af(),2),b=a[0],c=a[1],e=(0,k.useRef)(),f=(0,k.useCallback)(function(){null!==b.selection&&c({type:"setSelection",selection:void 0})},[c,b.selection]),g=(0,k.useCallback)(function(a){b.scope&&(e.current?e.current.add(a.point):e.current=new b.scope.Path((0,v.Z)((0,u.Z)({},J),{insert:!0,segments:[a.point]})))},[b.scope]),h=(0,k.useCallback)(function(){b.image&&e.current&&(e.current.simplify(10),c({type:"addItem",item:K(d.Path,{pathData:e.current.pathData})}),e.current.remove(),e.current=void 0)},[c,b.image]);return(0,j.jsx)(x.UA,{name:"Pen",active:"Pen"===b.tool,onMouseDown:f,onMouseDrag:g,onMouseUp:h})},$="Select",_=function(){var a=(0,w.Z)(af(),2),b=a[0],c=a[1],d=(0,k.useRef)(),e=(0,k.useRef)(),f=(0,k.useRef)(!1),g=(0,k.useCallback)(function(a){if(b.scope){var f=b.scope.project.hitTest(a.point,{fill:!0,segments:!0,stroke:!0,tolerance:10});f&&f.item?(f.item.layer.selected=!1,f.item.selected=!0,d.current=f.item,e.current=a.point):(d.current=void 0,e.current=void 0,c({type:"setSelection",selection:void 0}))}},[b.scope,c]),h=(0,k.useCallback)(function(a){d.current&&e.current&&(d.current.translate(a.point.subtract(e.current)),f.current=!0,e.current=a.point)},[]),l=(0,k.useCallback)(function(){d.current&&f.current&&(c({type:"setSelection",selection:d.current.props.id}),c({type:"updateItem",index:d.current.index,item:{pathData:d.current.pathData}})),f.current=!1,e.current=void 0},[c]);return(0,j.jsx)(x.UA,{name:$,active:b.tool===$,onMouseDown:g,onMouseDrag:h,onMouseUp:l})},aa={Circle:U,Delete:W,Move:Y,Pen:Z,Select:_},ab={loading:!0,scope:void 0,image:void 0,history:[],historyIndex:0,routeIndex:0,selection:void 0,tool:f.Move,zoom:1},ac=function(a,b){var c,d=a.history[a.historyIndex],e=t()(d,{routes:(0,o.Z)({},a.routeIndex,{items:b})}),f=a.historyIndex+1,g=((function(a){if(Array.isArray(a))return(0,p.Z)(a)})(c=a.history.slice(0,f))||(0,q.Z)(c)||(0,r.Z)(c)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([e]);return t()(a,{$merge:{history:g,historyIndex:f}})},ad=function(a,b){switch(b.type){case"setLoading":return t()(a,{loading:{$set:b.loading}});case"setScope":return t()(a,{scope:{$set:b.scope}});case"setImage":var c=b.image;return t()(a,{$merge:{image:c,history:c?[c]:[],historyIndex:0,selection:void 0,loading:!1}});case"setTool":return t()(a,{tool:{$set:b.tool}});case"setSelection":return t()(a,{selection:{$set:b.selection}});case"setZoom":return t()(a,{zoom:{$set:b.zoom}});case"addItem":return ac(a,{$push:[b.item]});case"updateItem":return ac(a,(0,o.Z)({},b.index,{$merge:b.item}));case"removeItem":return ac(a,{$splice:[[b.index,1]]});case"undo":if(a.historyIndex<=0)return a;return t()(a,{$merge:{historyIndex:a.historyIndex-1,selection:void 0}});case"redo":if(a.historyIndex>=a.history.length-1)return a;return t()(a,{$merge:{historyIndex:a.historyIndex+1,selection:void 0}});case"reset":return t()(a,{$merge:{history:[],historyIndex:0,selection:void 0}});default:return a}},ae=function(a){var b=a.children,c=(0,k.useReducer)(ad,ab);return(0,j.jsx)(n.Provider,{value:c,children:b})},af=function(){return(0,k.useContext)(n)},ag=c(296),ah=c.n(ag);function ai(a){let b=[];if(!a||a===document.body)return b;let{overflow:c,overflowX:d,overflowY:e}=window.getComputedStyle(a);return[c,d,e].some(a=>"auto"===a||"scroll"===a)&&b.push(a),[...b,...ai(a.parentElement)]}let aj=["x","y","top","bottom","left","right","width","height"],ak=(a,b)=>aj.every(c=>a[c]===b[c]);var al=c(9534),am=function(a){var b=a.size,c=void 0===b?24:b,d=(0,al.Z)(a,["size"]);return(0,j.jsx)("svg",(0,v.Z)((0,u.Z)({viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg"},d),{width:c,height:c}))},an=function(a){return(0,j.jsxs)(am,(0,v.Z)((0,u.Z)({},a),{children:[(0,j.jsx)("title",{children:"Undo"}),(0,j.jsx)("path",{fill:"currentColor",d:"M448 440a16 16 0 01-12.61-6.15c-22.86-29.27-44.07-51.86-73.32-67C335 352.88 301 345.59 256 344.23V424a16 16 0 01-27 11.57l-176-168a16 16 0 010-23.14l176-168A16 16 0 01256 88v80.36c74.14 3.41 129.38 30.91 164.35 81.87C449.32 292.44 464 350.9 464 424a16 16 0 01-16 16z"})]}))},ao=c(5468),ap=c.n(ao),aq=function(a){var b=a.active,c=a.className,d=(0,al.Z)(a,["active","className"]);return(0,j.jsx)("button",(0,v.Z)((0,u.Z)({},d),{className:[ap().button,void 0!==b&&b?ap().active:"",c].join(" ")}))},ar=function(a){a.className;var b=(0,al.Z)(a,["className"]),c=(0,w.Z)(af(),2),d=c[0].historyIndex,e=c[1];return(0,j.jsx)(aq,(0,v.Z)((0,u.Z)({},b),{disabled:0===d,onClick:function(){return e({type:"undo"})},children:(0,j.jsx)(an,{})}))},as=function(a){return(0,j.jsxs)(am,(0,v.Z)((0,u.Z)({},a),{children:[(0,j.jsx)("title",{children:"Redo"}),(0,j.jsx)("path",{fill:"currentColor",d:"M58.79 439.13A16 16 0 0148 424c0-73.1 14.68-131.56 43.65-173.77 35-51 90.21-78.46 164.35-81.87V88a16 16 0 0127.05-11.57l176 168a16 16 0 010 23.14l-176 168A16 16 0 01256 424v-79.77c-45 1.36-79 8.65-106.07 22.64-29.25 15.12-50.46 37.71-73.32 67a16 16 0 01-17.82 5.28z"})]}))},at=function(a){a.className;var b=(0,al.Z)(a,["className"]),c=(0,w.Z)(af(),2),d=c[0],e=d.history,f=d.historyIndex,g=c[1];return(0,j.jsx)(aq,(0,v.Z)((0,u.Z)({},b),{disabled:f>=e.length-1,onClick:function(){return g({type:"redo"})},children:(0,j.jsx)(as,{})}))},au=c(9474),av=c(3128),aw=function(a){var b;return(b=a.project.layers,(0,au.Z)(b)||(0,q.Z)(b)||(0,r.Z)(b,i)||(0,av.Z)()).slice(1).map(function(a){var b=a.children.map(function(a){var b;return{id:a.props.id,name:a.props.name,type:a.type,pathData:a.pathData,strokeColor:null===(b=a.strokeColor)|| void 0===b?void 0:b.toCSS(!0),strokeWidth:a.strokeWidth,strokeScaling:a.strokeScaling}});return{id:a.props.id,name:a.props.name,type:"Layer",items:b}})},ax=function(a){return(0,j.jsxs)(am,(0,v.Z)((0,u.Z)({},a),{children:[(0,j.jsx)("title",{children:"Save"}),(0,j.jsx)("path",{fill:"currentColor",d:"M465.94 119.76l-73.7-73.7A47.68 47.68 0 00358.3 32H96a64 64 0 00-64 64v320a64 64 0 0064 64h320a64 64 0 0064-64V153.7a47.68 47.68 0 00-14.06-33.94zM120 112h176a8 8 0 018 8v48a8 8 0 01-8 8H120a8 8 0 01-8-8v-48a8 8 0 018-8zm139.75 319.91a80 80 0 1176.16-76.16 80.06 80.06 0 01-76.16 76.16z"}),(0,j.jsx)("circle",{fill:"currentColor",cx:"256",cy:"352",r:"48"})]}))},ay=function(a){a.className;var b=(0,al.Z)(a,["className"]),c=(0,w.Z)(af(),1)[0],d=(0,k.useCallback)(function(){if(c.scope){var a=aw(c.scope);console.log(JSON.stringify(a))}},[c.scope]);return(0,j.jsx)(aq,(0,v.Z)((0,u.Z)({},b),{onClick:d,children:(0,j.jsx)(ax,{})}))},az=function(a){return(0,j.jsxs)(am,(0,v.Z)((0,u.Z)({},a),{children:[(0,j.jsx)("title",{children:"Move"}),(0,j.jsx)("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M176 112l80-80 80 80M255.98 32l.02 448M176 400l80 80 80-80M400 176l80 80-80 80M112 176l-80 80 80 80M32 256h448"})]}))},aA=function(a){return(0,j.jsxs)(am,(0,v.Z)((0,u.Z)({},a),{children:[(0,j.jsx)("title",{children:"Pen"}),(0,j.jsx)("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"44",d:"M358.62 129.28L86.49 402.08 70 442l39.92-16.49 272.8-272.13-24.1-24.1zM413.07 74.84l-11.79 11.78 24.1 24.1 11.79-11.79a16.51 16.51 0 000-23.34l-.75-.75a16.51 16.51 0 00-23.35 0z"})]}))},aB=function(a){return(0,j.jsxs)(am,(0,v.Z)((0,u.Z)({},a),{children:[(0,j.jsx)("title",{children:"Circle"}),(0,j.jsx)("circle",{cx:"256",cy:"256",r:"192",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"})]}))},aC=function(a){return(0,j.jsxs)(am,(0,v.Z)((0,u.Z)({},a),{children:[(0,j.jsx)("title",{children:"Select"}),(0,j.jsx)("path",{fill:"currentColor",d:"M267.024 282.48l84.976 197.52-64 32-74.336-202.848-117.664 106.848v-416l320 256-148.976 26.48z"})]}))},aD=function(a){return(0,j.jsxs)(am,(0,v.Z)((0,u.Z)({},a),{children:[(0,j.jsx)("title",{children:"Delete"}),(0,j.jsx)("path",{fill:"none",d:"M296 64h-80a7.91 7.91 0 00-8 8v24h96V72a7.91 7.91 0 00-8-8z"}),(0,j.jsx)("path",{fill:"currentColor",d:"M432 96h-96V72a40 40 0 00-40-40h-80a40 40 0 00-40 40v24H80a16 16 0 000 32h17l19 304.92c1.42 26.85 22 47.08 48 47.08h184c26.13 0 46.3-19.78 48-47l19-305h17a16 16 0 000-32zM192.57 416H192a16 16 0 01-16-15.43l-8-224a16 16 0 1132-1.14l8 224A16 16 0 01192.57 416zM272 400a16 16 0 01-32 0V176a16 16 0 0132 0zm32-304h-96V72a7.91 7.91 0 018-8h80a7.91 7.91 0 018 8zm32 304.57A16 16 0 01320 416h-.58A16 16 0 01304 399.43l8-224a16 16 0 1132 1.14z"})]}))},aE=(g={},(0,o.Z)(g,f.Move,az),(0,o.Z)(g,f.Pen,aA),(0,o.Z)(g,f.Circle,aB),(0,o.Z)(g,f.Select,aC),(0,o.Z)(g,f.Delete,aD),g),aF=function(a){a.className;var b=a.tool,c=(0,al.Z)(a,["className","tool"]),d=(0,w.Z)(af(),2),e=d[0],f=d[1],g=aE[b];return(0,j.jsx)(aq,(0,v.Z)((0,u.Z)({},c),{active:e.tool===b,onClick:function(){return f({type:"setTool",tool:b})},children:(0,j.jsx)(g,{})}))},aG=function(a){return(0,j.jsxs)("div",(0,v.Z)((0,u.Z)({},a),{children:[(0,j.jsx)(aF,{tool:f.Move}),(0,j.jsx)(aF,{tool:f.Pen}),(0,j.jsx)(aF,{tool:f.Circle}),(0,j.jsx)(aF,{tool:f.Select}),(0,j.jsx)(aF,{tool:f.Delete}),(0,j.jsx)("span",{children:"|"}),(0,j.jsx)(ar,{}),(0,j.jsx)(at,{}),(0,j.jsx)("span",{children:"|"}),(0,j.jsx)(ay,{})]}))},aH=function(a,b){var c=a.viewSize,d=c.width/b.width,e=c.height/b.height,f=d<e?d:e,g=b.width*f,h=b.height*f,j=(c.width-g)/2/f,k=(c.height-h)/2/f;a.scale(f/a.zoom),a.translate(j-a.matrix.tx/a.zoom,k-a.matrix.ty/a.zoom)},aI=function(a){var b=a.image,c=(0,w.Z)(af(),2),d=c[0],e=c[1],f=(0,k.useCallback)(function(a){a&&a.view&&(a.fitBounds(0,0,b.width,b.height),aH(a.view,b),e({type:"setImage",image:b}))},[b,e]);return(0,j.jsx)(x.mh,{id:b.id,visible:!!d.image,children:(0,j.jsx)(x.nS,{locked:!0,source:b.url,onLoad:f})})},aJ=function(a){var b=a.route,c=a.index,d=(0,w.Z)(af(),1)[0];return(0,j.jsx)(x.mh,{id:b.id,active:d.routeIndex===c,visible:!!d.image,children:b.items.map(function(a){var b=A[a.type];return(0,k.createElement)(b,(0,v.Z)((0,u.Z)({},a),{id:a.id,key:a.id,selected:d.selection===a.id}))})},b.id)},aK=function(a){var b=a.image,c=a.width,d=a.height,e=(0,al.Z)(a,["image","width","height"]),f=(0,k.useContext)(n),g=(0,w.Z)(f,2),h=g[0],l=g[1],m=h.history[h.historyIndex],o=(0,k.useCallback)(function(a){return l({type:"setScope",scope:a})},[l]);return(0,j.jsx)(x.Xz,(0,v.Z)((0,u.Z)({},e),{width:c,height:d,onScopeReady:o,children:(0,j.jsxs)(n.Provider,{value:f,children:[(0,j.jsxs)(x.G7,{children:[(0,j.jsx)(aI,{image:b}),null==m?void 0:m.routes.map(function(a,b){return(0,j.jsx)(aJ,{route:a,index:b},a.id)})]}),(0,j.jsx)(aa.Move,{}),(0,j.jsx)(aa.Pen,{}),(0,j.jsx)(aa.Circle,{}),(0,j.jsx)(aa.Select,{}),(0,j.jsx)(aa.Delete,{})]})}))},aL=c(4172),aM=c.n(aL),aN=function(a){var b=a.image,c=(0,w.Z)(function(a){var b,c,d;let{debounce:e,scroll:f,polyfill:g,offsetSize:h}=void 0===a?{debounce:0,scroll:!1,offsetSize:!1}:a,j=g||("undefined"==typeof window?class{}:window.ResizeObserver);if(!j)throw Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");let[l,m]=(0,k.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),n=(0,k.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:l}),o=e?"number"==typeof e?e:e.scroll:null,p=e?"number"==typeof e?e:e.resize:null,q=(0,k.useRef)(!1);(0,k.useEffect)(()=>(q.current=!0,()=>void(q.current=!1)));let[r,s,t]=(0,k.useMemo)(()=>{let a=()=>{if(!n.current.element)return;let{left:a,top:b,width:c,height:d,bottom:e,right:f,x:g,y:j}=n.current.element.getBoundingClientRect(),k={left:a,top:b,width:c,height:d,bottom:e,right:f,x:g,y:j};n.current.element instanceof HTMLElement&&h&&(k.height=n.current.element.offsetHeight,k.width=n.current.element.offsetWidth),Object.freeze(k),q.current&&!ak(n.current.lastBounds,k)&&m(n.current.lastBounds=k)};return[a,p?ah()(a,p):a,o?ah()(a,o):a]},[m,h,o,p]);function u(){n.current.scrollContainers&&(n.current.scrollContainers.forEach(a=>a.removeEventListener("scroll",t,!0)),n.current.scrollContainers=null),n.current.resizeObserver&&(n.current.resizeObserver.disconnect(),n.current.resizeObserver=null)}function v(){n.current.element&&(n.current.resizeObserver=new j(t),n.current.resizeObserver.observe(n.current.element),f&&n.current.scrollContainers&&n.current.scrollContainers.forEach(a=>a.addEventListener("scroll",t,{capture:!0,passive:!0})))}let w=a=>{a&&a!==n.current.element&&(u(),n.current.element=a,n.current.scrollContainers=ai(a),v())};return b=t,c=Boolean(f),(0,k.useEffect)(()=>{if(c){let a=b;return window.addEventListener("scroll",a,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",a,!0)}},[b,c]),d=s,(0,k.useEffect)(()=>{let a=d;return window.addEventListener("resize",a),()=>void window.removeEventListener("resize",a)},[d]),(0,k.useEffect)(()=>{u(),v()},[f,t,s]),(0,k.useEffect)(()=>u,[]),[w,l,r]}({debounce:150}),2),d=c[0],e=c[1],f=e.width,g=e.height;return(0,j.jsxs)("div",{className:aM().container,children:[(0,j.jsx)(aG,{className:aM().toolbar}),(0,j.jsx)("div",{className:aM().routes,children:"Routes"}),(0,j.jsx)("div",{className:aM().paper,ref:d,children:f>0&&g>0&&(0,j.jsx)(aK,{image:b,width:f,height:g})})]})},aO=c(4128),aP=c.n(aO),aQ=c(1664),aR=c.n(aQ),aS={id:"37ag863f-8530-4716-512d-5jr2bd3be5d2",width:1920,height:870,url:"/mr-bubbles.jpg",routes:[{id:"47dea029-5470-4c5a-a94a-61967cc46854",name:"Route 1",type:"Layer",items:[{id:"54bf866f-3990-4716-801c-3fc7f93bd0c7",type:"Path",pathData:"M250.1758,639.50879c20.94297,-48.86693 59.34607,-87.4377 93.31954,-127.07342c19.40907,-22.64392 33.63846,-49.15867 53.6091,-71.4788c16.35186,-18.27561 38.25883,-32.30227 55.59462,-49.63806c20.02213,-20.02213 37.52521,-42.18195 55.59462,-63.53671c15.79546,-18.66736 36.73709,-31.77493 51.62358,-51.62358c13.87974,-18.50632 20.68251,-41.9993 35.7394,-59.56567c17.26294,-20.1401 33.62818,-42.14831 47.65253,-65.52223",strokeColor:"#ff0000",strokeWidth:3,strokeScaling:!1},{id:"b1b74b5d-20be-4951-a7db-e5f75cf14489",type:"Path",pathData:"M822.0062,558.10238c12.35201,-22.64536 28.12091,-44.93866 39.71044,-67.50776c23.44243,-45.65105 38.49571,-97.23204 57.58014,-144.94312c20.2652,-50.66299 51.05793,-98.14482 75.44984,-146.92865",strokeColor:"#ff0000",strokeWidth:3,strokeScaling:!1},{id:"1be38c6b-a37b-4437-9a04-2757b51f122b",type:"Path",pathData:"M1064.23992,595.8273c24.35736,-36.53603 48.37271,-73.35856 73.46432,-109.20372c22.81339,-32.59056 56.59328,-56.60506 69.49328,-95.30507c9.91559,-29.74678 0.41998,-97.78745 -1.98552,-129.05895c-1.29475,-16.83179 1.98552,-32.98497 1.98552,-49.63806",strokeColor:"#ff0000",strokeWidth:3,strokeScaling:!1},]},{id:"8a0c22ee-16c8-4354-89c2-27bee9149ad4",name:"Route 2",type:"Layer",items:[]},]},aT=function(){return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(m(),{children:[(0,j.jsx)("title",{children:"react-paper-bindings demo"}),(0,j.jsx)("meta",{name:"description",content:"Demo for react-paper-bindings library built with Next.js."}),(0,j.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,j.jsx)(aR(),{href:"/",children:"Home"}),(0,j.jsx)("div",{className:aP().container,children:(0,j.jsx)(ae,{children:(0,j.jsx)(aN,{image:aS})})})]})},aU=aT},3724:function(a,b,c){"use strict";c.d(b,{Xz:function(){return E},Cd:function(){return s},Op:function(){return r},mh:function(){return p},"y$":function(){return q},nS:function(){return u},Ae:function(){return t},UA:function(){return v},G7:function(){return o}});var d=c(4924),e=c(2670),f=c(6042),g=c(9396),h=c(9534),j=c(5861),k=c.n(j),l=c(4078),m=c(4725),n=c.n(m),o="View",p="Layer",q="Path",r="CompoundPath",s="Circle",t="Rectangle",u="Raster",v="Tool",w=function(a,b,c,e){c[a]!==e[a]&&Object.assign(b,(0,d.Z)({},a,c[a]))},x={data:function(a,b,c){b.data!==c.data&&(0,e.Z)(a,n().Item)&&(a.data=(0,g.Z)((0,f.Z)({},a.data,b.data),{type:a.type}))},active:function(a,b,c){b.active&&b.active!==c.active&&(0,e.Z)(a,n().Tool)&&a.activate()},point:function(a,b,c){b.point!==c.point&&(0,e.Z)(a,n().Item)&&a.translate([b.point[0]-c.point[0],b.point[1]-c.point[1],])},center:function(a,b,c){b.center!==c.center&&(0,e.Z)(a,n().Item)&&a.translate([b.center[0]-c.center[0],b.center[1]-c.center[1],])},radius:function(a,b,c){b.radius!==c.radius&&(0,e.Z)(a,n().Item)&&a.scale(b.radius/c.radius)},rotation:function(a,b,c){b.rotation!==c.rotation&&(0,e.Z)(a,n().Item)&&(b.rotation&&c.rotation?a.rotate(b.rotation-c.rotation):a.rotation=b.rotation)},size:function(a,b,c){b.size!==c.size&&(0,e.Z)(a,n().Item)&&a.scale(b.size[0]/c.size[0],b.size[1]/c.size[1])}},y=function(a,b){for(var c=arguments.length>2&& void 0!==arguments[2]?arguments[2]:{},d=Object.keys(b),e=d.length,f=0;f<e;){var g=d[f];"id"!==g&&"children"!==g&&(x[g]?x[g](a,b,c):w(g,a,b,c)),f++}},z=function(a,b){var c=b.id,d=b.name,e=b.svg,f=c||d;if(!f)throw Error("Missing id or name prop on SymbolItem");if(!e)throw Error("Missing svg prop on SymbolItem");if(a.symbols&&a.symbols[f])return a.symbols[f];a.symbols||(a.symbols={});var g=new(n()).SymbolDefinition(a.project.importSVG(e));return a.symbols[f]=g,g},A=k()({createInstance:function(a,b,c){b.children;var d,e=(0,h.Z)(b,["children"]),j=(0,g.Z)((0,f.Z)({},e),{project:c.project});switch(a){case o:(d=c.view).project=c.project;break;case v:d=new c.Tool;break;case p:d=new c.Layer(j);break;case"Group":d=new c.Group(j);break;case q:d=new c.Path(j);break;case r:d=new c.CompoundPath(j);break;case"Arc":d=new c.Path.Arc(j);break;case s:d=new c.Path.Circle(j);break;case"Ellipse":d=new c.Path.Ellipse(j);break;case"Line":d=new c.Path.Line(j);break;case t:d=new c.Path.Rectangle(j);break;case"RegularPolygon":d=new c.Path.RegularPolygon(j);break;case"PointText":d=new c.PointText(j);break;case"SymbolItem":var k=z(c,j);d=new c.SymbolItem(k,j.center);break;case u:var l=j.onLoad,m=(0,h.Z)(j,["onLoad"]);d=new c.Raster(m),"function"==typeof l&&(d.onLoad=function(){return l(d)});break;default:throw Error('PaperRenderer does not support the type "'.concat(a,'"'))}return d.props=e,d.type=a,d},createTextInstance:function(){throw Error("PaperRenderer does not support text children")},getPublicInstance:function(a){return a},prepareForCommit:function(){return null},prepareUpdate:function(){return!0},resetAfterCommit:function(){},resetTextContent:function(){},getRootHostContext:function(){return null},getChildHostContext:function(){return null},shouldSetTextContent:function(){return!1},getCurrentEventPriority:function(){return l.DefaultEventPriority},getInstanceFromNode:function(){},getInstanceFromScope:function(){},preparePortalMount:function(){},prepareScopeUpdate:function(){},beforeActiveInstanceBlur:function(){},afterActiveInstanceBlur:function(){},detachDeletedInstance:function(){},clearContainer:function(){},scheduleTimeout:setTimeout,cancelTimeout:clearTimeout,noTimeout:-1,isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsHydration:!1,supportsPersistence:!1,appendInitialChild:function(a,b){(0,e.Z)(a,n().Group)&&(0,e.Z)(b,n().Item)&&b.addTo(a),(0,e.Z)(a,n().CompoundPath)&&(0,e.Z)(b,n().Item)&&b.addTo(a),(0,e.Z)(a,n().View)&&(0,e.Z)(b,n().Item)&&b.addTo(a.project)},finalizeInitialChildren:function(a,b,c){return((0,e.Z)(a,n().View)||(0,e.Z)(a,n().Tool))&&y(a,c),!1},appendChild:function(a,b){(0,e.Z)(a,n().Group)&&(0,e.Z)(b,n().Item)&&b.addTo(a),(0,e.Z)(a,n().View)&&(0,e.Z)(b,n().Item)&&b.addTo(a.project)},appendChildToContainer:function(a,b){if(!((0,e.Z)(b,n().View)||(0,e.Z)(b,n().Tool)))throw Error("Container can only hold View and Tool nodes")},insertBefore:function(a,b,c){(0,e.Z)(a,n().Group)&&(0,e.Z)(b,n().Item)&&(0,e.Z)(c,n().Item)&&b.insertAbove(c)},insertInContainerBefore:function(a,b,c){if(!((0,e.Z)(b,n().View)||(0,e.Z)(b,n().Tool))||!((0,e.Z)(c,n().View)||(0,e.Z)(c,n().Tool)))throw Error("Container can only hold View and Tool nodes")},removeChild:function(a,b){"function"==typeof b.remove&&b.remove()},removeChildFromContainer:function(a,b){"function"==typeof b.remove&&b.remove()},commitTextUpdate:function(){},commitMount:function(){},commitUpdate:function(a,b,c,d,e){y(a,e,d)}}),B=c(5893),C=c(7294),D=function(a){var b=(0,C.useRef)(a),c=(0,C.useRef)(),d=(0,C.useRef)(!1),e=(0,C.useRef)(!1),f=(0,C.useState)(0)[1];d.current&&(e.current=!0),(0,C.useEffect)(function(){return d.current||(c.current=b.current(),d.current=!0),f(1),function(){e.current&&c.current&&c.current()}},[])},E=function(a){var b=a.children,c=a.width,d=a.height,j=a.settings,k=a.onScopeReady,n=(0,h.Z)(a,["children","width","height","settings","onScopeReady"]),o=(0,C.useRef)(null),p=(0,C.useRef)(null),q=(0,C.useRef)(null);return D(function(){return(0,e.Z)(o.current,HTMLCanvasElement)&&(p.current=new m.PaperScope,Object.assign(p.current.settings,(0,g.Z)((0,f.Z)({},j),{insertItems:!1})),p.current.setup(o.current),q.current=A.createContainer(p.current,l.ConcurrentRoot,null,!1,null,"",console.error,null),A.updateContainer(null,q.current,null,function(){return null}),"function"==typeof k&&k(p.current)),function(){q.current&&A.updateContainer(null,q.current,null,function(){return null}),o.current=null,p.current=null,q.current=null}}),(0,C.useEffect)(function(){p.current&&q.current&&A.updateContainer(b,q.current,null,function(){return null})},[b]),(0,C.useEffect)(function(){p.current&&(p.current.view.viewSize=new p.current.Size(c,d))},[c,d]),(0,B.jsx)("canvas",(0,g.Z)((0,f.Z)({},n),{ref:o}))}},4172:function(a){a.exports={container:"Paper_container__CHqyo",toolbar:"Paper_toolbar__yj2Lo",paper:"Paper_paper__gcor0"}},5468:function(a){a.exports={button:"Button_button__hzfru",active:"Button_active__SzYzl"}},4128:function(a){a.exports={container:"Styles_container__6hGck",editor:"Styles_editor__S5iy_",canvas:"Styles_canvas__ThDsp"}},7663:function(a){!function(){var b={308:function(a){var b,c,d,e=a.exports={};function f(){throw Error("setTimeout has not been defined")}function g(){throw Error("clearTimeout has not been defined")}function h(a){if(b===setTimeout)return setTimeout(a,0);if((b===f||!b)&&setTimeout)return b=setTimeout,setTimeout(a,0);try{return b(a,0)}catch(c){try{return b.call(null,a,0)}catch(d){return b.call(this,a,0)}}}!function(){try{b="function"==typeof setTimeout?setTimeout:f}catch(a){b=f}try{c="function"==typeof clearTimeout?clearTimeout:g}catch(d){c=g}}();var j=[],k=!1,l=-1;function m(){k&&d&&(k=!1,d.length?j=d.concat(j):l=-1,j.length&&n())}function n(){if(!k){var a=h(m);k=!0;for(var b=j.length;b;){for(d=j,j=[];++l<b;)d&&d[l].run();l=-1,b=j.length}d=null,k=!1,function(a){if(c===clearTimeout)return clearTimeout(a);if((c===g||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(a);try{c(a)}catch(b){try{return c.call(null,a)}catch(d){return c.call(this,a)}}}(a)}}function o(a,b){this.fun=a,this.array=b}function p(){}e.nextTick=function(a){var b=Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];j.push(new o(a,b)),1!==j.length||k||h(n)},o.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=p,e.addListener=p,e.once=p,e.off=p,e.removeListener=p,e.removeAllListeners=p,e.emit=p,e.prependListener=p,e.prependOnceListener=p,e.listeners=function(a){return[]},e.binding=function(a){throw Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(a){throw Error("process.chdir is not supported")},e.umask=function(){return 0}}},c={};function d(a){var e=c[a];if(void 0!==e)return e.exports;var f=c[a]={exports:{}},g=!0;try{b[a](f,f.exports,d),g=!1}finally{g&&delete c[a]}return f.exports}d.ab="//";var e=d(308);a.exports=e}()},4169:function(){},9845:function(){}},function(a){a.O(0,[711,494,774,888,179],function(){var b;return a(a.s=1832)}),_N_E=a.O()}])